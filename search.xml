<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>ElementVueåˆ†é¡µç»„ä»¶äºŒæ¬¡å°è£…</title>
    <url>/2022/04/11/ElementUI-Vue%E5%88%86%E9%A1%B5%E7%BB%84%E4%BB%B6%E4%BA%8C%E6%AC%A1%E5%B0%81%E8%A3%85/</url>
    <content><![CDATA[<h2 id="Vue-Element-åˆ†é¡µç»„ä»¶äºŒæ¬¡å°è£…-å…é™¤äº†ç¹ççš„äº‹ä»¶ç¼–å†™-ä½¿ç”¨æ›´æ–¹ä¾¿"><a href="#Vue-Element-åˆ†é¡µç»„ä»¶äºŒæ¬¡å°è£…-å…é™¤äº†ç¹ççš„äº‹ä»¶ç¼–å†™-ä½¿ç”¨æ›´æ–¹ä¾¿" class="headerlink" title="Vue Element åˆ†é¡µç»„ä»¶äºŒæ¬¡å°è£… å…é™¤äº†ç¹ççš„äº‹ä»¶ç¼–å†™ ä½¿ç”¨æ›´æ–¹ä¾¿"></a>Vue Element åˆ†é¡µç»„ä»¶äºŒæ¬¡å°è£… å…é™¤äº†ç¹ççš„äº‹ä»¶ç¼–å†™ ä½¿ç”¨æ›´æ–¹ä¾¿</h2><h3 id="ç»„ä»¶ï¼ˆå¤åˆ¶ç²˜è´´å³å¯ç”¨ï¼‰"><a href="#ç»„ä»¶ï¼ˆå¤åˆ¶ç²˜è´´å³å¯ç”¨ï¼‰" class="headerlink" title="ç»„ä»¶ï¼ˆå¤åˆ¶ç²˜è´´å³å¯ç”¨ï¼‰"></a>ç»„ä»¶ï¼ˆå¤åˆ¶ç²˜è´´å³å¯ç”¨ï¼‰</h3><span id="more"></span>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">:class</span>=<span class="string">&quot;&#123;&#x27;hidden&#x27;:hidden&#125;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;pagination-container&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-pagination</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">:background</span>=<span class="string">&quot;background&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">:current-page.sync</span>=<span class="string">&quot;currentPage&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">:page-size.sync</span>=<span class="string">&quot;pageSize&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">:layout</span>=<span class="string">&quot;layout&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">:page-sizes</span>=<span class="string">&quot;pageSizes&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">:total</span>=<span class="string">&quot;total&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">v-bind</span>=<span class="string">&quot;$attrs&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      @<span class="attr">size-change</span>=<span class="string">&quot;handleSizeChange&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      @<span class="attr">current-change</span>=<span class="string">&quot;handleCurrentChange&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    /&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> &#123; scrollTo &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/scroll-to&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&#x27;Pagination&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">props</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">total</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">required</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">type</span>: <span class="title class_">Number</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">page</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">type</span>: <span class="title class_">Number</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">default</span>: <span class="number">1</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">limit</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">type</span>: <span class="title class_">Number</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">default</span>: <span class="number">20</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">pageSizes</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">type</span>: <span class="title class_">Array</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">default</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">return</span> [<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">50</span>]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">layout</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">type</span>: <span class="title class_">String</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">default</span>: <span class="string">&#x27;total, sizes, prev, pager, next, jumper&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">background</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">type</span>: <span class="title class_">Boolean</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">default</span>: <span class="literal">true</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">autoScroll</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">type</span>: <span class="title class_">Boolean</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">default</span>: <span class="literal">true</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">hidden</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">type</span>: <span class="title class_">Boolean</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">default</span>: <span class="literal">false</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">computed</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">currentPage</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">get</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">page</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">set</span>(<span class="params">val</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">this</span>.$emit(<span class="string">&#x27;update:page&#x27;</span>, val)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">pageSize</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">get</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">limit</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">set</span>(<span class="params">val</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">this</span>.$emit(<span class="string">&#x27;update:limit&#x27;</span>, val)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">handleSizeChange</span>(<span class="params">val</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">this</span>.$emit(<span class="string">&#x27;pagination&#x27;</span>, &#123; <span class="attr">page</span>: <span class="variable language_">this</span>.<span class="property">currentPage</span>, <span class="attr">limit</span>: val &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">autoScroll</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">scrollTo</span>(<span class="number">0</span>, <span class="number">800</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">handleCurrentChange</span>(<span class="params">val</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">this</span>.$emit(<span class="string">&#x27;pagination&#x27;</span>, &#123; <span class="attr">page</span>: val, <span class="attr">limit</span>: <span class="variable language_">this</span>.<span class="property">pageSize</span> &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">autoScroll</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">scrollTo</span>(<span class="number">0</span>, <span class="number">800</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.pagination-container</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">background</span>: <span class="number">#fff</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">padding</span>: <span class="number">32px</span> <span class="number">16px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.pagination-container</span><span class="selector-class">.hidden</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">display</span>: none;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;pagination</span><br><span class="line">      v-show=<span class="string">&quot;total&gt;0&quot;</span></span><br><span class="line">      :total=<span class="string">&quot;total&quot;</span></span><br><span class="line">      :page.<span class="property">sync</span>=<span class="string">&quot;pageNum&quot;</span></span><br><span class="line">      :limit.<span class="property">sync</span>=<span class="string">&quot;pageSize&quot;</span></span><br><span class="line">      @pagination=<span class="string">&quot;getList&quot;</span></span><br><span class="line">    /&gt;</span><br><span class="line"><span class="title function_">getList</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="comment">//è¯·æ±‚æ•°æ®</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="éå¸¸å¥½ç”¨"><a href="#éå¸¸å¥½ç”¨" class="headerlink" title="éå¸¸å¥½ç”¨~~~"></a>éå¸¸å¥½ç”¨~~~</h2>]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>ElementUI</tag>
      </tags>
  </entry>
  <entry>
    <title>flvjsè§†é¢‘æµæ’­æ”¾ç»„ä»¶å°è£…(&amp;æ–­çº¿é‡è¿)</title>
    <url>/2023/03/06/Flvjs%E8%A7%86%E9%A2%91%E6%B5%81%E6%92%AD%E6%94%BE%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85-%E6%96%AD%E7%BA%BF%E9%87%8D%E8%BF%9E/</url>
    <content><![CDATA[<h5 id="æœ€è¿‘é¡¹ç›®ä¸­é‡åˆ°äº†è§†é¢‘æµæ’­æ”¾çš„ç›¸å…³ä¸šåŠ¡å¤„ç†ï¼Œå› ä¸ºåŒæ—¶æœ‰æ–­çº¿é‡è¿çš„éœ€æ±‚ï¼Œæ‰€ä»¥ä¸ºäº†å‡å°‘ä¸šåŠ¡é¡µé¢çš„ä»£ç é‡ï¼Œå¯¹ç»„ä»¶è¿›è¡Œå°è£…ä½¿ç”¨"><a href="#æœ€è¿‘é¡¹ç›®ä¸­é‡åˆ°äº†è§†é¢‘æµæ’­æ”¾çš„ç›¸å…³ä¸šåŠ¡å¤„ç†ï¼Œå› ä¸ºåŒæ—¶æœ‰æ–­çº¿é‡è¿çš„éœ€æ±‚ï¼Œæ‰€ä»¥ä¸ºäº†å‡å°‘ä¸šåŠ¡é¡µé¢çš„ä»£ç é‡ï¼Œå¯¹ç»„ä»¶è¿›è¡Œå°è£…ä½¿ç”¨" class="headerlink" title="æœ€è¿‘é¡¹ç›®ä¸­é‡åˆ°äº†è§†é¢‘æµæ’­æ”¾çš„ç›¸å…³ä¸šåŠ¡å¤„ç†ï¼Œå› ä¸ºåŒæ—¶æœ‰æ–­çº¿é‡è¿çš„éœ€æ±‚ï¼Œæ‰€ä»¥ä¸ºäº†å‡å°‘ä¸šåŠ¡é¡µé¢çš„ä»£ç é‡ï¼Œå¯¹ç»„ä»¶è¿›è¡Œå°è£…ä½¿ç”¨"></a>æœ€è¿‘é¡¹ç›®ä¸­é‡åˆ°äº†è§†é¢‘æµæ’­æ”¾çš„ç›¸å…³ä¸šåŠ¡å¤„ç†ï¼Œå› ä¸ºåŒæ—¶æœ‰æ–­çº¿é‡è¿çš„éœ€æ±‚ï¼Œæ‰€ä»¥ä¸ºäº†å‡å°‘ä¸šåŠ¡é¡µé¢çš„ä»£ç é‡ï¼Œå¯¹ç»„ä»¶è¿›è¡Œå°è£…ä½¿ç”¨</h5><hr>
<p><strong>é¡¹ç›®åŸºäº Vue æ¡†æ¶è¿›è¡Œå¼€å‘</strong></p>
<ul>
<li>ä¸Šä»£ç <span id="more"></span>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cameraVideo&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">video</span> <span class="attr">class</span>=<span class="string">&quot;videoControl&quot;</span> <span class="attr">muted</span> <span class="attr">ref</span>=<span class="string">&quot;myCameraVideoPlayer&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;cameraVideo&quot;</span>,</span><br><span class="line">  <span class="attr">props</span>: [<span class="string">&quot;videoData&quot;</span>,<span class="string">&#x27;autoPlay&#x27;</span>],</span><br><span class="line">  <span class="attr">watch</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">loadVideo</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;data alive&quot;</span>, <span class="variable language_">this</span>.<span class="property">videoData</span>);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">player</span> &amp;&amp; <span class="variable language_">this</span>.<span class="title function_">destroy</span>();</span><br><span class="line">			<span class="comment">// props ä¸­çš„ videoData ä¸ºè§†é¢‘æµurl</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">player</span> = flvjs.<span class="title function_">createPlayer</span>(&#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;flv&quot;</span>,</span><br><span class="line">        <span class="attr">isLive</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">url</span>: <span class="variable language_">this</span>.<span class="property">videoData</span>,</span><br><span class="line">        <span class="attr">hasAudio</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">hasVideo</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">cors</span>: <span class="literal">true</span>, <span class="comment">// æ˜¯å¦è·¨åŸŸ</span></span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">player</span>.<span class="title function_">attachMediaElement</span>(<span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">myCameraVideoPlayer</span>);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">player</span>.<span class="title function_">load</span>();</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">bindEvents</span>();</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">startVideo</span>();</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">bindEvents</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">//è§†é¢‘å‡ºé”™åé”€æ¯é‡æ–°åˆ›å»º</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(flvjs);</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">player</span>.<span class="title function_">on</span>(flvjs.<span class="property">Events</span>.<span class="property">ERROR</span>, <span class="variable language_">this</span>.<span class="property">handleErr</span>);</span><br><span class="line">      <span class="comment">// this.player.on(&quot;loading_complete&quot;, this.handleErr);</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">player</span>.<span class="title function_">on</span>(flvjs.<span class="property">Events</span>.<span class="property">LOADING_COMPLETE</span>, <span class="variable language_">this</span>.<span class="property">handleErr</span>);</span><br><span class="line">      <span class="comment">// this.player.on(flvjs.Events.RECOVERED_EARLY_EOF, this.handleErr);</span></span><br><span class="line">      <span class="comment">// this.player.on(&quot;media_info&quot;, this.destroy);</span></span><br><span class="line">      <span class="comment">// this.player.on(&quot;metadata_arrived&quot;, this.destroy);</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">handleErr</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">// console.log(&quot;errorType:&quot;, errorType);</span></span><br><span class="line">      <span class="comment">// console.log(&quot;errorDetail:&quot;, errorDetail);</span></span><br><span class="line">      <span class="comment">// console.log(&quot;errorInfo:&quot;, errorInfo);</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">player</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">player</span>.<span class="title function_">pause</span>();</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">player</span>.<span class="title function_">unload</span>();</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">player</span>.<span class="title function_">detachMediaElement</span>();</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">player</span>.<span class="title function_">destroy</span>();</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">player</span> = <span class="literal">null</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">loadVideo</span>();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">startVideo</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">player</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">player</span>.<span class="title function_">play</span>();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">pause</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">player</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">player</span>.<span class="title function_">pause</span>();</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">destroy</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">player</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">player</span>.<span class="title function_">pause</span>();</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">player</span>.<span class="title function_">unload</span>();</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">player</span>.<span class="title function_">detachMediaElement</span>();</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">player</span>.<span class="title function_">destroy</span>();</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">player</span> = <span class="literal">null</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">supported</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">player</span>: <span class="literal">null</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// console.log(this.videoData, 2);\</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">player</span> = <span class="literal">null</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">supported</span> = flvjs.<span class="title function_">isSupported</span>();</span><br><span class="line">		<span class="comment">// å› ä¸ºä¸šåŠ¡éœ€æ±‚ï¼Œå°è£…æ—¶autoPlay çš„å«ä¹‰ä¸ºï¼štrue å¼•ç”¨ç»„ä»¶äº†å³åˆ»åŠ è½½è§†é¢‘ï¼› false åˆ™å¯ä»¥åç»­refsä½¿ç”¨å­ç»„ä»¶æ–¹æ³•loadåŠ è½½æ’­æ”¾è§†é¢‘</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">autoPlay</span>)&#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">loadVideo</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">beforeDestroy</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;beforeDestroy&quot;</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">destroy</span>();</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line"><span class="selector-class">.cameraVideo</span>&#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="selector-class">.videoControl</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>è§†é¢‘æ’­æ”¾</tag>
        <tag>Flvjs</tag>
      </tags>
  </entry>
  <entry>
    <title>el-table-columnæ•°æ®è¿‡é•¿å¤šè¡Œçœç•¥å¤„ç†</title>
    <url>/2022/12/29/ElementUI-el-table-column%E6%95%B0%E6%8D%AE%E8%BF%87%E9%95%BF%E5%A4%9A%E8%A1%8C%E7%9C%81%E7%95%A5%E5%A4%84%E7%90%86/</url>
    <content><![CDATA[<h3 id="åœºæ™¯ï¼šåœ¨ä½¿ç”¨-el-table-æ—¶ä¼šé‡åˆ°è¡¨æ ¼æŸè¡Œæ•°æ®è¿‡é•¿çš„æƒ…å†µ"><a href="#åœºæ™¯ï¼šåœ¨ä½¿ç”¨-el-table-æ—¶ä¼šé‡åˆ°è¡¨æ ¼æŸè¡Œæ•°æ®è¿‡é•¿çš„æƒ…å†µ" class="headerlink" title="åœºæ™¯ï¼šåœ¨ä½¿ç”¨ el-table æ—¶ä¼šé‡åˆ°è¡¨æ ¼æŸè¡Œæ•°æ®è¿‡é•¿çš„æƒ…å†µ"></a>åœºæ™¯ï¼šåœ¨ä½¿ç”¨ el-table æ—¶ä¼šé‡åˆ°è¡¨æ ¼æŸè¡Œæ•°æ®è¿‡é•¿çš„æƒ…å†µ</h3><ul>
<li>ä¸€èˆ¬çš„å¤„ç†æ–¹å¼æ˜¯ç›´æ¥ä½¿ç”¨ el-table-column çš„ show-overflow-tooltip æ¥çœç•¥è¿‡é•¿çš„å†…å®¹</li>
<li>è¿˜æœ‰ä¸€ç§æ˜¯ç‰¹æ®Šéœ€æ±‚ï¼šéœ€è¦ <strong>å¤šè¡Œå±•ç¤ºå</strong> å†è¿›è¡Œçœç•¥æ˜¾ç¤ºã€‚ ä»¥ä¸‹æ˜¯å¤„ç†æ–¹å¼ï¼š<span id="more"></span><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;el-table-column</span><br><span class="line">	property=<span class="string">&quot;Date&quot;</span></span><br><span class="line">	label=<span class="string">&quot;Date&quot;</span>&gt;</span><br><span class="line">	<span class="comment">// è¿™é‡Œ template çš„ä½œç”¨æ˜¯ æ¨¡æ‹Ÿ tooltip çš„ä½œç”¨</span></span><br><span class="line">	<span class="language-xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">v-slot</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">		<span class="tag">&lt;<span class="name">div</span> <span class="attr">:title</span>=<span class="string">&quot;scope.row.Date&quot;</span> <span class="attr">v-html</span>=<span class="string">&quot;scope.row.Date&quot;</span> <span class="attr">class</span>=<span class="string">&quot;title-tips&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">	<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line">&lt;/el-table-column&gt;</span><br></pre></td></tr></table></figure>
  <figure class="highlight css"><table><tr><td class="code"><pre><span class="line">/deep/ <span class="selector-class">.el-table</span> <span class="selector-class">.cell</span> &#123;</span><br><span class="line">	<span class="attribute">word-break</span>: break-word ; // é¿å…ä¸€ä¸ªå•è¯è¢«æ¢è¡Œæ–­å¼€ä¸ºä¸¤éƒ¨åˆ†</span><br><span class="line">	<span class="attribute">overflow</span>:hidden;</span><br><span class="line">	<span class="attribute">text-overflow</span>:ellipsis;</span><br><span class="line">	<span class="attribute">display</span>:-webkit-box;</span><br><span class="line">	-webkit-box-orient:vertical;</span><br><span class="line">	-webkit-line-clamp:<span class="number">2</span>; // æ­¤å¤„æ˜¯<span class="number">2</span>è¡Œçš„æœ«å°¾å†çœç•¥å±•ç¤ºï¼Œ æƒ³è¦å‡ è¡Œåå†çœç•¥å±•ç¤º å°±å†™å‡ </span><br><span class="line">	<span class="attribute">max-height</span>: <span class="number">48px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>ElementUI</tag>
      </tags>
  </entry>
  <entry>
    <title>Jsonä¸²ä¸­keyå€¼æ”¹ä¸ºæŒ‡å®šå­—ç¬¦ä¸²</title>
    <url>/2022/04/12/Json%E4%B8%B2%E4%B8%ADkey%E5%80%BC%E6%94%B9%E4%B8%BA%E6%8C%87%E5%AE%9A%E5%AD%97%E7%AC%A6%E4%B8%B2/</url>
    <content><![CDATA[<h5 id="JSONä¸²ä¸­keyå€¼æ”¹ä¸ºæŒ‡å®šå­—ç¬¦ä¸²"><a href="#JSONä¸²ä¸­keyå€¼æ”¹ä¸ºæŒ‡å®šå­—ç¬¦ä¸²" class="headerlink" title="JSONä¸²ä¸­keyå€¼æ”¹ä¸ºæŒ‡å®šå­—ç¬¦ä¸²"></a>JSONä¸²ä¸­keyå€¼æ”¹ä¸ºæŒ‡å®šå­—ç¬¦ä¸²</h5><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">objDemo[newKey] = <span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>ç­‰åŒäºğŸ‘‡</p>
<span id="more"></span>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="attr">objDemo</span>:&#123;</span><br><span class="line">  <span class="attr">newKey</span>: <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
      </tags>
  </entry>
  <entry>
    <title>Jså®ç°ç½‘é¡µæ—¶é’Ÿï¼ˆå¤‡ç”¨ï¼‰</title>
    <url>/2022/04/18/Js%E5%AE%9E%E7%8E%B0%E7%BD%91%E9%A1%B5%E6%97%B6%E9%92%9F%EF%BC%88%E5%A4%87%E7%94%A8%EF%BC%89/</url>
    <content><![CDATA[<h6 id="jså®šæ—¶å™¨å®ç°ä¸€ä¸ªç½‘é¡µæ—¶é’Ÿï¼Œç›´æ¥è´´ä»£ç ï¼ˆVueæ¡†æ¶ç¯å¢ƒï¼‰"><a href="#jså®šæ—¶å™¨å®ç°ä¸€ä¸ªç½‘é¡µæ—¶é’Ÿï¼Œç›´æ¥è´´ä»£ç ï¼ˆVueæ¡†æ¶ç¯å¢ƒï¼‰" class="headerlink" title="jså®šæ—¶å™¨å®ç°ä¸€ä¸ªç½‘é¡µæ—¶é’Ÿï¼Œç›´æ¥è´´ä»£ç ï¼ˆVueæ¡†æ¶ç¯å¢ƒï¼‰"></a>jså®šæ—¶å™¨å®ç°ä¸€ä¸ªç½‘é¡µæ—¶é’Ÿï¼Œç›´æ¥è´´ä»£ç ï¼ˆVueæ¡†æ¶ç¯å¢ƒï¼‰</h6><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;he-sjzt&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;he-xs&quot;</span>&gt;</span>&#123;&#123; dateTime &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;he-nyr&quot;</span>&gt;</span>&#123;&#123; yearTime &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<span id="more"></span>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">dateTime</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">      <span class="attr">yearTime</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">time</span>();</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">time</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">// è·å–å½“å‰æ—¶é—´</span></span><br><span class="line">      <span class="variable language_">window</span>.<span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> yy = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getFullYear</span>();</span><br><span class="line">        <span class="keyword">const</span> mm =</span><br><span class="line">          <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getMonth</span>() + <span class="number">1</span> &lt; <span class="number">10</span></span><br><span class="line">            ? <span class="string">&quot;0&quot;</span> + (<span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getMonth</span>() + <span class="number">1</span>)</span><br><span class="line">            : <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getMonth</span>() + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">const</span> dd =</span><br><span class="line">          <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getDate</span>() &lt; <span class="number">10</span></span><br><span class="line">            ? <span class="string">&quot;0&quot;</span> + <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getDate</span>()</span><br><span class="line">            : <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getDate</span>();</span><br><span class="line">        <span class="keyword">const</span> hh = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getHours</span>();</span><br><span class="line">        <span class="keyword">const</span> mf =</span><br><span class="line">          <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getMinutes</span>() &lt; <span class="number">10</span></span><br><span class="line">            ? <span class="string">&quot;0&quot;</span> + <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getMinutes</span>()</span><br><span class="line">            : <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getMinutes</span>();</span><br><span class="line">        <span class="keyword">const</span> ss =</span><br><span class="line">          <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getSeconds</span>() &lt; <span class="number">10</span></span><br><span class="line">            ? <span class="string">&quot;0&quot;</span> + <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getSeconds</span>()</span><br><span class="line">            : <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getSeconds</span>();</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">yearTime</span> = yy + <span class="string">&quot;-&quot;</span> + mm + <span class="string">&quot;-&quot;</span> + dd;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">dateTime</span> = hh + <span class="string">&quot;:&quot;</span> + mf + <span class="string">&quot;:&quot;</span> + ss;</span><br><span class="line">      &#125;, <span class="number">1000</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;style scoped&gt;</span><br><span class="line"><span class="selector-class">.he-sjzt</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">17px</span>;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.he-xs</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">22px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">400</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.he-nyr</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: <span class="number">400</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>Javascript</tag>
      </tags>
  </entry>
  <entry>
    <title>Jså¼‚æ­¥æ”¹åŒæ­¥ï¼ˆæŒ‰é¡ºåºæ‰§è¡Œï¼‰</title>
    <url>/2022/04/13/Js%E5%BC%82%E6%AD%A5%E6%94%B9%E5%90%8C%E6%AD%A5%EF%BC%88%E6%8C%89%E9%A1%BA%E5%BA%8F%E6%89%A7%E8%A1%8C%EF%BC%89/</url>
    <content><![CDATA[<h5 id="ä½¿ç”¨-asycn-x2F-await"><a href="#ä½¿ç”¨-asycn-x2F-await" class="headerlink" title="ä½¿ç”¨ asycn &#x2F; await"></a>ä½¿ç”¨ asycn &#x2F; await</h5><h5 id="ä½¿ç”¨åœºæ™¯ï¼šå½“æœ‰è€—æ—¶æ–¹æ³•æ‰§è¡Œï¼Œæƒ³è®©å¦ä¸€æ®µä»£ç åœ¨è¿™æ®µè€—æ—¶ä»£ç ä¹‹åæ‰§è¡Œæ—¶"><a href="#ä½¿ç”¨åœºæ™¯ï¼šå½“æœ‰è€—æ—¶æ–¹æ³•æ‰§è¡Œï¼Œæƒ³è®©å¦ä¸€æ®µä»£ç åœ¨è¿™æ®µè€—æ—¶ä»£ç ä¹‹åæ‰§è¡Œæ—¶" class="headerlink" title="ä½¿ç”¨åœºæ™¯ï¼šå½“æœ‰è€—æ—¶æ–¹æ³•æ‰§è¡Œï¼Œæƒ³è®©å¦ä¸€æ®µä»£ç åœ¨è¿™æ®µè€—æ—¶ä»£ç ä¹‹åæ‰§è¡Œæ—¶"></a>ä½¿ç”¨åœºæ™¯ï¼šå½“æœ‰è€—æ—¶æ–¹æ³•æ‰§è¡Œï¼Œæƒ³è®©å¦ä¸€æ®µä»£ç åœ¨è¿™æ®µè€—æ—¶ä»£ç ä¹‹åæ‰§è¡Œæ—¶</h5><span id="more"></span>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">val flag = <span class="string">&#x27;before&#x27;</span></span><br><span class="line">val slowFun = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123; <span class="comment">// è¿”å›ä¸€ä¸ª promise å¯¹è±¡</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">      flag = <span class="string">&#x27;changed&#x27;</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;slowFun done&#x27;</span>)</span><br><span class="line">      <span class="title function_">resolve</span>() <span class="comment">// æ ‡å¿—æ­¤æ–¹æ³•å®Œæˆ</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;, <span class="number">2000</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">doAll</span>(<span class="params"></span>)&#123; <span class="comment">// async å…³é”®å­—æŒ‡æ˜æ˜¯ä¸€ä¸ªåŒæ­¥æ–¹æ³•</span></span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">slowFun</span>() <span class="comment">// await å³ç­‰å¾…slowFunæ‰§è¡Œå®Œæˆ</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(flag)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;have waited slowFun for 2s&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">doAll</span>() <span class="comment">// æ‰§è¡Œæµ‹è¯•</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>å¼‚æ­¥åŒæ­¥</tag>
      </tags>
  </entry>
  <entry>
    <title>Jsç®€å†™ä¼˜åŒ–ä¹‹è·¯</title>
    <url>/2022/04/12/Js%E7%AE%80%E5%86%99%E4%BC%98%E5%8C%96%E4%B9%8B%E8%B7%AF/</url>
    <content><![CDATA[<h5 id="å¦‚æœåŒä¸€å˜é‡æœ‰å¤šä¸ªæ¡ä»¶"><a href="#å¦‚æœåŒä¸€å˜é‡æœ‰å¤šä¸ªæ¡ä»¶" class="headerlink" title="å¦‚æœåŒä¸€å˜é‡æœ‰å¤šä¸ªæ¡ä»¶"></a>å¦‚æœåŒä¸€å˜é‡æœ‰å¤šä¸ªæ¡ä»¶</h5><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(a == <span class="number">1</span> || b == <span class="number">2</span> || c == <span class="number">3</span>)&#123;</span><br><span class="line">  <span class="comment">// do something</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ğŸ‘‡shorterğŸ‘‡</p>
<span id="more"></span>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].<span class="title function_">includes</span>(a))&#123;</span><br><span class="line">  <span class="comment">// do something</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="ç®€å•-if-åˆ¤æ–­ä½¿ç”¨ä¸‰å…ƒè¡¨è¾¾å¼ä»£æ›¿"><a href="#ç®€å•-if-åˆ¤æ–­ä½¿ç”¨ä¸‰å…ƒè¡¨è¾¾å¼ä»£æ›¿" class="headerlink" title="ç®€å• if åˆ¤æ–­ä½¿ç”¨ä¸‰å…ƒè¡¨è¾¾å¼ä»£æ›¿"></a>ç®€å• if åˆ¤æ–­ä½¿ç”¨ä¸‰å…ƒè¡¨è¾¾å¼ä»£æ›¿</h5><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> bool</span><br><span class="line"><span class="keyword">if</span>(a == <span class="number">1</span>)&#123;</span><br><span class="line">  bool = <span class="literal">true</span></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">  bool = <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ğŸ‘‡shorterğŸ‘‡</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> bool = a == <span class="number">1</span> ? <span class="literal">true</span> : <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<h5 id="æ˜¯å¦ä¸ºç©ºæ£€æŸ¥-ç®€å†™"><a href="#æ˜¯å¦ä¸ºç©ºæ£€æŸ¥-ç®€å†™" class="headerlink" title="æ˜¯å¦ä¸ºç©ºæ£€æŸ¥ ç®€å†™"></a>æ˜¯å¦ä¸ºç©ºæ£€æŸ¥ ç®€å†™</h5><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a</span><br><span class="line"><span class="keyword">if</span>(a != <span class="string">&#x27;&#x27;</span> &amp;&amp; a != <span class="literal">null</span> &amp;&amp; a != <span class="literal">undefined</span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;do some&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ğŸ‘‡shorterğŸ‘‡</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a</span><br><span class="line">a &amp;&amp; <span class="title function_">dosome</span>()</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">dosome</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;do some&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="æ£€æŸ¥æŸå˜é‡æ˜¯å¦æœ‰å€¼ï¼Œè‹¥æ— åˆ™è®¾é»˜è®¤å€¼"><a href="#æ£€æŸ¥æŸå˜é‡æ˜¯å¦æœ‰å€¼ï¼Œè‹¥æ— åˆ™è®¾é»˜è®¤å€¼" class="headerlink" title="æ£€æŸ¥æŸå˜é‡æ˜¯å¦æœ‰å€¼ï¼Œè‹¥æ— åˆ™è®¾é»˜è®¤å€¼"></a>æ£€æŸ¥æŸå˜é‡æ˜¯å¦æœ‰å€¼ï¼Œè‹¥æ— åˆ™è®¾é»˜è®¤å€¼</h5><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a</span><br><span class="line"><span class="keyword">if</span>(a == <span class="literal">null</span> || a == <span class="literal">undefined</span> || a == <span class="string">&#x27;&#x27;</span>)&#123;</span><br><span class="line">  <span class="keyword">var</span> b = <span class="string">&#x27;default&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ğŸ‘‡shorterğŸ‘‡</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> b = a || <span class="string">&#x27;default&#x27;</span></span><br></pre></td></tr></table></figure>

<h5 id="å¸¸ç”¨-array-find-ä½¿ç”¨åœºæ™¯-æœ‰ä¸€ä¸ªå¯¹è±¡æ•°ç»„å¹¶ä¸”æˆ‘ä»¬æƒ³è¦æ ¹æ®å¯¹è±¡å±æ€§æŸ¥æ‰¾ç‰¹å®šå¯¹è±¡æ—¶-åªè¿”å›ç¬¦åˆæ¡ä»¶çš„ç¬¬ä¸€ä¸ª"><a href="#å¸¸ç”¨-array-find-ä½¿ç”¨åœºæ™¯-æœ‰ä¸€ä¸ªå¯¹è±¡æ•°ç»„å¹¶ä¸”æˆ‘ä»¬æƒ³è¦æ ¹æ®å¯¹è±¡å±æ€§æŸ¥æ‰¾ç‰¹å®šå¯¹è±¡æ—¶-åªè¿”å›ç¬¦åˆæ¡ä»¶çš„ç¬¬ä¸€ä¸ª" class="headerlink" title="(å¸¸ç”¨) array.find() ä½¿ç”¨åœºæ™¯ æœ‰ä¸€ä¸ªå¯¹è±¡æ•°ç»„å¹¶ä¸”æˆ‘ä»¬æƒ³è¦æ ¹æ®å¯¹è±¡å±æ€§æŸ¥æ‰¾ç‰¹å®šå¯¹è±¡æ—¶(åªè¿”å›ç¬¦åˆæ¡ä»¶çš„ç¬¬ä¸€ä¸ª)"></a>(å¸¸ç”¨) array.find() ä½¿ç”¨åœºæ™¯ æœ‰ä¸€ä¸ªå¯¹è±¡æ•°ç»„å¹¶ä¸”æˆ‘ä»¬æƒ³è¦æ ¹æ®å¯¹è±¡å±æ€§æŸ¥æ‰¾ç‰¹å®šå¯¹è±¡æ—¶(åªè¿”å›ç¬¦åˆæ¡ä»¶çš„ç¬¬ä¸€ä¸ª)</h5><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> data = []</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">findFromArr</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; data.<span class="property">length</span>; ++i) &#123;</span><br><span class="line">    <span class="keyword">if</span> (data[i].<span class="property">type</span> === <span class="string">&quot;test1&quot;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> data[i];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ğŸ‘‡shorterğŸ‘‡</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> data = []</span><br><span class="line">findSingle = data.<span class="title function_">find</span>(</span><br><span class="line">  <span class="function">(<span class="params">data</span>) =&gt;</span> data.<span class="property">type</span> === <span class="string">&quot;test1&quot;</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¾…ç»­ã€‚ã€‚ã€‚</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>è¯­æ³•ä¼˜åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title>NodeJsæ¢é•œåƒæº</title>
    <url>/2022/04/11/NodeJs%E6%8D%A2%E9%95%9C%E5%83%8F%E6%BA%90/</url>
    <content><![CDATA[<h3 id="nodejs-æ¢æº"><a href="#nodejs-æ¢æº" class="headerlink" title="nodejs æ¢æº"></a>nodejs æ¢æº</h3><p>getå‘½ä»¤æŸ¥çœ‹registry</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">npm config get registry</span><br></pre></td></tr></table></figure>

<p>nodejsåŸç‰ˆregistryä¸º</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="attr">http</span>:<span class="comment">//registry.npmjs.org</span></span><br></pre></td></tr></table></figure>
<span id="more"></span>
<p>ç”¨setæ¢ä¸ºæ·˜å®é•œåƒï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">npm config set registry <span class="attr">http</span>:<span class="comment">//registry.npm.taobao.org</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>NodeJs</tag>
      </tags>
  </entry>
  <entry>
    <title>Vueä¸­clearIntervalå¤±æ•ˆé—®é¢˜</title>
    <url>/2022/04/18/Vue%E4%B8%ADclearInterval%E5%A4%B1%E6%95%88%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<h5 id="ä½¿ç”¨åœºæ™¯ï¼šåœ¨å½“å‰é¡µé¢ä½¿ç”¨çš„å®šæ—¶å™¨ï¼Œç¦»å¼€å½“å‰é¡µé¢éœ€è¦é”€æ¯-ä»¥é¿å…ä¸å¿…è¦çš„æ€§èƒ½æµªè´¹"><a href="#ä½¿ç”¨åœºæ™¯ï¼šåœ¨å½“å‰é¡µé¢ä½¿ç”¨çš„å®šæ—¶å™¨ï¼Œç¦»å¼€å½“å‰é¡µé¢éœ€è¦é”€æ¯-ä»¥é¿å…ä¸å¿…è¦çš„æ€§èƒ½æµªè´¹" class="headerlink" title="ä½¿ç”¨åœºæ™¯ï¼šåœ¨å½“å‰é¡µé¢ä½¿ç”¨çš„å®šæ—¶å™¨ï¼Œç¦»å¼€å½“å‰é¡µé¢éœ€è¦é”€æ¯ ä»¥é¿å…ä¸å¿…è¦çš„æ€§èƒ½æµªè´¹"></a>ä½¿ç”¨åœºæ™¯ï¼šåœ¨å½“å‰é¡µé¢ä½¿ç”¨çš„å®šæ—¶å™¨ï¼Œç¦»å¼€å½“å‰é¡µé¢éœ€è¦é”€æ¯ ä»¥é¿å…ä¸å¿…è¦çš„æ€§èƒ½æµªè´¹</h5><h5 id="é¦–å…ˆæ˜¯setIntervalå’ŒclearIntervalçš„åŸºæœ¬ç”¨æ³•"><a href="#é¦–å…ˆæ˜¯setIntervalå’ŒclearIntervalçš„åŸºæœ¬ç”¨æ³•" class="headerlink" title="é¦–å…ˆæ˜¯setIntervalå’ŒclearIntervalçš„åŸºæœ¬ç”¨æ³•"></a>é¦–å…ˆæ˜¯<strong>setInterval</strong>å’Œ<strong>clearInterval</strong>çš„åŸºæœ¬ç”¨æ³•</h5><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> myTimer = <span class="built_in">setInterval</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123; <span class="comment">// æ¯ 1s è°ƒç”¨ä¸€æ¬¡</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;do once...&#x27;</span>)</span><br><span class="line">&#125;, <span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line"><span class="title function_">beforeDestroy</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="built_in">clearInterval</span>(myTimer) <span class="comment">// æ¸…é™¤å®šæ—¶å™¨ myTimer</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<h5 id="åœ¨-Vue-ä¸­ï¼Œæœ‰æ—¶ä¼šå‘ç°-clearInterval-æ‰§è¡Œåå®šæ—¶å™¨å¹¶æ²¡æœ‰è¢«æ¸…é™¤ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢æ–¹æ³•è¯•è¯•"><a href="#åœ¨-Vue-ä¸­ï¼Œæœ‰æ—¶ä¼šå‘ç°-clearInterval-æ‰§è¡Œåå®šæ—¶å™¨å¹¶æ²¡æœ‰è¢«æ¸…é™¤ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢æ–¹æ³•è¯•è¯•" class="headerlink" title="åœ¨ Vue ä¸­ï¼Œæœ‰æ—¶ä¼šå‘ç° clearInterval æ‰§è¡Œåå®šæ—¶å™¨å¹¶æ²¡æœ‰è¢«æ¸…é™¤ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢æ–¹æ³•è¯•è¯•"></a>åœ¨ Vue ä¸­ï¼Œæœ‰æ—¶ä¼šå‘ç° clearInterval æ‰§è¡Œåå®šæ—¶å™¨å¹¶æ²¡æœ‰è¢«æ¸…é™¤ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢æ–¹æ³•è¯•è¯•</h5><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> myTimer = <span class="built_in">setInterval</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="comment">// do someting...</span></span><br><span class="line">&#125;, <span class="number">1000</span>)</span><br><span class="line"><span class="variable language_">this</span>.$once(<span class="string">&#x27;hook:beforeDestroy&#x27;</span>,<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">clearInterval</span>(myTimer)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h5 id="ä¿®æ”¹ä¸ºä¸Šé¢çš„æ–¹æ³•ä¹‹å-clearInterval-å°±ç”Ÿæ•ˆäº†ï¼Œå…·ä½“åŸå› ä¸æ˜"><a href="#ä¿®æ”¹ä¸ºä¸Šé¢çš„æ–¹æ³•ä¹‹å-clearInterval-å°±ç”Ÿæ•ˆäº†ï¼Œå…·ä½“åŸå› ä¸æ˜" class="headerlink" title="ä¿®æ”¹ä¸ºä¸Šé¢çš„æ–¹æ³•ä¹‹å clearInterval å°±ç”Ÿæ•ˆäº†ï¼Œå…·ä½“åŸå› ä¸æ˜"></a>ä¿®æ”¹ä¸ºä¸Šé¢çš„æ–¹æ³•ä¹‹å clearInterval å°±ç”Ÿæ•ˆäº†ï¼Œå…·ä½“åŸå› ä¸æ˜</h5><p>$once ç›¸å…³ç”¨æ³•å‚è€ƒ <a href="https://cn.vuejs.org/v2/api/#vm-once">Vue api å®ä¾‹æ–¹æ³•&#x2F;äº‹ä»¶</a></p>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>Javascript</tag>
      </tags>
  </entry>
  <entry>
    <title>antVL7å¯è§†åŒ–å¼€å‘é—®é¢˜</title>
    <url>/2022/06/02/antVL7%E5%8F%AF%E8%A7%86%E5%8C%96%E5%BC%80%E5%8F%91%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<h5 id="å‰ä¸€é˜µå­åœ¨ä½¿ç”¨antVL7è¿›è¡Œåœ°å›¾å¯è§†åŒ–å¼€å‘æ—¶é‡åˆ°ä¸€äº›é—®é¢˜ï¼Œè¿™é‡Œæ€»ç»“è®°å½•ä¸€ä¸‹"><a href="#å‰ä¸€é˜µå­åœ¨ä½¿ç”¨antVL7è¿›è¡Œåœ°å›¾å¯è§†åŒ–å¼€å‘æ—¶é‡åˆ°ä¸€äº›é—®é¢˜ï¼Œè¿™é‡Œæ€»ç»“è®°å½•ä¸€ä¸‹" class="headerlink" title="å‰ä¸€é˜µå­åœ¨ä½¿ç”¨antVL7è¿›è¡Œåœ°å›¾å¯è§†åŒ–å¼€å‘æ—¶é‡åˆ°ä¸€äº›é—®é¢˜ï¼Œè¿™é‡Œæ€»ç»“è®°å½•ä¸€ä¸‹"></a>å‰ä¸€é˜µå­åœ¨ä½¿ç”¨antVL7è¿›è¡Œåœ°å›¾å¯è§†åŒ–å¼€å‘æ—¶é‡åˆ°ä¸€äº›é—®é¢˜ï¼Œè¿™é‡Œæ€»ç»“è®°å½•ä¸€ä¸‹</h5><h6 id="ç»å…¸çƒ­åŠ›å›¾å±•ç¤ºé—®é¢˜"><a href="#ç»å…¸çƒ­åŠ›å›¾å±•ç¤ºé—®é¢˜" class="headerlink" title="ç»å…¸çƒ­åŠ›å›¾å±•ç¤ºé—®é¢˜"></a>ç»å…¸çƒ­åŠ›å›¾å±•ç¤ºé—®é¢˜</h6><blockquote>
<p>é¦–å…ˆæ˜¯åŸºæœ¬ç”¨æ³•</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> myHeatmapLayer = <span class="keyword">new</span> <span class="title class_">HeatmapLayer</span>()</span><br><span class="line">  .<span class="title function_">source</span>(data)</span><br><span class="line">  .<span class="title function_">shape</span>(<span class="string">&#x27;heatmap&#x27;</span>)</span><br><span class="line">  .<span class="title function_">size</span>(<span class="string">&#x27;demonum&#x27;</span>, [<span class="number">0</span>, <span class="number">1.0</span>])</span><br><span class="line">  .<span class="title function_">style</span>(&#123;</span><br><span class="line">    <span class="comment">// å…·ä½“è‰²å¸¦ï¼Œçƒ­åŠ›å›¾æœ€å°åŠå¾„ç­‰é…ç½®ï¼Œå¯ä»¥è‡ªè¡Œå»å®˜ç½‘æŸ¥çœ‹</span></span><br><span class="line">    ......</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä»£ç  data æ˜¯ä¸€ä¸ªç”±å¤šä¸ª feature ç‚¹æ„æˆçš„ geojson æ ¼å¼æ•°æ®ï¼›<br>å…¶ä¸­ demonum æ˜¯ä¸Šè¿°æ•°æ®ä¸­ feature å±æ€§å³ <code>feature.properties.demonum</code> å­—æ®µå¤§å°ï¼ˆå¿…é¡»ä¸ºæ•°å­—ç±»å‹ï¼Œå¯ä»¥éå†ä½¿ç”¨<code>Number()</code>æ“ä½œï¼‰<br>ç”±äºæœ‰å¤šä¸ª feature, æ‰€ä»¥çƒ­åŠ›å›¾ å°†æ ¹æ®æ¯ä¸ª feature ä¸­çš„ demonum å­—æ®µå¤§å°ä½œä¸ºçƒ­åŠ›å€¼è¿›è¡Œç»˜åˆ¶ <span id="more"></span></p>
<p>è¿™é‡Œæœ‰ä¸ªå‘ï¼Œå¦‚æœæ¯ä¸ª feature ä¸­çš„ demonum éƒ½ä¸º 0ï¼Œè¿™æ—¶æ¯ä¸ªç‚¹çƒ­åŠ›å€¼éƒ½ä¼šæŒ‰ç…§æœ€å¤§å€¼è¿›è¡Œå¤„ç†ï¼Œå³ <strong>æ˜æ˜æ¯ä¸ªç‚¹çš„çƒ­åŠ›å€¼éƒ½ä¸º 0 ï¼Œçƒ­åŠ›å›¾å´æŒ‰æœ€å¤§å€¼è¿›è¡Œç»˜åˆ¶äº†</strong>ï¼Œè¿™åº”è¯¥ç®—æ˜¯ä¸€ä¸ª bugï¼Œä¸çŸ¥é“åç»­å®˜ç½‘ä¼šä¸ä¼šå¤„ç†ã€‚</p>
<p>é¿å…æ–¹æ³•ï¼šå¯ä»¥è‡ªè¡Œéå†åˆ¤æ–­æ¯ä¸ªç‚¹æ•°æ®çš„ demonum å±æ€§ï¼Œå¦‚æœå…¨éƒ¨ä¸º 0 åˆ™ä¸è¿›è¡Œçƒ­åŠ›å›¾çš„ç»˜åˆ¶ï¼Œæ­¤æ—¶å‰ç«¯å±•ç¤ºè¾ƒä¸ºåˆç†ã€‚</p>
</blockquote>
<h6 id="layerçš„é¼ æ ‡ç§»å…¥ç§»å‡ºäº‹ä»¶é¢‘ç¹å¼‚å¸¸è§¦å‘"><a href="#layerçš„é¼ æ ‡ç§»å…¥ç§»å‡ºäº‹ä»¶é¢‘ç¹å¼‚å¸¸è§¦å‘" class="headerlink" title="layerçš„é¼ æ ‡ç§»å…¥ç§»å‡ºäº‹ä»¶é¢‘ç¹å¼‚å¸¸è§¦å‘"></a>layerçš„é¼ æ ‡ç§»å…¥ç§»å‡ºäº‹ä»¶é¢‘ç¹å¼‚å¸¸è§¦å‘</h6><blockquote>
<p>å‡è®¾ç°åœ¨æœ‰ä¸€ä¸ªå›¾å±‚ myLayer ,éœ€æ±‚ä¸ºé¼ æ ‡ç§»å…¥å±•ç¤ºä¸€ä¸ª popup å¼¹çª—ï¼Œé¼ æ ‡ç§»å‡ºé”€æ¯æ­¤ popup<br>æ·»åŠ å–æ¶ˆäº‹ä»¶ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">myLayer.<span class="title function_">on</span>(<span class="string">&#x27;mouseenter&#x27;</span>,<span class="function"><span class="params">ev</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;mouseenter......&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">myLayer.<span class="title function_">on</span>(<span class="string">&#x27;mouseout&#x27;</span>,<span class="function"><span class="params">ev</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;mouseout......&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>ä»£ç çœ‹èµ·æ¥æ²¡æœ‰é—®é¢˜ï¼Œæˆ‘ä¹Ÿå»å®˜ç½‘æ‰¾åˆ°äº†é¼ æ ‡äº‹ä»¶çš„ç”¨æ³•ï¼Œè¿™é‡Œè´´ä¸Šï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">layer.<span class="title function_">on</span>(<span class="string">&#x27;mouseenter&#x27;</span>, <span class="function">(<span class="params">ev</span>) =&gt;</span> &#123;&#125;); <span class="comment">// é¼ æ ‡è¿›å…¥å›¾å±‚è¦ç´ </span></span><br><span class="line">layer.<span class="title function_">on</span>(<span class="string">&#x27;mousemove&#x27;</span>, <span class="function">(<span class="params">ev</span>) =&gt;</span> &#123;&#125;); <span class="comment">// é¼ æ ‡åœ¨å›¾å±‚ä¸Šç§»åŠ¨æ—¶è§¦å‘</span></span><br><span class="line">layer.<span class="title function_">on</span>(<span class="string">&#x27;mouseout&#x27;</span>, <span class="function">(<span class="params">ev</span>) =&gt;</span> &#123;&#125;); <span class="comment">// é¼ æ ‡ç§»å‡ºå›¾å±‚è¦ç´ æ—¶è§¦å‘</span></span><br></pre></td></tr></table></figure>

<p>æˆ‘è¿è¡Œäº†æˆ‘çš„ä»£ç ï¼Œå‘ç°é¼ æ ‡ç§»å…¥ myLayer å›¾å±‚æ—¶ï¼Œæ§åˆ¶å°æ‰“å°äº†å¤šæ¬¡<code>mouseenter......</code>å’Œ<code>mouseout......</code>ï¼Œæˆ‘æ˜æ˜åªç§»å…¥äº†ä¸€æ¬¡ï¼Œä¸çŸ¥é“ä¸ºä½•ä¼šè§¦å‘è¿™ä¹ˆå¤šæ¬¡äº‹ä»¶ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚<br>è¿™å°±é€ æˆäº†æˆ‘é¡µé¢ä¸­ popup å¼¹çª—é¢‘ç¹é—ªåŠ¨ã€‚ã€‚ã€‚</p>
<p>æœ€åï¼Œæˆ‘ä½¿ç”¨äº† <code>layer.on(&#39;mousemove&#39;)</code> æ–¹å¼å¤„ç† popup<br>è¿™ç§åšæ³•çš„å¥½å¤„æ˜¯ï¼šå¼¹çª—ä¸ä¼šé¢‘ç¹é—ªåŠ¨ï¼Œå› ä¸ºå®ƒåœ¨ä¸é—´æ–­åœ°é”€æ¯å’Œç”Ÿæˆï¼›<br>åå¤„æ˜¯ï¼šæ€§èƒ½æŸå¤±è¾ƒå¤§ï¼Œè€Œä¸”æ²¡æœ‰é¼ æ ‡ç§»å‡ºäº‹ä»¶ï¼Œéœ€è¦ç‚¹å‡»åœ°å›¾å¼¹çª—æ‰èƒ½æ¶ˆå¤±ã€‚<br>æˆ‘ç›®å‰çš„æ„Ÿè§‰æ˜¯ è¿™ä¹Ÿæ˜¯æ­¤å¯è§†åŒ–æ¡†æ¶çš„ä¸€ä¸ª bugï¼Œè¿˜åœ¨ç»§ç»­ç ”ç©¶ã€‚ã€‚ã€‚</p>
</blockquote>
<hr>
<h6 id="å¾…ç»­ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚"><a href="#å¾…ç»­ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚" class="headerlink" title="å¾…ç»­ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚"></a>å¾…ç»­ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</h6>]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>Javascript</tag>
        <tag>åœ°å›¾å¯è§†åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title>CesiumåŸºæœ¬åœ°å›¾ç»„ä»¶åˆ›å»º</title>
    <url>/2023/03/07/Cesium%E5%9F%BA%E6%9C%AC%E5%9C%B0%E5%9B%BE%E7%BB%84%E4%BB%B6%E5%88%9B%E5%BB%BA/</url>
    <content><![CDATA[<h5 id="æœ€è¿‘çš„é¡¹ç›®ä¸­ç”¨åˆ°äº†-CesiumJS-ï¼Œç›®å‰åŸºæœ¬ä½¿ç”¨çš„é—®é¢˜å¤§ä½“æ’æ¸…"><a href="#æœ€è¿‘çš„é¡¹ç›®ä¸­ç”¨åˆ°äº†-CesiumJS-ï¼Œç›®å‰åŸºæœ¬ä½¿ç”¨çš„é—®é¢˜å¤§ä½“æ’æ¸…" class="headerlink" title="æœ€è¿‘çš„é¡¹ç›®ä¸­ç”¨åˆ°äº† CesiumJS ï¼Œç›®å‰åŸºæœ¬ä½¿ç”¨çš„é—®é¢˜å¤§ä½“æ’æ¸…"></a>æœ€è¿‘çš„é¡¹ç›®ä¸­ç”¨åˆ°äº† CesiumJS ï¼Œç›®å‰åŸºæœ¬ä½¿ç”¨çš„é—®é¢˜å¤§ä½“æ’æ¸…</h5><ol>
<li><p>å®˜ç½‘ä¸‹è½½ <code>Cesium</code> æºç ç¨‹åºåŒ…ï¼Œè§£å‹</p>
</li>
<li><p>è§£å‹åçš„ç›®å½•ä¸­è¿›å…¥ <code>Build</code> æ–‡ä»¶å¤¹ï¼Œæ‰¾åˆ° <code>Cesium</code> æ–‡ä»¶å¤¹ï¼Œå¤åˆ¶ <code>Cesium</code> æ•´ä¸ªæ–‡ä»¶å¤¹åˆ°é¡¹ç›®çš„ <code>public</code> æ–‡ä»¶å¤¹ä¸‹</p>
</li>
<li><p>é¡¹ç›®æ ¹ç»„ä»¶ <code>index.html</code> ä¸­å¼•å…¥ <code>public</code> ä¸‹çš„ <code>Cesium</code> (ç›®å½•æ ¹æ®è‡ªå·±å®é™…æƒ…å†µæ”¹å†™)ï¼š</p>
<span id="more"></span>
  <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span> src=<span class="string">&quot;xxx/Cesium/Cesium.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;xxx/Cesium/Widgets/widgets.css&quot;</span>/&gt;</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p>æ­¤æ—¶é¡µé¢ä¸­å³å¯å¼•ç”¨ <code>Cesium</code> åº“åŠå…¶ <code>api</code> äº†</p>
</li>
<li><p>ä»¥ä¸‹æ˜¯åˆ›å»ºçš„åŸºæœ¬åœ°å›¾ç»„ä»¶ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ªå®¹å™¨ID ä¾›å„ä¸ªé¡µé¢è°ƒç”¨ï¼Œå¯æ»¡è¶³åŒæ—¶åˆ›å»ºå¤šä¸ªå®ä¾‹ï¼›<br/><br>çˆ¶ç»„ä»¶å¼•ç”¨è¿™ä¸ªç»„ä»¶æ—¶åªéœ€è¦åœ¨mountedé‡Œé¢ç»™åœ°å›¾å®¹å™¨ä¸€ä¸ª <code>ref</code> å€¼ï¼Œç„¶åè°ƒç”¨å­ç»„ä»¶çš„ <code>loadMap()</code> æ–¹æ³•ï¼š <code>this.$refs.cesiumMap.loadMap()</code><br/><br><strong>æ³¨æ„ï¼šå¦‚æœåœ¨çº¿ä½¿ç”¨éœ€è¦å¡«å…¥è‡ªå·±è´¦æˆ·çš„defaultAccessToken</strong></p>
</li>
</ol>
 <figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;track3D-container&quot;</span> <span class="attr">:id</span>=<span class="string">&quot;cId&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">let</span> viewer = <span class="literal">null</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line"> <span class="attr">name</span>: <span class="string">&#x27;cesiumMap&#x27;</span>,</span><br><span class="line"> <span class="attr">props</span>: [<span class="string">&#x27;cId&#x27;</span>],</span><br><span class="line"> <span class="attr">components</span>: &#123;&#125;,</span><br><span class="line"> <span class="attr">watch</span>: &#123;&#125;,</span><br><span class="line"> <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;&#125;</span><br><span class="line"> &#125;,</span><br><span class="line"> <span class="attr">computed</span>: &#123;&#125;,</span><br><span class="line"> <span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="title function_">loadMap</span>(<span class="params"></span>) &#123;</span><br><span class="line">     <span class="comment">// Cesium.Ion.defaultAccessToken = &#x27;&#x27;</span></span><br><span class="line">      viewer = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">Viewer</span>(<span class="variable language_">this</span>.<span class="property">cId</span>, &#123;</span><br><span class="line">       <span class="attr">animation</span>: <span class="literal">false</span>, <span class="comment">// éšè—åŠ¨ç”»æ§ä»¶</span></span><br><span class="line">       <span class="attr">baseLayerPicker</span>: <span class="literal">false</span>, <span class="comment">// éšè—å›¾å±‚é€‰æ‹©æ§ä»¶</span></span><br><span class="line">       <span class="attr">fullscreenButton</span>: <span class="literal">false</span>, <span class="comment">// éšè—å…¨å±æŒ‰é’®</span></span><br><span class="line">       <span class="attr">vrButton</span>: <span class="literal">false</span>, <span class="comment">// éšè—VRæŒ‰é’®ï¼Œé»˜è®¤false</span></span><br><span class="line">       <span class="attr">geocoder</span>: <span class="literal">false</span>, <span class="comment">// éšè—åœ°åæŸ¥æ‰¾æ§ä»¶</span></span><br><span class="line">       <span class="attr">homeButton</span>: <span class="literal">false</span>, <span class="comment">// éšè—HomeæŒ‰é’®</span></span><br><span class="line">       <span class="attr">infoBox</span>: <span class="literal">false</span>, <span class="comment">// éšè—ç‚¹å‡»è¦ç´ ä¹‹åæ˜¾ç¤ºçš„ä¿¡æ¯çª—å£</span></span><br><span class="line">       <span class="attr">sceneModePicker</span>: <span class="literal">false</span>, <span class="comment">// éšè—åœºæ™¯æ¨¡å¼é€‰æ‹©æ§ä»¶</span></span><br><span class="line">       <span class="attr">selectionIndicator</span>: <span class="literal">true</span>, <span class="comment">// æ˜¾ç¤ºå®ä½“å¯¹è±¡é€‰æ‹©æ¡†ï¼Œé»˜è®¤true</span></span><br><span class="line">       <span class="attr">timeline</span>: <span class="literal">true</span>, <span class="comment">// æ—¶é—´çº¿æ§ä»¶</span></span><br><span class="line">       <span class="attr">navigationHelpButton</span>: <span class="literal">false</span>, <span class="comment">// éšè—å¸®åŠ©æŒ‰é’®</span></span><br><span class="line">       <span class="attr">scene3DOnly</span>: <span class="literal">true</span>, <span class="comment">// æ¯ä¸ªå‡ ä½•å®ä¾‹å°†åªåœ¨3Dä¸­å‘ˆç°ï¼Œä»¥èŠ‚çœGPUå†…å­˜</span></span><br><span class="line">       <span class="attr">shouldAnimate</span>: <span class="literal">true</span>, <span class="comment">// å¼€å¯åŠ¨ç”»è‡ªåŠ¨æ’­æ”¾</span></span><br><span class="line">       <span class="attr">sceneMode</span>: <span class="number">3</span>, <span class="comment">// åˆå§‹åœºæ™¯æ¨¡å¼ 1ï¼š2D 2ï¼š2Då¾ªç¯ 3ï¼š3Dï¼Œé»˜è®¤3</span></span><br><span class="line">       <span class="attr">requestRenderMode</span>: <span class="literal">true</span>, <span class="comment">// å‡å°‘Cesiumæ¸²æŸ“æ–°å¸§æ€»æ—¶é—´å¹¶å‡å°‘Cesiumåœ¨åº”ç”¨ç¨‹åºä¸­æ€»ä½“CPUä½¿ç”¨ç‡</span></span><br><span class="line">       <span class="comment">// å¦‚åœºæ™¯ä¸­çš„å…ƒç´ æ²¡æœ‰éšä»¿çœŸæ—¶é—´å˜åŒ–ï¼Œè¯·è€ƒè™‘å°†è®¾ç½®maximumRenderTimeChangeä¸ºè¾ƒé«˜çš„å€¼ï¼Œä¾‹å¦‚Infinity</span></span><br><span class="line">       <span class="comment">// maximumRenderTimeChange: Infinity,</span></span><br><span class="line">       <span class="attr">shadows</span>: <span class="literal">false</span>,</span><br><span class="line">       <span class="comment">// imageryProvider: new Cesium.UrlTemplateImageryProvider(&#123;</span></span><br><span class="line">       <span class="comment">//   url: cesium_config.baseMap,</span></span><br><span class="line">       <span class="comment">//   fileExtension: &quot;png&quot;</span></span><br><span class="line">       <span class="comment">// &#125;),</span></span><br><span class="line">       <span class="attr">imageryProvider</span>: <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">ArcGisMapServerImageryProvider</span>(&#123;</span><br><span class="line">         <span class="attr">url</span>: <span class="string">&quot;https://services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/&quot;</span>,</span><br><span class="line">       &#125;),</span><br><span class="line">       <span class="comment">// terrainProvider: Cesium.createWorldTerrain(), // åœ°å½¢</span></span><br><span class="line">     &#125;);</span><br><span class="line">     viewer.<span class="property">cesiumWidget</span>.<span class="property">creditContainer</span>.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;none&quot;</span></span><br><span class="line">     <span class="comment">// ä»¥ä¸‹è®¾ç½®ä¸ºäº†ä½¿cesiumåœ°å›¾é¼ æ ‡æ§åˆ¶ç¬¦åˆmapboxä¹ æƒ¯</span></span><br><span class="line">     <span class="comment">// å…³é—­åŒå‡»äº‹ä»¶</span></span><br><span class="line">     viewer.<span class="property">cesiumWidget</span>.<span class="property">screenSpaceEventHandler</span>.<span class="title function_">removeInputAction</span>(</span><br><span class="line">         <span class="title class_">Cesium</span>.<span class="property">ScreenSpaceEventType</span>.<span class="property">LEFT_DOUBLE_CLICK</span></span><br><span class="line">     );</span><br><span class="line">     <span class="comment">// é¼ æ ‡å³é”®æ—‹è½¬</span></span><br><span class="line">     viewer.<span class="property">scene</span>.<span class="property">screenSpaceCameraController</span>.<span class="property">tiltEventTypes</span> = [</span><br><span class="line">       <span class="title class_">Cesium</span>.<span class="property">CameraEventType</span>.<span class="property">RIGHT_DRAG</span>,</span><br><span class="line">     ];</span><br><span class="line">     <span class="comment">// ä¸­é”®æ»šåŠ¨ç¼©æ”¾</span></span><br><span class="line">     viewer.<span class="property">scene</span>.<span class="property">screenSpaceCameraController</span>.<span class="property">zoomEventTypes</span> = [</span><br><span class="line">       <span class="title class_">Cesium</span>.<span class="property">CameraEventType</span>.<span class="property">WHEEL</span>,</span><br><span class="line">     ];</span><br><span class="line">     <span class="comment">// é¼ æ ‡å·¦é”®å¹³ç§»</span></span><br><span class="line">     viewer.<span class="property">scene</span>.<span class="property">screenSpaceCameraController</span>.<span class="property">rotateEventTypes</span> = [</span><br><span class="line">       <span class="title class_">Cesium</span>.<span class="property">CameraEventType</span>.<span class="property">LEFT_DRAG</span>,</span><br><span class="line">     ];</span><br><span class="line">     viewer.<span class="property">scene</span>.<span class="property">globe</span>.<span class="property">enableLighting</span> = <span class="literal">true</span></span><br><span class="line">     viewer.<span class="property">camera</span>.<span class="title function_">flyTo</span>(&#123;</span><br><span class="line">       <span class="attr">destination</span>: <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(...map_config.<span class="property">MAP_CENTER</span>, <span class="number">30000</span>),</span><br><span class="line">       <span class="attr">orientation</span>: &#123;</span><br><span class="line">         <span class="attr">heading</span>: <span class="title class_">Cesium</span>.<span class="property">Math</span>.<span class="title function_">toRadians</span>(<span class="number">0</span>), <span class="comment">// æ—‹è½¬è§’åº¦</span></span><br><span class="line">         <span class="attr">pitch</span>: <span class="title class_">Cesium</span>.<span class="property">Math</span>.<span class="title function_">toRadians</span>(-<span class="number">90.0</span>), <span class="comment">// ç›¸æœºæ–¹å‘</span></span><br><span class="line">       &#125;</span><br><span class="line">     &#125;);</span><br><span class="line">     <span class="keyword">return</span> viewer</span><br><span class="line">  &#125;,</span><br><span class="line"> &#125;,</span><br><span class="line"> <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line"> &#125;,</span><br><span class="line"> <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line"> &#125;,</span><br><span class="line"> <span class="title function_">beforeDestroy</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>Cesium</tag>
      </tags>
  </entry>
  <entry>
    <title>echartsé¼ æ ‡é¦–æ¬¡æ‚¬æµ®ç»è¿‡é¡µé¢é—ªåŠ¨</title>
    <url>/2022/12/27/echarts%E9%BC%A0%E6%A0%87%E9%A6%96%E6%AC%A1%E6%82%AC%E6%B5%AE%E7%BB%8F%E8%BF%87%E9%A1%B5%E9%9D%A2%E9%97%AA%E5%8A%A8/</url>
    <content><![CDATA[<h3 id="ä½¿ç”¨-echarts-ç»˜åˆ¶å›¾å½¢åï¼Œåœ¨é¡µé¢ä¸­é¦–æ¬¡é¼ æ ‡æ‚¬æµ®åˆ’è¿‡ä¼šå‡ºç°é¡µé¢é—ªåŠ¨ï¼Œçªç„¶æœ‰æ»šåŠ¨æ¡å‡ºç°åˆç«‹å³æ¶ˆå¤±ï¼Œä»é¡µé¢æ¥çœ‹åº”è¯¥æ˜¯-tooltip-è¶…å‡ºå±å¹•è¾¹ç•Œå¯¼è‡´çš„ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹åŠæ³•è§£å†³-ï¼š"><a href="#ä½¿ç”¨-echarts-ç»˜åˆ¶å›¾å½¢åï¼Œåœ¨é¡µé¢ä¸­é¦–æ¬¡é¼ æ ‡æ‚¬æµ®åˆ’è¿‡ä¼šå‡ºç°é¡µé¢é—ªåŠ¨ï¼Œçªç„¶æœ‰æ»šåŠ¨æ¡å‡ºç°åˆç«‹å³æ¶ˆå¤±ï¼Œä»é¡µé¢æ¥çœ‹åº”è¯¥æ˜¯-tooltip-è¶…å‡ºå±å¹•è¾¹ç•Œå¯¼è‡´çš„ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹åŠæ³•è§£å†³-ï¼š" class="headerlink" title="ä½¿ç”¨ echarts ç»˜åˆ¶å›¾å½¢åï¼Œåœ¨é¡µé¢ä¸­é¦–æ¬¡é¼ æ ‡æ‚¬æµ®åˆ’è¿‡ä¼šå‡ºç°é¡µé¢é—ªåŠ¨ï¼Œçªç„¶æœ‰æ»šåŠ¨æ¡å‡ºç°åˆç«‹å³æ¶ˆå¤±ï¼Œä»é¡µé¢æ¥çœ‹åº”è¯¥æ˜¯ tooltip è¶…å‡ºå±å¹•è¾¹ç•Œå¯¼è‡´çš„ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹åŠæ³•è§£å†³ ï¼š"></a>ä½¿ç”¨ <code>echarts</code> ç»˜åˆ¶å›¾å½¢åï¼Œåœ¨é¡µé¢ä¸­é¦–æ¬¡é¼ æ ‡æ‚¬æµ®åˆ’è¿‡ä¼šå‡ºç°é¡µé¢é—ªåŠ¨ï¼Œçªç„¶æœ‰æ»šåŠ¨æ¡å‡ºç°åˆç«‹å³æ¶ˆå¤±ï¼Œä»é¡µé¢æ¥çœ‹åº”è¯¥æ˜¯ <code>tooltip</code> è¶…å‡ºå±å¹•è¾¹ç•Œå¯¼è‡´çš„ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹åŠæ³•è§£å†³ ï¼š</h3><h3 id="tooltip-options-æ·»åŠ ä»¥ä¸‹å±æ€§ï¼š"><a href="#tooltip-options-æ·»åŠ ä»¥ä¸‹å±æ€§ï¼š" class="headerlink" title="tooltip options æ·»åŠ ä»¥ä¸‹å±æ€§ï¼š"></a><code>tooltip options</code> æ·»åŠ ä»¥ä¸‹å±æ€§ï¼š</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">tooltip</span>:&#123;</span><br><span class="line">		<span class="attr">transitionDuration</span>: <span class="number">0</span>,</span><br><span class="line">		<span class="comment">// ...</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>Echats</tag>
      </tags>
  </entry>
  <entry>
    <title>Cesiumè‡ªå®šä¹‰popupå°è£…ä½¿ç”¨</title>
    <url>/2023/03/07/Cesium%E8%87%AA%E5%AE%9A%E4%B9%89popup%E5%B0%81%E8%A3%85%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<h5 id="å‰å‡ å¤©é¡¹ç›®ä¸­æœ‰ä¸ªéœ€æ±‚æ˜¯åŸºäºVueæ¡†æ¶ä½¿ç”¨CesiumJSåº“ï¼Œéœ€è¦åˆ›å»ºé‡Œé¢gltfæ¨¡å‹å¯¹åº”çš„Popupå¼¹çª—ç»„ä»¶-æ¥ä»‹ç»ä¸€äº›å…³äºè¿™ä¸ªentityçš„è¯¦ç»†ä¿¡æ¯ã€‚"><a href="#å‰å‡ å¤©é¡¹ç›®ä¸­æœ‰ä¸ªéœ€æ±‚æ˜¯åŸºäºVueæ¡†æ¶ä½¿ç”¨CesiumJSåº“ï¼Œéœ€è¦åˆ›å»ºé‡Œé¢gltfæ¨¡å‹å¯¹åº”çš„Popupå¼¹çª—ç»„ä»¶-æ¥ä»‹ç»ä¸€äº›å…³äºè¿™ä¸ªentityçš„è¯¦ç»†ä¿¡æ¯ã€‚" class="headerlink" title="å‰å‡ å¤©é¡¹ç›®ä¸­æœ‰ä¸ªéœ€æ±‚æ˜¯åŸºäºVueæ¡†æ¶ä½¿ç”¨CesiumJSåº“ï¼Œéœ€è¦åˆ›å»ºé‡Œé¢gltfæ¨¡å‹å¯¹åº”çš„Popupå¼¹çª—ç»„ä»¶ æ¥ä»‹ç»ä¸€äº›å…³äºè¿™ä¸ªentityçš„è¯¦ç»†ä¿¡æ¯ã€‚"></a>å‰å‡ å¤©é¡¹ç›®ä¸­æœ‰ä¸ªéœ€æ±‚æ˜¯åŸºäº<code>Vue</code>æ¡†æ¶ä½¿ç”¨<code>CesiumJS</code>åº“ï¼Œéœ€è¦åˆ›å»ºé‡Œé¢<code>gltf</code>æ¨¡å‹å¯¹åº”çš„<code>Popup</code>å¼¹çª—ç»„ä»¶ æ¥ä»‹ç»ä¸€äº›å…³äºè¿™ä¸ª<code>entity</code>çš„è¯¦ç»†ä¿¡æ¯ã€‚<br/></h5><ul>
<li>å› ä¸ºUIæ ·å¼å®šåˆ¶åŒ–è¾ƒé«˜ï¼Œä¸”å¯èƒ½å¤šå¤„éœ€è¦è°ƒç”¨ï¼Œæ‰€ä»¥éœ€è¦å°è£…ä¸€ä¸ª<code>Popup</code>ç»„ä»¶ã€‚</li>
<li>å¹¶ä¸”å¦‚æœä½¿ç”¨åŸç”Ÿ<code>html</code>æ–‡æœ¬æ¥ä¸€ç‚¹ç‚¹ç¼–å†™ç»„ä»¶çš„è¯ï¼Œå¼€å‘èµ·æ¥ä¼šå¾ˆå‘† - -| æ‰€ä»¥ï¼Œæ”¹ç”¨åˆ›å»ºå¹¶æŒ‚è½½ä¸€ä¸ª<code>Vue</code>é¡µé¢ç»„ä»¶æ¥å®ç°è¿™ä¸ªå¼¹çª—é¡µé¢ã€‚</li>
<li>æ¥ä¸‹æ¥ä»‹ç»ä¸€ä¸‹å®ç°æ­¥éª¤ï¼š<br/><span id="more"></span><ol>
<li><p>å…ˆå…¨å±€æ³¨å†Œä¸€ä¸ª<code>popup</code>ç»„ä»¶ï¼Œå¹¶åœ¨åŸå‹ä¸­åŠ å…¥ä¸€äº›é…ç½®æ–¹æ³•ï¼Œå€Ÿé‰´å¸¸ç”¨çš„ä¸€äº›å…¶ä»–åº“çš„<code>popup</code>åº”è¯¥å…·å¤‡çš„æ–¹æ³•ï¼Œä¸€èˆ¬ä¼šæœ‰ï¼š<code>setOffset</code>è®¾ç½®åç§»ã€<code>remove</code>åˆ é™¤ã€<code>setTitle</code>è®¾ç½®æ ‡é¢˜ã€<code>setPosition</code>è®¾ç½®ä½ç½®ã€<code>setHTML</code>è®¾ç½®å†…å®¹ã€<code>addTo</code>æ·»åŠ è‡³å“ªä¸ªåœºæ™¯ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">BaseEvent</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">handles</span> = &#123;&#125;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">cached</span> = []</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">BaseEvent</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">on</span> = <span class="keyword">function</span> (<span class="params">eventName, callback</span>) &#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="keyword">typeof</span> callback !== <span class="string">&quot;function&quot;</span>) <span class="keyword">return</span>;</span><br><span class="line">		<span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">handles</span>[eventName]) &#123;</span><br><span class="line">				<span class="variable language_">this</span>.<span class="property">handles</span>[eventName] = [];</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">handles</span>[eventName].<span class="title function_">push</span>(callback);</span><br><span class="line">		<span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">cached</span>[eventName] <span class="keyword">instanceof</span> <span class="title class_">Array</span>) &#123;</span><br><span class="line">				<span class="comment">//è¯´æ˜æœ‰ç¼“å­˜çš„ å¯ä»¥æ‰§è¡Œ</span></span><br><span class="line">				callback.<span class="title function_">apply</span>(<span class="literal">null</span>, <span class="variable language_">this</span>.<span class="property">cached</span>[eventName]);</span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">BaseEvent</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">emit</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">handles</span>[<span class="variable language_">arguments</span>[<span class="number">0</span>]] <span class="keyword">instanceof</span> <span class="title class_">Array</span>) &#123;</span><br><span class="line">				<span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="variable language_">this</span>.<span class="property">handles</span>[<span class="variable language_">arguments</span>[<span class="number">0</span>]].<span class="property">length</span>; i++) &#123;</span><br><span class="line">						<span class="variable language_">this</span>.<span class="property">handles</span>[<span class="variable language_">arguments</span>[<span class="number">0</span>]][i](<span class="variable language_">arguments</span>[<span class="number">1</span>]);</span><br><span class="line">				&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//é»˜è®¤ç¼“å­˜</span></span><br><span class="line">		<span class="variable language_">this</span>.<span class="property">cached</span>[<span class="variable language_">arguments</span>[<span class="number">0</span>]] = <span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">slice</span>.<span class="title function_">call</span>(<span class="variable language_">arguments</span>, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> <span class="title class_">CesiumPopup</span> = (<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">		<span class="keyword">var</span> _panelContainer = <span class="literal">null</span></span><br><span class="line">		<span class="keyword">var</span> _contentContainer = <span class="literal">null</span></span><br><span class="line">		<span class="keyword">var</span> _closeBtn = <span class="literal">null</span></span><br><span class="line">		<span class="keyword">var</span> _renderListener = <span class="literal">null</span></span><br><span class="line">		<span class="keyword">var</span> _viewer = <span class="literal">null</span></span><br><span class="line">		<span class="keyword">var</span> <span class="title class_">CesiumPopup</span> = <span class="keyword">function</span> (<span class="params">options</span>) &#123;</span><br><span class="line">				<span class="comment">//ç»§æ‰¿</span></span><br><span class="line">				<span class="title class_">BaseEvent</span>.<span class="title function_">call</span>(<span class="variable language_">this</span>)</span><br><span class="line">				<span class="variable language_">this</span>.<span class="property">className</span> = options.<span class="property">className</span> || <span class="string">&#x27;&#x27;</span></span><br><span class="line">				<span class="variable language_">this</span>.<span class="property">title</span> = options.<span class="property">title</span> || <span class="string">&#x27;&#x27;</span></span><br><span class="line">				<span class="variable language_">this</span>.<span class="property">offset</span> = options.<span class="property">offset</span> || [<span class="number">0</span>, <span class="number">0</span>]</span><br><span class="line">				<span class="comment">// this.render = this.render.bind(this)</span></span><br><span class="line">				<span class="variable language_">this</span>.<span class="property">closeHander</span> = <span class="variable language_">this</span>.<span class="property">closeHander</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>)</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="title class_">CesiumPopup</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title class_">BaseEvent</span>()</span><br><span class="line">		<span class="title class_">CesiumPopup</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constrctor</span> = <span class="title class_">CesiumPopup</span></span><br><span class="line">		<span class="title class_">CesiumPopup</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">addTo</span> = <span class="keyword">function</span> (<span class="params">viewer</span>) &#123;</span><br><span class="line">				<span class="keyword">if</span> (_viewer) <span class="variable language_">this</span>.<span class="title function_">remove</span>()</span><br><span class="line">				_viewer = viewer</span><br><span class="line">				<span class="variable language_">this</span>.<span class="title function_">initPanle</span>();</span><br><span class="line">				<span class="comment">//å…³é—­æŒ‰é’®</span></span><br><span class="line">				_closeBtn.<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="variable language_">this</span>.<span class="property">closeHander</span>, <span class="literal">false</span>)</span><br><span class="line">				<span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">position</span>) &#123;</span><br><span class="line">						_panelContainer.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;block&#x27;</span></span><br><span class="line">						_renderListener = _viewer.<span class="property">scene</span>.<span class="property">postRender</span>.<span class="title function_">addEventListener</span>(<span class="variable language_">this</span>.<span class="property">render</span>, <span class="variable language_">this</span>)</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">return</span> <span class="variable language_">this</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="title class_">CesiumPopup</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">initPanle</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">				<span class="keyword">var</span> closeBtnIcon = <span class="string">&#x27;&lt;svg t=&quot;1603334792546&quot; class=&quot;icon&quot; viewBox=&quot;0 0 1024 1024&quot; version=&quot;1.1&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; p-id=&quot;1328&quot; width=&quot;32&quot; height=&quot;32&quot;&gt;&lt;path d=&quot;M568.922 508.232L868.29 208.807a39.139 39.139 0 0 0 0-55.145l-1.64-1.64a39.139 39.139 0 0 0-55.09 0l-299.367 299.82-299.425-299.934a39.139 39.139 0 0 0-55.088 0l-1.697 1.64a38.46 38.46 0 0 0 0 55.09l299.48 299.594-299.424 299.48a39.139 39.139 0 0 0 0 55.09l1.64 1.696a39.139 39.139 0 0 0 55.09 0l299.424-299.48L811.56 864.441a39.139 39.139 0 0 0 55.089 0l1.696-1.64a39.139 39.139 0 0 0 0-55.09l-299.48-299.537z&quot; p-id=&quot;1329&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&#x27;</span></span><br><span class="line">				_panelContainer = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">				_panelContainer.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;cesium-popup-panel&#x27;</span>)</span><br><span class="line">				<span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">className</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">className</span> !== <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">						_panelContainer.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="variable language_">this</span>.<span class="property">className</span>)</span><br><span class="line">				&#125;</span><br><span class="line">				_closeBtn = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">				_closeBtn.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;cesium-popup-close-btn&#x27;</span>)</span><br><span class="line">				_closeBtn.<span class="property">innerHTML</span> = closeBtnIcon</span><br><span class="line">				<span class="comment">// header container</span></span><br><span class="line">				<span class="keyword">var</span> headerContainer = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">				headerContainer.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;cesium-popup-header-panel&#x27;</span>)</span><br><span class="line">				<span class="variable language_">this</span>.<span class="property">headerTitle</span> = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">				<span class="variable language_">this</span>.<span class="property">headerTitle</span>.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;cesium-poput-header-title&#x27;</span>)</span><br><span class="line">				<span class="variable language_">this</span>.<span class="property">headerTitle</span>.<span class="property">innerHTML</span> = <span class="variable language_">this</span>.<span class="property">title</span></span><br><span class="line">				headerContainer.<span class="title function_">appendChild</span>(<span class="variable language_">this</span>.<span class="property">headerTitle</span>)</span><br><span class="line">				_panelContainer.<span class="title function_">appendChild</span>(_closeBtn)</span><br><span class="line">				_panelContainer.<span class="title function_">appendChild</span>(headerContainer)</span><br><span class="line">				<span class="comment">// content container</span></span><br><span class="line">				_contentContainer = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">				_contentContainer.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;cesium-popup-content-panel&#x27;</span>)</span><br><span class="line">				_contentContainer.<span class="property">innerHTML</span> = <span class="variable language_">this</span>.<span class="property">content</span></span><br><span class="line">				_panelContainer.<span class="title function_">appendChild</span>(_contentContainer)</span><br><span class="line">				<span class="comment">//tip container</span></span><br><span class="line">				<span class="keyword">var</span> tipContaienr = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">				tipContaienr.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;cesium-popup-tip-panel&#x27;</span>)</span><br><span class="line">				<span class="keyword">var</span> tipDiv = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>)</span><br><span class="line">				tipDiv.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&#x27;cesium-popup-tip-bottom&#x27;</span>)</span><br><span class="line">				tipContaienr.<span class="title function_">appendChild</span>(tipDiv)</span><br><span class="line">				_panelContainer.<span class="title function_">appendChild</span>(tipContaienr)</span><br><span class="line">				_panelContainer.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span></span><br><span class="line">				<span class="comment">// add to Viewer Container</span></span><br><span class="line">				_viewer.<span class="property">cesiumWidget</span>.<span class="property">container</span>.<span class="title function_">appendChild</span>(_panelContainer)</span><br><span class="line">				<span class="variable language_">this</span>.<span class="title function_">emit</span>(<span class="string">&#x27;open&#x27;</span>)</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="title class_">CesiumPopup</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">setHTML</span> = <span class="keyword">function</span> (<span class="params">html</span>) &#123;</span><br><span class="line">				<span class="keyword">if</span> (_contentContainer) &#123;</span><br><span class="line">						_contentContainer.<span class="property">innerHTML</span> = html</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="variable language_">this</span>.<span class="property">content</span> = html</span><br><span class="line">				<span class="keyword">return</span> <span class="variable language_">this</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="title class_">CesiumPopup</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">render</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">				<span class="keyword">var</span> geometry = <span class="variable language_">this</span>.<span class="property">position</span></span><br><span class="line">				<span class="keyword">if</span> (!geometry) <span class="keyword">return</span></span><br><span class="line">				<span class="keyword">var</span> position = <span class="title class_">Cesium</span>.<span class="property">SceneTransforms</span>.<span class="title function_">wgs84ToWindowCoordinates</span>(_viewer.<span class="property">scene</span>, geometry)</span><br><span class="line">				<span class="keyword">if</span> (!position) &#123;</span><br><span class="line">						<span class="keyword">return</span></span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">if</span> (_panelContainer) &#123;</span><br><span class="line">						_panelContainer.<span class="property">style</span>.<span class="property">left</span> = position.<span class="property">x</span> - _panelContainer.<span class="property">offsetWidth</span> / <span class="number">2</span> + <span class="variable language_">this</span>.<span class="property">offset</span>[<span class="number">0</span>] + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">						_panelContainer.<span class="property">style</span>.<span class="property">top</span> = position.<span class="property">y</span> - _panelContainer.<span class="property">offsetHeight</span> - <span class="number">10</span> + <span class="variable language_">this</span>.<span class="property">offset</span>[<span class="number">1</span>] + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">				&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="title class_">CesiumPopup</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">setPosition</span> = <span class="keyword">function</span> (<span class="params">cartesian3</span>) &#123;</span><br><span class="line">				<span class="variable language_">this</span>.<span class="property">position</span> = cartesian3</span><br><span class="line">				<span class="keyword">return</span> <span class="variable language_">this</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="title class_">CesiumPopup</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">addClassName</span> = <span class="keyword">function</span> (<span class="params">className</span>) &#123;</span><br><span class="line">				<span class="keyword">if</span> (_panelContainer) &#123;</span><br><span class="line">						_panelContainer.<span class="property">classList</span>.<span class="title function_">add</span>(className)</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">return</span> <span class="variable language_">this</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="title class_">CesiumPopup</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">removeClass</span> = <span class="keyword">function</span> (<span class="params">className</span>) &#123;</span><br><span class="line">				<span class="keyword">if</span> (_panelContainer) &#123;</span><br><span class="line">						_panelContainer.<span class="property">classList</span>.<span class="title function_">remove</span>(className)</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">return</span> <span class="variable language_">this</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="title class_">CesiumPopup</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">setTitle</span> = <span class="keyword">function</span> (<span class="params">title</span>) &#123;</span><br><span class="line">				<span class="variable language_">this</span>.<span class="property">headerTitle</span>.<span class="property">innerHTML</span> = title</span><br><span class="line">				<span class="keyword">return</span> <span class="variable language_">this</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="title class_">CesiumPopup</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">setOffset</span> = <span class="keyword">function</span> (<span class="params">offset</span>) &#123;</span><br><span class="line">				<span class="variable language_">this</span>.<span class="property">offset</span> = offset</span><br><span class="line">				<span class="keyword">return</span> <span class="variable language_">this</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="title class_">CesiumPopup</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">closeHander</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">				<span class="variable language_">this</span>.<span class="title function_">remove</span>()</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="title class_">CesiumPopup</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">remove</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">				<span class="keyword">if</span>(_closeBtn)_closeBtn.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="variable language_">this</span>.<span class="property">closeHander</span>, <span class="literal">false</span>)</span><br><span class="line">				<span class="keyword">if</span> (_closeBtn) &#123;</span><br><span class="line">						_closeBtn.<span class="property">parentNode</span>.<span class="title function_">removeChild</span>(_closeBtn)</span><br><span class="line">						_closeBtn = <span class="literal">null</span></span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">if</span> (_contentContainer) &#123;</span><br><span class="line">						_contentContainer.<span class="property">parentNode</span>.<span class="title function_">removeChild</span>(_contentContainer)</span><br><span class="line">						_contentContainer = <span class="literal">null</span></span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">if</span> (_panelContainer) &#123;</span><br><span class="line">						_panelContainer.<span class="property">parentNode</span>.<span class="title function_">removeChild</span>(_panelContainer)</span><br><span class="line">						_panelContainer = <span class="literal">null</span></span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">if</span> (_renderListener) &#123;</span><br><span class="line">						<span class="title function_">_renderListener</span>()</span><br><span class="line">						_renderListener = <span class="literal">null</span></span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">if</span> (_viewer) &#123;</span><br><span class="line">						_viewer = <span class="literal">null</span></span><br><span class="line">				&#125;</span><br><span class="line">				<span class="variable language_">this</span>.<span class="title function_">emit</span>(<span class="string">&#x27;close&#x27;</span>)</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="title class_">CesiumPopup</span></span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>
<p><em>å¯¹åº”æ ·å¼æ–‡ä»¶å¦‚ä¸‹ï¼Œå¯ä»¥è‡ªå·±éšæ„è°ƒæ•´</em></p>
  <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"> <span class="comment">/* popæ¡†css*/</span></span><br><span class="line"><span class="selector-class">.cesium-popup-panel</span> &#123;</span><br><span class="line">	<span class="attribute">opacity</span>: <span class="number">0.8</span>;</span><br><span class="line">	<span class="comment">/*width: 312px;*/</span></span><br><span class="line">	<span class="attribute">position</span>: absolute;</span><br><span class="line">	<span class="attribute">z-index</span>: <span class="number">0</span>;</span><br><span class="line">	<span class="comment">/*color: #00fcf9;*/</span></span><br><span class="line">	<span class="comment">/*background: rgba(23, 50, 108, 0.6);*/</span></span><br><span class="line">	<span class="comment">/*border: 1px solid #4674d6;*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.cesium-popup-close-btn</span> &gt; svg<span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">	<span class="attribute">color</span>: <span class="number">#00fcf9</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.cesium-popup-close-btn</span> &gt; svg &#123;</span><br><span class="line">	<span class="attribute">display</span>: none;</span><br><span class="line">	user-select: auto;</span><br><span class="line">	<span class="attribute">color</span>: <span class="number">#4674d6</span>;</span><br><span class="line">	<span class="attribute">cursor</span>: pointer;</span><br><span class="line">	<span class="attribute">width</span>: <span class="number">15px</span>;</span><br><span class="line">	<span class="comment">/* height: 15px; */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>æŠŠæ­¤æ–‡ä»¶æ”¾åˆ°publicæ–‡ä»¶å¤¹ä¸‹ï¼Œåœ¨<code>index.html</code>å…¥å£é€šè¿‡<code>&lt;script&gt;</code>æ ‡ç­¾å¼•å…¥ï¼Œæ­¤æ—¶ï¼Œå³å¯å…¨å±€ä½¿ç”¨æ­¤ç»„ä»¶ã€‚</p>
</li>
<li><p>ä½¿ç”¨ï¼š<br/><br>é¦–å…ˆæ˜¯åŸºæœ¬ä½¿ç”¨ï¼Œå³<code>setHtml</code>æ—¶ç›´æ¥æŠŠå†…å®¹ç”¨åŸç”Ÿ<code>html</code>æ–‡æœ¬åµŒå…¥åˆ°å¼¹çª—å†…å®¹ä¸­ï¼š</p>
  <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">popup = <span class="keyword">new</span> <span class="title class_">CesiumPopup</span>(&#123;<span class="attr">title</span>: <span class="string">&#x27;ä¿¡æ¯&#x27;</span>&#125;)</span><br><span class="line">	.<span class="title function_">setPosition</span>(<span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(lng, lat, <span class="number">1.5</span>))</span><br><span class="line">	.<span class="title function_">setHTML</span>(<span class="string">`&lt;div&gt;&lt;ul&gt;&lt;li&gt;1&lt;/li&gt;&lt;li&gt;2&lt;/li&gt;&lt;li&gt;3&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;`</span>)</span><br><span class="line">	.<span class="title function_">addTo</span>(viewer).<span class="title function_">setTitle</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">	.<span class="title function_">setOffset</span>([-<span class="number">100</span>, -<span class="number">180</span>])</span><br></pre></td></tr></table></figure>
<p>  å…¶æ¬¡æ˜¯ç¨å¾®é«˜çº§ç‚¹çš„ç”¨æ³•ï¼Œå…ˆå¼•å…¥ä¸€ä¸ª<code>Vue</code>ç»„ä»¶ï¼Œç„¶å<code>setHtml</code>æ—¶æä¾›ä¸€ä¸ªå”¯ä¸€<code>div</code>çš„å®¹å™¨ç»™<code>popup</code>å¼¹çª—ï¼Œæœ€åæŠŠä¹‹å‰å¼•å…¥çš„<code>Vue</code>ç»„ä»¶æŒ‚è½½åˆ°è¿™ä¸ªå”¯ä¸€<code>div</code>çš„å®¹å™¨ä¸Šï¼Œæ­¤æ—¶ä¹Ÿå¯å®ç°<code>props</code>ä¼ å€¼ï¼ŒåŒæ—¶æ–¹ä¾¿äº†ç»„ä»¶ç¼–å†™å¼€å‘ï¼š</p>
  <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">popup = <span class="keyword">new</span> <span class="title class_">CesiumPopup</span>(&#123;<span class="attr">title</span>: <span class="string">&#x27;ä¿¡æ¯&#x27;</span>&#125;)</span><br><span class="line">		.<span class="title function_">setPosition</span>(<span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(lng, lat, <span class="number">1.5</span>))</span><br><span class="line">		.<span class="title function_">setHTML</span>(<span class="string">`&lt;div id=&quot;cesium_vehicle_popup&quot;&gt;&lt;/div&gt;`</span>)</span><br><span class="line">		.<span class="title function_">addTo</span>(viewer).<span class="title function_">setTitle</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">		.<span class="title function_">setOffset</span>([-<span class="number">100</span>, -<span class="number">180</span>])</span><br><span class="line">		<span class="comment">// è¿™é‡Œçš„VehiclePopupæ˜¯å¼•å…¥çš„å…¶ä»–Vueæ–‡ä»¶ç»„ä»¶</span></span><br><span class="line">		<span class="keyword">new</span> <span class="title class_">VehiclePopup</span>(&#123;</span><br><span class="line">			<span class="comment">// æ³¨æ„è¿™ä¸ªpropsDataæ˜¯å›ºå®šå†™æ³•ï¼Œé‡Œé¢çš„modelæ‰æ˜¯ç©¿çš„propså¯¹è±¡</span></span><br><span class="line">			<span class="attr">propsData</span>: &#123;</span><br><span class="line">				<span class="attr">model</span>: <span class="variable language_">this</span>.<span class="property">detailData</span></span><br><span class="line">			&#125;,</span><br><span class="line">		&#125;).$mount(<span class="string">&#x27;#cesium_vehicle_popup&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
<li><p>ä¹‹åéœ€è¦è¿›è¡Œ<code>popup</code>ç»„ä»¶ä½ç½®çš„è°ƒæ•´å’Œå†…å®¹çš„æ”¹å˜åªéœ€è¦ä½¿ç”¨å®šä¹‰å¥½çš„æ–¹æ³•ä¼ å‚å³å¯</p>
</li>
</ol>
</li>
</ul>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>Cesium</tag>
      </tags>
  </entry>
  <entry>
    <title>elementUIä¿®æ”¹messageBoxå¼¹æ¡†æ ·å¼</title>
    <url>/2022/05/18/elementUI%E4%BF%AE%E6%94%B9messageBox%E5%BC%B9%E6%A1%86%E6%A0%B7%E5%BC%8F/</url>
    <content><![CDATA[<h6 id="elementUI-messageBox-ç»„ä»¶è‡ªå®šä¹‰æ ·å¼æ–¹æ³•ï¼šæ·»åŠ å±æ€§â€™customClassâ€™"><a href="#elementUI-messageBox-ç»„ä»¶è‡ªå®šä¹‰æ ·å¼æ–¹æ³•ï¼šæ·»åŠ å±æ€§â€™customClassâ€™" class="headerlink" title="elementUI messageBox ç»„ä»¶è‡ªå®šä¹‰æ ·å¼æ–¹æ³•ï¼šæ·»åŠ å±æ€§â€™customClassâ€™"></a>elementUI messageBox ç»„ä»¶è‡ªå®šä¹‰æ ·å¼æ–¹æ³•ï¼šæ·»åŠ å±æ€§â€™customClassâ€™</h6><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">this</span>.$confirm(<span class="string">&#x27;ç¡®è®¤ï¼Ÿ&#x27;</span>,<span class="string">&#x27;å‘Šè­¦&#x27;</span>,&#123;</span><br><span class="line">  <span class="attr">confirmButtonText</span>: <span class="string">&#x27;ç¡®å®š&#x27;</span>,</span><br><span class="line">  <span class="attr">cancelButtonText</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&#x27;warning&#x27;</span>,</span><br><span class="line">  <span class="attr">customClass</span>: <span class="string">&#x27;myBox&#x27;</span>  <span class="comment">// ğŸ‘ˆ</span></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="comment">// do some </span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h6 id="æ³¨æ„-æ”¾-customClass-çš„-style-ä¸èƒ½åŠ -scoped"><a href="#æ³¨æ„-æ”¾-customClass-çš„-style-ä¸èƒ½åŠ -scoped" class="headerlink" title="æ³¨æ„ æ”¾ customClass çš„ style ä¸èƒ½åŠ  scoped"></a>æ³¨æ„ æ”¾ customClass çš„ style ä¸èƒ½åŠ  scoped</h6><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line"><span class="selector-class">.myBox</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: green;</span><br><span class="line">  ......</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>ElementUI</tag>
        <tag>Css</tag>
      </tags>
  </entry>
  <entry>
    <title>flexå¸ƒå±€space-betweenæœ€åä¸€è¡Œå±•ç¤ºé—®é¢˜</title>
    <url>/2022/12/29/flex%E5%B8%83%E5%B1%80space-between%E6%9C%80%E5%90%8E%E4%B8%80%E8%A1%8C%E5%B1%95%E7%A4%BA%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<h3 id="åœ¨ä½¿ç”¨-flex-è¿›è¡Œå¸ƒå±€æ—¶æ¶‰åŠå¤šä¸ªå…ƒç´ éå†æ¸²æŸ“ï¼Œ-è¦ä½¿ç”¨-space-between-æ—¶ä¼šå‘ç°ï¼š-æœ€åä¸€è¡Œå…ƒç´ æ•°ä¸æ»¡ä¸€è¡Œä¸ªæ•°æ—¶ä¼šå¹³å‡åˆ†å¸ƒå¼€ï¼Œ-è€Œä¸ä¼šä»å·¦åˆ°å³æ’åˆ—ï¼Œ-ä¸ç¬¦åˆä¸€èˆ¬æ ·å¼è¦æ±‚"><a href="#åœ¨ä½¿ç”¨-flex-è¿›è¡Œå¸ƒå±€æ—¶æ¶‰åŠå¤šä¸ªå…ƒç´ éå†æ¸²æŸ“ï¼Œ-è¦ä½¿ç”¨-space-between-æ—¶ä¼šå‘ç°ï¼š-æœ€åä¸€è¡Œå…ƒç´ æ•°ä¸æ»¡ä¸€è¡Œä¸ªæ•°æ—¶ä¼šå¹³å‡åˆ†å¸ƒå¼€ï¼Œ-è€Œä¸ä¼šä»å·¦åˆ°å³æ’åˆ—ï¼Œ-ä¸ç¬¦åˆä¸€èˆ¬æ ·å¼è¦æ±‚" class="headerlink" title="åœ¨ä½¿ç”¨ flex è¿›è¡Œå¸ƒå±€æ—¶æ¶‰åŠå¤šä¸ªå…ƒç´ éå†æ¸²æŸ“ï¼Œ è¦ä½¿ç”¨ space-between æ—¶ä¼šå‘ç°ï¼š æœ€åä¸€è¡Œå…ƒç´ æ•°ä¸æ»¡ä¸€è¡Œä¸ªæ•°æ—¶ä¼šå¹³å‡åˆ†å¸ƒå¼€ï¼Œ è€Œä¸ä¼šä»å·¦åˆ°å³æ’åˆ—ï¼Œ ä¸ç¬¦åˆä¸€èˆ¬æ ·å¼è¦æ±‚"></a>åœ¨ä½¿ç”¨ <code>flex</code> è¿›è¡Œå¸ƒå±€æ—¶æ¶‰åŠå¤šä¸ªå…ƒç´ éå†æ¸²æŸ“ï¼Œ è¦ä½¿ç”¨ <code>space-between</code> æ—¶ä¼šå‘ç°ï¼š æœ€åä¸€è¡Œå…ƒç´ æ•°ä¸æ»¡ä¸€è¡Œä¸ªæ•°æ—¶ä¼šå¹³å‡åˆ†å¸ƒå¼€ï¼Œ è€Œä¸ä¼šä»å·¦åˆ°å³æ’åˆ—ï¼Œ ä¸ç¬¦åˆä¸€èˆ¬æ ·å¼è¦æ±‚</h3><hr>
<p><strong>å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„åŠæ³•è§£å†³</strong><span id="more"></span></p>
<ul>
<li><code>wells</code> ä¸ºä¸€ä¸ªé•¿åº¦è‹¥å¹²çš„æ•°ç»„ éå†å–å¾—æ¯ä¸ªå…ƒç´ å¹¶æ¸²æŸ“<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;wells&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&#x27;well&#x27;</span> <span class="attr">v-for</span>=<span class="string">&quot;(well, index) in wells&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- ä¸‹é¢è¿™ä¸€è¡Œ é‡ç‚¹ --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;list&quot;</span> </span></span><br><span class="line"><span class="tag">		<span class="attr">v-for</span>=<span class="string">&quot;item in (5 - wells.length % 5)&quot;</span> </span></span><br><span class="line"><span class="tag">		<span class="attr">v-if</span>=<span class="string">&quot;wells.length % 5 &gt; 0&quot;</span></span></span><br><span class="line"><span class="tag">	&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
  <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.wells</span>&#123;</span><br><span class="line">	<span class="attribute">display</span>: flex;</span><br><span class="line">	<span class="attribute">justify-content</span>: space-between;</span><br><span class="line">	<span class="attribute">flex-flow</span>: row wrap;</span><br><span class="line">	<span class="attribute">text-align</span>: center;</span><br><span class="line">	<span class="selector-class">.well</span>&#123;</span><br><span class="line">		<span class="attribute">flex</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">18%</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="selector-class">.list</span> &#123;</span><br><span class="line">		<span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">		<span class="attribute">flex</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">18%</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>Css</tag>
      </tags>
  </entry>
  <entry>
    <title>vueè·¯ç”±é‡å¤ç‚¹å‡»æŠ¥é”™</title>
    <url>/2022/12/27/vue%E8%B7%AF%E7%94%B1%E9%87%8D%E5%A4%8D%E7%82%B9%E5%87%BB%E6%8A%A5%E9%94%99/</url>
    <content><![CDATA[<h3 id="é€šè¿‡-router-push-çš„æ–¹å¼è·³è½¬è·¯ç”±æ—¶ï¼Œè·¯ç”±é‡å¤ç‚¹å‡»ä¼šæŠ¥é”™"><a href="#é€šè¿‡-router-push-çš„æ–¹å¼è·³è½¬è·¯ç”±æ—¶ï¼Œè·¯ç”±é‡å¤ç‚¹å‡»ä¼šæŠ¥é”™" class="headerlink" title="é€šè¿‡ $router.push() çš„æ–¹å¼è·³è½¬è·¯ç”±æ—¶ï¼Œè·¯ç”±é‡å¤ç‚¹å‡»ä¼šæŠ¥é”™"></a>é€šè¿‡ $router.push() çš„æ–¹å¼è·³è½¬è·¯ç”±æ—¶ï¼Œè·¯ç”±é‡å¤ç‚¹å‡»ä¼šæŠ¥é”™</h3><p><b>è§£å†³åŠæ³•</b>ï¼š</p>
<ol>
<li>åœ¨ <code>router</code> çš„ <code>index.js</code> æ–‡ä»¶ä¸­ <code>use router</code> ä¹‹å‰åŠ å…¥ä»¥ä¸‹ä»£ç  : <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//router/index.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Router</span> <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> originalPush = <span class="title class_">Router</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">push</span></span><br><span class="line"><span class="title class_">Router</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">push</span> = <span class="keyword">function</span> <span class="title function_">push</span>(<span class="params">location</span>) &#123;</span><br><span class="line">   <span class="keyword">return</span> originalPush.<span class="title function_">call</span>(<span class="variable language_">this</span>, location).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> err)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>åœ¨ä½¿ç”¨ <code>$router.push()</code> æ—¶ <code>catch</code> ä¸€ä¸‹ <code>err</code> : <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(&#123;&#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;&#125;)</span><br></pre></td></tr></table></figure></li>
</ol>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>mapboxå…³é—­/å–æ¶ˆå›¾å±‚çš„ç‚¹å‡»äº‹ä»¶</title>
    <url>/2022/05/18/mapbox%E5%85%B3%E9%97%AD-%E5%8F%96%E6%B6%88%E5%9B%BE%E5%B1%82%E7%9A%84%E7%82%B9%E5%87%BB%E4%BA%8B%E4%BB%B6/</url>
    <content><![CDATA[<h6 id="mapboxåœ°å›¾å¼€å‘æ—¶ä¼šé‡åˆ°ç»™å›¾å±‚æ·»åŠ å®Œç‚¹å‡»äº‹ä»¶æ— æ³•ç»§ç»­ä½¿ç”¨åŒ¿åå‡½æ•°å–æ¶ˆæ‰æ­¤äº‹ä»¶ï¼Œæ­¤æ—¶ç¨å¾®ä¿®æ”¹å†™æ³•å³å¯"><a href="#mapboxåœ°å›¾å¼€å‘æ—¶ä¼šé‡åˆ°ç»™å›¾å±‚æ·»åŠ å®Œç‚¹å‡»äº‹ä»¶æ— æ³•ç»§ç»­ä½¿ç”¨åŒ¿åå‡½æ•°å–æ¶ˆæ‰æ­¤äº‹ä»¶ï¼Œæ­¤æ—¶ç¨å¾®ä¿®æ”¹å†™æ³•å³å¯" class="headerlink" title="mapboxåœ°å›¾å¼€å‘æ—¶ä¼šé‡åˆ°ç»™å›¾å±‚æ·»åŠ å®Œç‚¹å‡»äº‹ä»¶æ— æ³•ç»§ç»­ä½¿ç”¨åŒ¿åå‡½æ•°å–æ¶ˆæ‰æ­¤äº‹ä»¶ï¼Œæ­¤æ—¶ç¨å¾®ä¿®æ”¹å†™æ³•å³å¯"></a>mapboxåœ°å›¾å¼€å‘æ—¶ä¼šé‡åˆ°ç»™å›¾å±‚æ·»åŠ å®Œç‚¹å‡»äº‹ä»¶æ— æ³•ç»§ç»­ä½¿ç”¨åŒ¿åå‡½æ•°å–æ¶ˆæ‰æ­¤äº‹ä»¶ï¼Œæ­¤æ—¶ç¨å¾®ä¿®æ”¹å†™æ³•å³å¯</h6><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">map.<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>,<span class="string">&#x27;layerId&#x27;</span>,<span class="keyword">function</span>(<span class="params">e</span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(e)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>ğŸ‘‡</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">myClick</span>(<span class="params">e</span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(e)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ³¨å†Œäº‹ä»¶</span></span><br><span class="line">map.<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="string">&#x27;layerId&#x27;</span>, <span class="title function_">myClick</span>(e))</span><br><span class="line"><span class="comment">// å–æ¶ˆäº‹ä»¶</span></span><br><span class="line">map.<span class="title function_">off</span>(<span class="string">&#x27;click&#x27;</span>, <span class="string">&#x27;layerId&#x27;</span>, <span class="title function_">myClick</span>(e))</span><br></pre></td></tr></table></figure>
<h6 id="è¸©å‘ï¼ï¼ï¼-éœ€è¦æ³¨æ„çš„æ˜¯å¦‚æœç”¨-Vue-å¼€å‘ï¼Œä¸Šé¢çš„è‡ªå®šä¹‰-click-äº‹ä»¶ä¸è¦å†™åˆ°-method-ä¸­å»ï¼Œç›´æ¥ä¸-map-on-æ–¹æ³•å¹³çº§å³å¯"><a href="#è¸©å‘ï¼ï¼ï¼-éœ€è¦æ³¨æ„çš„æ˜¯å¦‚æœç”¨-Vue-å¼€å‘ï¼Œä¸Šé¢çš„è‡ªå®šä¹‰-click-äº‹ä»¶ä¸è¦å†™åˆ°-method-ä¸­å»ï¼Œç›´æ¥ä¸-map-on-æ–¹æ³•å¹³çº§å³å¯" class="headerlink" title="è¸©å‘ï¼ï¼ï¼ éœ€è¦æ³¨æ„çš„æ˜¯å¦‚æœç”¨ Vue å¼€å‘ï¼Œä¸Šé¢çš„è‡ªå®šä¹‰ click äº‹ä»¶ä¸è¦å†™åˆ° method:{} ä¸­å»ï¼Œç›´æ¥ä¸ map.on() æ–¹æ³•å¹³çº§å³å¯"></a>è¸©å‘ï¼ï¼ï¼ éœ€è¦æ³¨æ„çš„æ˜¯å¦‚æœç”¨ Vue å¼€å‘ï¼Œä¸Šé¢çš„è‡ªå®šä¹‰ click äº‹ä»¶ä¸è¦å†™åˆ° method:{} ä¸­å»ï¼Œç›´æ¥ä¸ map.on() æ–¹æ³•å¹³çº§å³å¯</h6>]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>Giså¼€å‘</tag>
        <tag>Mapbox</tag>
      </tags>
  </entry>
  <entry>
    <title>å‰ç«¯å±•ç¤ºæ–‡ä»¶æµå›¾ç‰‡</title>
    <url>/2022/04/11/%E5%89%8D%E7%AB%AF%E5%B1%95%E7%A4%BA%E6%96%87%E4%BB%B6%E6%B5%81%E5%9B%BE%E7%89%87/</url>
    <content><![CDATA[<h5 id="ä»£ç å¦‚ä¸‹"><a href="#ä»£ç å¦‚ä¸‹" class="headerlink" title="ä»£ç å¦‚ä¸‹"></a>ä»£ç å¦‚ä¸‹</h5><span id="more"></span>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line"><span class="comment">//éšä¾¿æä¸€ä¸ªå®¹å™¨</span></span><br><span class="line"> <span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">&quot;img1&quot;</span> <span class="attr">:src</span>=<span class="string">&quot;imageUrl1&quot;</span>  <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 700px&quot;</span>/&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"> <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">return</span>&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   <span class="attr">imageUrl1</span>:<span class="string">&#x27;&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"> &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"> <span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="variable language_">this</span>.<span class="title function_">initImage</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"> &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"> <span class="title function_">method</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">initImage</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">   <span class="variable language_">this</span>.<span class="title function_">axiosFun</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        .<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">response</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="keyword">var</span> blob = <span class="keyword">new</span> <span class="title class_">Blob</span>([response]); <span class="comment">//åˆ›å»ºä¸€ä¸ªblobå¯¹è±¡</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="comment">//ä¸‹é¢è¿™ä¸€è¡Œä¸ºé‡ç‚¹ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="variable language_">this</span>.<span class="property">imageUrl1</span> = <span class="variable language_">window</span>.<span class="property">URL</span>.<span class="title function_">createObjectURL</span>(blob);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        .<span class="title function_">catch</span>(<span class="keyword">function</span> (<span class="params">err</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"> &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>Javascript</tag>
      </tags>
  </entry>
  <entry>
    <title>åŸç”ŸHTML-tableè¡¨æ ¼ï¼Œè¶…å‡ºå†…å®¹é¼ æ ‡æ‚¬æµ®å±•ç¤º</title>
    <url>/2022/04/28/%E5%8E%9F%E7%94%9FHTML-table%E8%A1%A8%E6%A0%BC%EF%BC%8C%E8%B6%85%E5%87%BA%E5%86%85%E5%AE%B9%E9%BC%A0%E6%A0%87%E6%82%AC%E6%B5%AE%E5%B1%95%E7%A4%BA/</url>
    <content><![CDATA[<h6 id="æœ€è¿‘é¡¹ç›®ä¸Šé‡åˆ°ä¸€ä¸ªéœ€æ±‚æ˜¯åœ°å›¾ä¸Šçš„-popup-å¼¹çª—é‡Œéœ€è¦åšä¸ªåˆ†é¡µè¡¨æ ¼ï¼Œæ‰€ä»¥è¿™é‡Œåªèƒ½ç”¨åŸç”Ÿ-html-js-æ¥å®ç°ï¼Œåˆå› ä¸º-popup-å®½åº¦éå¸¸æœ‰é™ï¼Œæ‰€ä»¥è¿‡é•¿çš„-cell-éœ€è¦ç”¨â€¦éšè—ï¼Œé¼ æ ‡æ‚¬æµ®å±•ç¤ºå®Œæ•´å†…å®¹ï¼Œçº¯-html-css-å³å¯å®ç°"><a href="#æœ€è¿‘é¡¹ç›®ä¸Šé‡åˆ°ä¸€ä¸ªéœ€æ±‚æ˜¯åœ°å›¾ä¸Šçš„-popup-å¼¹çª—é‡Œéœ€è¦åšä¸ªåˆ†é¡µè¡¨æ ¼ï¼Œæ‰€ä»¥è¿™é‡Œåªèƒ½ç”¨åŸç”Ÿ-html-js-æ¥å®ç°ï¼Œåˆå› ä¸º-popup-å®½åº¦éå¸¸æœ‰é™ï¼Œæ‰€ä»¥è¿‡é•¿çš„-cell-éœ€è¦ç”¨â€¦éšè—ï¼Œé¼ æ ‡æ‚¬æµ®å±•ç¤ºå®Œæ•´å†…å®¹ï¼Œçº¯-html-css-å³å¯å®ç°" class="headerlink" title="æœ€è¿‘é¡¹ç›®ä¸Šé‡åˆ°ä¸€ä¸ªéœ€æ±‚æ˜¯åœ°å›¾ä¸Šçš„ popup å¼¹çª—é‡Œéœ€è¦åšä¸ªåˆ†é¡µè¡¨æ ¼ï¼Œæ‰€ä»¥è¿™é‡Œåªèƒ½ç”¨åŸç”Ÿ html js æ¥å®ç°ï¼Œåˆå› ä¸º popup å®½åº¦éå¸¸æœ‰é™ï¼Œæ‰€ä»¥è¿‡é•¿çš„ cell éœ€è¦ç”¨â€¦éšè—ï¼Œé¼ æ ‡æ‚¬æµ®å±•ç¤ºå®Œæ•´å†…å®¹ï¼Œçº¯ html + css å³å¯å®ç°"></a>æœ€è¿‘é¡¹ç›®ä¸Šé‡åˆ°ä¸€ä¸ªéœ€æ±‚æ˜¯åœ°å›¾ä¸Šçš„ popup å¼¹çª—é‡Œéœ€è¦åšä¸ªåˆ†é¡µè¡¨æ ¼ï¼Œæ‰€ä»¥è¿™é‡Œåªèƒ½ç”¨åŸç”Ÿ html js æ¥å®ç°ï¼Œåˆå› ä¸º popup å®½åº¦éå¸¸æœ‰é™ï¼Œæ‰€ä»¥è¿‡é•¿çš„ cell éœ€è¦ç”¨â€¦éšè—ï¼Œé¼ æ ‡æ‚¬æµ®å±•ç¤ºå®Œæ•´å†…å®¹ï¼Œçº¯ html + css å³å¯å®ç°</h6><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&#x27;moreTable&#x27;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">&#x27;tableCell&#x27;</span> <span class="attr">title</span>=<span class="string">&#x27;å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹&#x27;</span>&gt;</span>å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">&#x27;tableCell&#x27;</span> <span class="attr">titel</span>=<span class="string">&#x27;å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹&#x27;</span>&gt;</span>å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">&#x27;tableCell&#x27;</span> <span class="attr">title</span>=<span class="string">&#x27;å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹&#x27;</span>&gt;</span>å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">td</span> <span class="attr">class</span>=<span class="string">&#x27;tableCell&#x27;</span> <span class="attr">title</span>=<span class="string">&#x27;å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹&#x27;</span>&gt;</span>å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹å†…å®¹<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>
<span id="more"></span>

<h6 id="ğŸ‘†-title-å¯ä»¥ä¿è¯é¼ æ ‡æ‚¬æµ®å±•ç¤ºå†…å®¹ï¼Œå¯ä»¥é€šè¿‡éå†-table-tr-td-åŠ ä¸Šè¿™ä¸ªå±æ€§ï¼Œå¿…é¡»ä¿è¯-title-æ–‡å­—å’Œå†…å®¹åŒºç›¸åŒ"><a href="#ğŸ‘†-title-å¯ä»¥ä¿è¯é¼ æ ‡æ‚¬æµ®å±•ç¤ºå†…å®¹ï¼Œå¯ä»¥é€šè¿‡éå†-table-tr-td-åŠ ä¸Šè¿™ä¸ªå±æ€§ï¼Œå¿…é¡»ä¿è¯-title-æ–‡å­—å’Œå†…å®¹åŒºç›¸åŒ" class="headerlink" title="ğŸ‘† title å¯ä»¥ä¿è¯é¼ æ ‡æ‚¬æµ®å±•ç¤ºå†…å®¹ï¼Œå¯ä»¥é€šè¿‡éå† table tr td åŠ ä¸Šè¿™ä¸ªå±æ€§ï¼Œå¿…é¡»ä¿è¯ title æ–‡å­—å’Œå†…å®¹åŒºç›¸åŒ"></a>ğŸ‘† title å¯ä»¥ä¿è¯é¼ æ ‡æ‚¬æµ®å±•ç¤ºå†…å®¹ï¼Œå¯ä»¥é€šè¿‡éå† table tr td åŠ ä¸Šè¿™ä¸ªå±æ€§ï¼Œå¿…é¡»ä¿è¯ title æ–‡å­—å’Œå†…å®¹åŒºç›¸åŒ</h6><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.moreTable</span>&#123;</span><br><span class="line">  <span class="attribute">table-layout</span>: fixed;</span><br><span class="line">  <span class="attribute">word-break</span>: break-all;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.tableCell</span>&#123;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden; // è¶…å‡ºåŒºåŸŸéšè—</span><br><span class="line">  <span class="attribute">text-overflow</span>: ellipsis;  // æ–‡æœ¬è¶…å‡ºåŒºåŸŸ...å±•ç¤º</span><br><span class="line">  <span class="attribute">white-space</span>: nowrap;  // ä¸æ¢è¡Œ</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="endâ€¦"><a href="#endâ€¦" class="headerlink" title="endâ€¦"></a>endâ€¦</h6>]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>Css</tag>
      </tags>
  </entry>
  <entry>
    <title>åŸºäºwebsocketä½¿ç”¨mapboxç»“åˆthreeboxå®ç°è½¦è¾†å®æ—¶è½¨è¿¹å±•ç¤º</title>
    <url>/2023/03/20/%E5%9F%BA%E4%BA%8Ewebsocket%E4%BD%BF%E7%94%A8mapbox%E7%BB%93%E5%90%88threebox%E5%AE%9E%E7%8E%B0%E8%BD%A6%E8%BE%86%E5%AE%9E%E6%97%B6%E8%BD%A8%E8%BF%B9%E5%B1%95%E7%A4%BA/</url>
    <content><![CDATA[<h5 id="æœ€è¿‘é¡¹ç›®ä¸­æœ‰é‡åˆ°æ ¹æ®å®æ—¶æ¨é€æ•°æ®å±•ç¤ºè½¨è¿¹çš„éœ€æ±‚ï¼Œå¹¶ä¸”éœ€è¦åŠ è½½gltfã€glbæ­¤ç±»3Dæ¨¡å‹ä½œä¸ºè½¦è¾†ç‚¹ï¼Œæ‰€ä»¥åœ¨æ­¤éœ€è¦ç»“åˆthreejsä½†æ˜¯è‹¥ä½¿ç”¨åŸç”Ÿthreejsçš„è¯ç»“åˆåœ°å›¾å¼€å‘ä¸å¤ªå‹å¥½ï¼Œæ‰€ä»¥ä½¿ç”¨threeboxä½œä¸ºæ¡¥æ¢å¯ä»¥å‡å°‘å¾ˆå¤šå¿ƒæ™ºè´Ÿæ‹…ã€‚åœ¨è¿™é‡Œåšä¸ªå°demoè®°å½•ä¸€ä¸‹"><a href="#æœ€è¿‘é¡¹ç›®ä¸­æœ‰é‡åˆ°æ ¹æ®å®æ—¶æ¨é€æ•°æ®å±•ç¤ºè½¨è¿¹çš„éœ€æ±‚ï¼Œå¹¶ä¸”éœ€è¦åŠ è½½gltfã€glbæ­¤ç±»3Dæ¨¡å‹ä½œä¸ºè½¦è¾†ç‚¹ï¼Œæ‰€ä»¥åœ¨æ­¤éœ€è¦ç»“åˆthreejsä½†æ˜¯è‹¥ä½¿ç”¨åŸç”Ÿthreejsçš„è¯ç»“åˆåœ°å›¾å¼€å‘ä¸å¤ªå‹å¥½ï¼Œæ‰€ä»¥ä½¿ç”¨threeboxä½œä¸ºæ¡¥æ¢å¯ä»¥å‡å°‘å¾ˆå¤šå¿ƒæ™ºè´Ÿæ‹…ã€‚åœ¨è¿™é‡Œåšä¸ªå°demoè®°å½•ä¸€ä¸‹" class="headerlink" title="æœ€è¿‘é¡¹ç›®ä¸­æœ‰é‡åˆ°æ ¹æ®å®æ—¶æ¨é€æ•°æ®å±•ç¤ºè½¨è¿¹çš„éœ€æ±‚ï¼Œå¹¶ä¸”éœ€è¦åŠ è½½gltfã€glbæ­¤ç±»3Dæ¨¡å‹ä½œä¸ºè½¦è¾†ç‚¹ï¼Œæ‰€ä»¥åœ¨æ­¤éœ€è¦ç»“åˆthreejsä½†æ˜¯è‹¥ä½¿ç”¨åŸç”Ÿthreejsçš„è¯ç»“åˆåœ°å›¾å¼€å‘ä¸å¤ªå‹å¥½ï¼Œæ‰€ä»¥ä½¿ç”¨threeboxä½œä¸ºæ¡¥æ¢å¯ä»¥å‡å°‘å¾ˆå¤šå¿ƒæ™ºè´Ÿæ‹…ã€‚åœ¨è¿™é‡Œåšä¸ªå°demoè®°å½•ä¸€ä¸‹"></a>æœ€è¿‘é¡¹ç›®ä¸­æœ‰é‡åˆ°æ ¹æ®å®æ—¶æ¨é€æ•°æ®å±•ç¤ºè½¨è¿¹çš„éœ€æ±‚ï¼Œå¹¶ä¸”éœ€è¦åŠ è½½<code>gltf</code>ã€<code>glb</code>æ­¤ç±»3Dæ¨¡å‹ä½œä¸ºè½¦è¾†ç‚¹ï¼Œæ‰€ä»¥åœ¨æ­¤éœ€è¦ç»“åˆ<code>threejs</code><br/>ä½†æ˜¯è‹¥ä½¿ç”¨åŸç”Ÿ<code>threejs</code>çš„è¯ç»“åˆåœ°å›¾å¼€å‘ä¸å¤ªå‹å¥½ï¼Œæ‰€ä»¥ä½¿ç”¨<code>threebox</code>ä½œä¸ºæ¡¥æ¢å¯ä»¥å‡å°‘å¾ˆå¤šå¿ƒæ™ºè´Ÿæ‹…ã€‚åœ¨è¿™é‡Œåšä¸ªå°demoè®°å½•ä¸€ä¸‹</h5><hr>
<ol>
<li>å¼•å…¥æ‰€éœ€çš„ js åº“<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"> <span class="comment">// mapboxgl</span></span><br><span class="line"> &lt;script type=<span class="string">&quot;text/javascript&quot;</span> src=<span class="string">&quot;xxx/mapbox-gl.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;xxx/mapbox-gl.css&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="comment">// threebox</span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;xxx/threebox/threebox.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;xxx/threebox/threebox.css&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="comment">// turf</span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./turf/turf.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
  <span id="more"></span></li>
<li>åˆ›å»ºä¸€ä¸ªåœ°å›¾å®¹å™¨<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;map-container&quot;</span> <span class="attr">id</span>=<span class="string">&quot;map&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>å£°æ˜ä¸€äº›å…¨å±€å˜é‡<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> vehicleModel = <span class="literal">null</span> <span class="comment">// æ¨¡å‹å®ä¾‹</span></span><br><span class="line"><span class="keyword">let</span> socket = <span class="literal">null</span> <span class="comment">// websocketå®ä¾‹</span></span><br><span class="line"><span class="keyword">let</span> idLayer = <span class="literal">null</span> <span class="comment">// è½¦ç‰Œå·å›¾å±‚</span></span><br><span class="line"><span class="keyword">let</span> map = <span class="literal">null</span> <span class="comment">// åœ°å›¾å®ä¾‹</span></span><br><span class="line"><span class="keyword">let</span> wsURL = <span class="string">&#x27;ws://x.x.x.x:xxxx/xxx&#x27;</span> <span class="comment">// websocket url</span></span><br></pre></td></tr></table></figure></li>
<li>æ ¹æ®æ¨é€æ•°æ®æ¸²æŸ“&#x2F;æ›´æ–°æ¨¡å‹å±æ€§<br/><br><strong>æ³¨æ„ï¼šå½“å‰<code>websocket</code>æ¥å£è¿”å›æ¯ä¸€å¸§çš„æ•°æ®æ ¼å¼ä¸º<br/><code>[&#123;      &quot;dateTime&quot;: &quot;2023-02-10 10:08:20:352&quot;,      &quot;originalType&quot;: 10,      &quot;latitude&quot;: 31.4247565,      &quot;picLicense&quot;: &quot;è‹EEHC65&quot;,      &quot;stopNum&quot;: 2,      &quot;speed&quot;: 0.44,      &quot;licenseColor&quot;: 9,      &quot;baseLocation&quot;: 22,      &quot;originalColor&quot;: 3,      &quot;courseAngle&quot;: 286.1,      &quot;id&quot;: &quot;400662900&quot;,      &quot;longitude&quot;: 120.6260196  &#125;,...]</code>ï¼Œ<br/>è¯»å–å±æ€§æ—¶ éœ€è¦æ ¹æ®æ•°æ®æ ¼å¼åšä¿®æ”¹</strong><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åˆå§‹åŒ–åœ°å›¾</span></span><br><span class="line">map = <span class="keyword">new</span> mapboxgl.<span class="title class_">Map</span>(&#123;</span><br><span class="line">	<span class="attr">container</span>: <span class="string">&#x27;map&#x27;</span>,</span><br><span class="line">	<span class="attr">style</span>: <span class="string">&#x27;http://106.120.201.126:14724/style_zpark.json&#x27;</span>,</span><br><span class="line">	<span class="attr">zoom</span>: <span class="number">19</span>,</span><br><span class="line">	<span class="attr">maxZoom</span>: <span class="number">22</span>,</span><br><span class="line">	<span class="attr">minZoom</span>: <span class="number">4</span>,</span><br><span class="line">	<span class="attr">center</span>: [<span class="number">116.28686</span>, <span class="number">40.0518</span>],</span><br><span class="line">	<span class="attr">pitch</span>: <span class="number">65</span>,</span><br><span class="line">	<span class="attr">bearing</span>: <span class="number">15</span>,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// åœ°å›¾åŠ è½½å®Œæˆ -&gt; åˆ›å»º3Dåœºæ™¯ åŠ è½½æ¨¡å‹</span></span><br><span class="line">map.<span class="title function_">on</span>(<span class="string">&#x27;style.load&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">	map.<span class="title function_">on</span>(<span class="string">&#x27;click&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(e)</span><br><span class="line">	&#125;)</span><br><span class="line">	<span class="comment">// æ·»åŠ 3Då›¾å±‚ï¼Œä»¥æ”¯æŒthreeæ¨¡å‹åŠ è½½</span></span><br><span class="line">	map.<span class="title function_">addLayer</span>(&#123;</span><br><span class="line">		<span class="attr">id</span>: <span class="string">&#x27;vehicle3D&#x27;</span>,</span><br><span class="line">		<span class="attr">type</span>: <span class="string">&#x27;custom&#x27;</span>,</span><br><span class="line">		<span class="attr">renderingMode</span>: <span class="string">&#x27;3d&#x27;</span>,</span><br><span class="line">		<span class="attr">onAdd</span>: <span class="function">(<span class="params">map, mbxContext</span>) =&gt;</span> &#123;</span><br><span class="line">			<span class="comment">// threeboxåœºæ™¯</span></span><br><span class="line">			<span class="variable language_">window</span>.<span class="property">tb</span> = <span class="keyword">new</span> <span class="title class_">Threebox</span>(map, mbxContext, &#123;</span><br><span class="line">				<span class="attr">defaultLights</span>: <span class="literal">true</span>,</span><br><span class="line">				<span class="attr">enableSelectingObjects</span>: <span class="literal">false</span>,</span><br><span class="line">			&#125;)</span><br><span class="line">			<span class="comment">// åŠ è½½æ¨¡å‹ è‹¥ä¸ºvueé¡¹ç›®åˆ™å¯¹åº”çš„æ¨¡å‹æ–‡ä»¶éœ€è¦æ”¾åœ¨publicç›®å½•ä¸‹ï¼Œè·¯å¾„çœç•¥publicå³å¯å¼•å…¥</span></span><br><span class="line">			<span class="variable language_">window</span>.<span class="property">tb</span>.<span class="title function_">loadObj</span>(</span><br><span class="line">				&#123;</span><br><span class="line">					<span class="attr">obj</span>: <span class="string">`./car0.gltf`</span>,</span><br><span class="line">					<span class="attr">type</span>: <span class="string">&#x27;gltf&#x27;</span>,</span><br><span class="line">					<span class="attr">units</span>: <span class="string">&#x27;meters&#x27;</span>,</span><br><span class="line">					<span class="attr">scale</span>: <span class="number">0.8</span>,</span><br><span class="line">					<span class="attr">adjustment</span>: &#123; <span class="attr">x</span>: <span class="number">0.5</span>, <span class="attr">y</span>: <span class="number">1</span>, <span class="attr">z</span>: -<span class="number">0.6</span> &#125;,</span><br><span class="line">					<span class="attr">cloned</span>: <span class="literal">true</span>,</span><br><span class="line">				&#125;,</span><br><span class="line">				<span class="function">(<span class="params">model</span>) =&gt;</span> &#123;</span><br><span class="line">					vehicleModel = model</span><br><span class="line">					<span class="title function_">initWs</span>()</span><br><span class="line">				&#125;</span><br><span class="line">			)</span><br><span class="line">		&#125;,</span><br><span class="line">		<span class="attr">render</span>: <span class="keyword">function</span> (<span class="params">gl, matrix</span>) &#123;</span><br><span class="line">			<span class="variable language_">window</span>.<span class="property">tb</span>.<span class="title function_">update</span>()</span><br><span class="line">		&#125;,</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> lastLocation = [] <span class="comment">// wsä¸Šä¸€å¸§æ•°æ®</span></span><br><span class="line"><span class="keyword">let</span> vehicleModels = [] <span class="comment">// å­˜æ”¾å½“å‰åœ°å›¾ä¸­çš„è½¦è¾†æ¨¡å‹</span></span><br><span class="line"><span class="keyword">let</span> currentLocation = [] <span class="comment">// wså½“å‰å¸§æ•°æ®</span></span><br><span class="line"><span class="comment">// åˆå§‹åŒ–websocket</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">initWs</span>(<span class="params"></span>) &#123;</span><br><span class="line">	<span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="title class_">WebSocket</span> === <span class="literal">undefined</span>) &#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒsocket&#x27;</span>)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		socket = <span class="keyword">new</span> <span class="title class_">WebSocket</span>(wsURL)</span><br><span class="line">		socket.<span class="property">onopen</span> = <span class="function">(<span class="params">e</span>) =&gt;</span> <span class="title function_">onOpen</span>(e)</span><br><span class="line">		socket.<span class="property">onmessage</span> = <span class="function">(<span class="params">e</span>) =&gt;</span> <span class="title function_">onMsg</span>(e)</span><br><span class="line">		socket.<span class="property">onerror</span> = <span class="function">(<span class="params">e</span>) =&gt;</span> <span class="title function_">onError</span>(e)</span><br><span class="line">		socket.<span class="property">onclose</span> = <span class="function">(<span class="params">e</span>) =&gt;</span> <span class="title function_">onClose</span>(e)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// websocketè¿æ¥æˆåŠŸ å‘é€å‰åç«¯çº¦å®šå¥½çš„æ•°æ®æ¿€æ´»æ¨é€</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">onOpen</span>(<span class="params">e</span>) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;onOpen&#x27;</span>, e)</span><br><span class="line">	e.<span class="property">target</span>.<span class="title function_">send</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(&#123; <span class="attr">dataType</span>: <span class="string">&#x27;1&#x27;</span>, <span class="attr">leftDownXy</span>: <span class="string">&#x27;123,33&#x27;</span>, <span class="attr">rightUpXy</span>: <span class="string">&#x27;123,33&#x27;</span>, <span class="attr">level</span>: <span class="number">17</span> &#125;))</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ›´æ–°æ¨¡å‹å±æ€§</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">setModel</span>(<span class="params">model, options</span>) &#123;</span><br><span class="line">	<span class="comment">// ä¿®æ”¹æ¨¡å‹æè´¨é¢œè‰² </span></span><br><span class="line">	model.<span class="title function_">traverse</span>(<span class="function">(<span class="params">child</span>) =&gt;</span> &#123;</span><br><span class="line">		<span class="comment">// æ ¹æ®è‡ªå·±æ¨¡å‹æè´¨åç§°é…ç½®ï¼Œæˆ‘çš„æ¨¡å‹è½¦è¾†é¢œè‰²ç”±name_19æè´¨æ§åˆ¶ï¼Œæ‰€ä»¥è¿™ä¹ˆå†™</span></span><br><span class="line">		<span class="keyword">if</span> (child.<span class="property">isMesh</span> &amp;&amp; child.<span class="property">name</span>.<span class="title function_">includes</span>(<span class="string">&quot;_19&quot;</span>)) &#123;</span><br><span class="line">			child.<span class="property">material</span> = child.<span class="property">material</span>.<span class="title function_">clone</span>();</span><br><span class="line">			child.<span class="property">material</span>.<span class="property">color</span>.<span class="title function_">set</span>(<span class="string">&#x27;#000&#x27;</span>); <span class="comment">// è¿™é‡Œæˆ‘é»˜è®¤ç»™ä¸ªé»‘è‰²ï¼Œå¯ä»¥æ ¹æ®optionsä¸­è‡ªå·±æ¨é€çš„æ•°æ®å±æ€§æˆ–è€…å­—å…¸åŒ¹é…èµ‹å€¼é¢œè‰²</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;);</span><br><span class="line">	<span class="comment">// åŠ åˆ¤æ–­é˜²æ­¢è·ç¦»è¿‡è¿‘æ¨¡å‹æŠ–åŠ¨</span></span><br><span class="line">	<span class="keyword">if</span> (</span><br><span class="line">		turf.<span class="title function_">distance</span>(</span><br><span class="line">			[model.<span class="property">userData</span>.<span class="property">data</span>.<span class="property">longitude</span>, model.<span class="property">userData</span>.<span class="property">data</span>.<span class="property">latitude</span>],</span><br><span class="line">			[options.<span class="property">longitude</span>, options.<span class="property">latitude</span>],</span><br><span class="line">			&#123; <span class="attr">units</span>: <span class="string">&#x27;kilometers&#x27;</span> &#125;</span><br><span class="line">		) &gt; <span class="number">0.0005</span> ||</span><br><span class="line">		options.<span class="property">dill</span> === <span class="string">&#x27;add&#x27;</span></span><br><span class="line">	) &#123;</span><br><span class="line">		model.<span class="title function_">setCoords</span>([options.<span class="property">longitude</span>, options.<span class="property">latitude</span>]) <span class="comment">// è®¾ç½®ç»çº¬åº¦</span></span><br><span class="line">		model.<span class="title function_">setRotation</span>(&#123; <span class="attr">x</span>: <span class="number">90</span>, <span class="attr">y</span>: <span class="number">360</span> - options.<span class="property">courseAngle</span> - <span class="number">90</span>, <span class="attr">z</span>: <span class="number">0</span> &#125;)  <span class="comment">// è®¾ç½®è½¬å‘è§’ï¼Œæ ¹æ®è‡ªå·±æ¨é€æ•°æ®çš„è§’åº¦è°ƒæ•´è®¡ç®—</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ ¹æ®èšåˆåçš„æ•°æ®å¤„ç†æ¨¡å‹å¢åˆ æ”¹</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">addDelUpdateVehicleModels</span>(<span class="params">allData</span>) &#123;</span><br><span class="line">	<span class="comment">// debugger</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> allData) &#123;</span><br><span class="line">		<span class="comment">// æ–°å¢</span></span><br><span class="line">		<span class="keyword">if</span> (item.<span class="property">dill</span> === <span class="string">&#x27;add&#x27;</span>) &#123;</span><br><span class="line">			<span class="keyword">let</span> model = vehicleModel.<span class="title function_">duplicate</span>()</span><br><span class="line">			<span class="title function_">setModel</span>(model, item)</span><br><span class="line">			<span class="variable language_">window</span>.<span class="property">tb</span>.<span class="title function_">add</span>(model)</span><br><span class="line">			vehicleModels.<span class="title function_">push</span>(model)</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">let</span> model <span class="keyword">of</span> vehicleModels) &#123;</span><br><span class="line">			<span class="comment">// åˆ é™¤</span></span><br><span class="line">			<span class="keyword">if</span> (item.<span class="property">dill</span> === <span class="string">&#x27;del&#x27;</span>) &#123;</span><br><span class="line">				<span class="keyword">if</span> (model.<span class="property">userData</span>.<span class="property">data</span>.<span class="property">id</span> === item.<span class="property">id</span>) &#123;</span><br><span class="line">					<span class="comment">// traverseéå†å±æ€§åˆ é™¤ ï¼Œè¦ä¸ä¼šä¸€ç›´å ç”¨å†…å­˜</span></span><br><span class="line">					model.<span class="title function_">traverse</span>(<span class="function">(<span class="params">child</span>) =&gt;</span> &#123;</span><br><span class="line">						<span class="keyword">if</span> (child.<span class="property">type</span> === <span class="string">&#x27;Mesh&#x27;</span>) &#123;</span><br><span class="line">							child.<span class="property">geometry</span>.<span class="title function_">dispose</span>()</span><br><span class="line">							child.<span class="property">material</span>.<span class="title function_">dispose</span>()</span><br><span class="line">						&#125;</span><br><span class="line">					&#125;)</span><br><span class="line">					<span class="variable language_">window</span>.<span class="property">tb</span>.<span class="title function_">remove</span>(model)</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">// æ›´æ–°</span></span><br><span class="line">			<span class="keyword">if</span> (item.<span class="property">dill</span> === <span class="string">&#x27;com&#x27;</span>) &#123;</span><br><span class="line">				<span class="keyword">if</span> (model.<span class="property">userData</span>.<span class="property">data</span>.<span class="property">id</span> === item.<span class="property">id</span>) &#123;</span><br><span class="line">					<span class="title function_">setModel</span>(model, item)</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ ¼å¼åŒ–listä¸ºgeojsonæ•°æ®</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">formatArray2Geojson</span>(<span class="params">array</span>) &#123;</span><br><span class="line">	<span class="keyword">let</span> source = &#123;</span><br><span class="line">		<span class="attr">type</span>: <span class="string">&#x27;FeatureCollection&#x27;</span>,</span><br><span class="line">		<span class="attr">features</span>: [],</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> array) &#123;</span><br><span class="line">		source.<span class="property">features</span>.<span class="title function_">push</span>(&#123;</span><br><span class="line">			<span class="attr">type</span>: <span class="string">&#x27;Feature&#x27;</span>,</span><br><span class="line">			<span class="attr">properties</span>: item,</span><br><span class="line">			<span class="attr">geometry</span>: &#123;</span><br><span class="line">				<span class="attr">type</span>: <span class="string">&#x27;Point&#x27;</span>,</span><br><span class="line">				<span class="attr">coordinates</span>: [</span><br><span class="line">					item.<span class="property">longitude</span> || item.<span class="property">x</span> || item.<span class="property">xy</span>.<span class="title function_">split</span>(<span class="string">&#x27;,&#x27;</span>)[<span class="number">0</span>],</span><br><span class="line">					item.<span class="property">latitude</span> || item.<span class="property">y</span> || item.<span class="property">xy</span>.<span class="title function_">split</span>(<span class="string">&#x27;,&#x27;</span>)[<span class="number">1</span>],</span><br><span class="line">				],</span><br><span class="line">			&#125;,</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> source</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ¯”è¾ƒå‰åä¸¤å¸§æ•°æ®å¹¶èšåˆ</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">diff</span>(<span class="params">oldData, newData</span>) &#123;</span><br><span class="line">	<span class="keyword">const</span> add = newData.<span class="title function_">filter</span>(<span class="function">(<span class="params">e</span>) =&gt;</span> !oldData.<span class="title function_">find</span>(<span class="function">(<span class="params">c</span>) =&gt;</span> c.<span class="property">id</span> === e.<span class="property">id</span>))</span><br><span class="line">	<span class="keyword">const</span> del = oldData.<span class="title function_">filter</span>(<span class="function">(<span class="params">e</span>) =&gt;</span> !newData.<span class="title function_">find</span>(<span class="function">(<span class="params">c</span>) =&gt;</span> c.<span class="property">id</span> === e.<span class="property">id</span>))</span><br><span class="line">	<span class="keyword">const</span> com = newData.<span class="title function_">filter</span>(<span class="function">(<span class="params">e</span>) =&gt;</span> oldData.<span class="title function_">find</span>(<span class="function">(<span class="params">c</span>) =&gt;</span> c.<span class="property">id</span> === e.<span class="property">id</span>))</span><br><span class="line">	add.<span class="title function_">forEach</span>(<span class="function">(<span class="params">a</span>) =&gt;</span> (a.<span class="property">dill</span> = <span class="string">&#x27;add&#x27;</span>))</span><br><span class="line">	del.<span class="title function_">forEach</span>(<span class="function">(<span class="params">d</span>) =&gt;</span> (d.<span class="property">dill</span> = <span class="string">&#x27;del&#x27;</span>))</span><br><span class="line">	com.<span class="title function_">forEach</span>(<span class="function">(<span class="params">c</span>) =&gt;</span> (c.<span class="property">dill</span> = <span class="string">&#x27;com&#x27;</span>))</span><br><span class="line">	<span class="keyword">return</span> [...add, ...del, ...com]</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// websocketæ¥æ”¶æ¶ˆæ¯å›è°ƒ</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">onMsg</span>(<span class="params">data</span>) &#123;</span><br><span class="line">	<span class="keyword">let</span> dataArray = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(data.<span class="property">data</span>)</span><br><span class="line">	<span class="keyword">let</span> newArray = dataArray.<span class="title function_">filter</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> item.<span class="property">type</span> != <span class="number">4</span> &amp;&amp; item.<span class="property">type</span> != <span class="number">5</span> &amp;&amp; item.<span class="property">type</span> != <span class="number">6</span></span><br><span class="line">	&#125;)</span><br><span class="line">	<span class="keyword">let</span> geojsonData = <span class="title function_">formatArray2Geojson</span>(newArray)</span><br><span class="line">	<span class="comment">// æ¯ä¸ªæ¨¡å‹ä¸Šæ·»åŠ å¯¹åº”çš„è½¦ç‰Œå·mapbox 2Då›¾å±‚ï¼Œå¹¶éšç€æ¨é€æ•°æ®æ›´æ–°</span></span><br><span class="line">	<span class="keyword">if</span> (!map.<span class="title function_">getSource</span>(<span class="string">&#x27;vehicle_data&#x27;</span>)) &#123;</span><br><span class="line">		map.<span class="title function_">addSource</span>(<span class="string">&#x27;vehicle_data&#x27;</span>, &#123; <span class="attr">type</span>: <span class="string">&#x27;geojson&#x27;</span>, <span class="attr">data</span>: geojsonData &#125;)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		map.<span class="title function_">getSource</span>(<span class="string">&#x27;vehicle_data&#x27;</span>).<span class="title function_">setData</span>(geojsonData)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (!map.<span class="title function_">getLayer</span>(<span class="string">&#x27;idLayer&#x27;</span>)) &#123;</span><br><span class="line">		map.<span class="title function_">addLayer</span>(&#123;</span><br><span class="line">			<span class="attr">id</span>: <span class="string">&#x27;idLayer&#x27;</span>,</span><br><span class="line">			<span class="attr">type</span>: <span class="string">&#x27;symbol&#x27;</span>,</span><br><span class="line">			<span class="attr">source</span>: <span class="string">&#x27;vehicle_data&#x27;</span>,</span><br><span class="line">			<span class="attr">layout</span>: &#123;</span><br><span class="line">				<span class="string">&#x27;text-field&#x27;</span>: [<span class="string">&#x27;get&#x27;</span>, <span class="string">&#x27;id&#x27;</span>],</span><br><span class="line">				<span class="string">&#x27;text-size&#x27;</span>: <span class="number">12</span>,</span><br><span class="line">				<span class="string">&#x27;text-allow-overlap&#x27;</span>: <span class="literal">true</span>,</span><br><span class="line">			&#125;,</span><br><span class="line">			<span class="attr">paint</span>: &#123;</span><br><span class="line">				<span class="string">&#x27;text-color&#x27;</span>: <span class="string">&#x27;#fff&#x27;</span>,</span><br><span class="line">				<span class="string">&#x27;text-halo-blur&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">				<span class="string">&#x27;text-halo-color&#x27;</span>: <span class="string">&#x27;#01309b&#x27;</span>,</span><br><span class="line">				<span class="string">&#x27;text-halo-width&#x27;</span>: <span class="number">3</span>,</span><br><span class="line">			&#125;,</span><br><span class="line">		&#125;)</span><br><span class="line">		map.<span class="title function_">setLayoutProperty</span>(<span class="string">&#x27;idLayer&#x27;</span>, <span class="string">&#x27;visibility&#x27;</span>, <span class="string">&#x27;visible&#x27;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	currentLocation = newArray</span><br><span class="line">	<span class="keyword">let</span> allData = <span class="title function_">diff</span>(lastLocation, currentLocation)</span><br><span class="line">	lastLocation = newArray</span><br><span class="line">	<span class="title function_">addDelUpdateVehicleModels</span>(allData)</span><br><span class="line">	<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;intervalTime&#x27;</span>).<span class="property">innerText</span> = newArray[<span class="number">0</span>].<span class="property">dateTime</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// websocketé”™è¯¯...</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">onError</span>(<span class="params">e</span>) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;onError&#x27;</span>, e)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// websocketå…³é—­...</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">onClose</span>(<span class="params">e</span>) &#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;onClose&#x27;</span>, e)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>é€»è¾‘ä»£ç æ³¨é‡Šå·²ç»å¾ˆå®Œå¤‡äº†ï¼Œè¿˜æ˜¯ä¸æ¸…æ¥šçš„è¯å¯¹åº”<code>api</code>å¯ä»¥å‚è€ƒ<code>mapbox</code>åŠ<code>threebox</code>æ–‡æ¡£å³å¯ <code>^_^</code></li>
</ol>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>Mapbox</tag>
        <tag>Threejs</tag>
        <tag>Websocket</tag>
      </tags>
  </entry>
  <entry>
    <title>è®°ä¸€æ¬¡Cesiumçš„propertyæ’å€¼ç”¨æ³•</title>
    <url>/2023/04/23/%E8%AE%B0%E4%B8%80%E6%AC%A1Cesium%E7%9A%84property%E6%8F%92%E5%80%BC%E7%94%A8%E6%B3%95/</url>
    <content><![CDATA[<h4 id="cesium-ä¸­æè¿°-entity-éšæ—¶é—´åŠ¨æ€å˜åŒ–æ—¶ï¼Œå¿…ç„¶è¦ç”¨åˆ°-property-æ’å€¼ï¼Œæ¥å¯¹åº”æ—¶é—´å’Œå®ä½“çš„çŠ¶æ€ï¼Œæœ€è¿‘æœ‰ç”¨åˆ°è¿™ä¸ªå±æ€§ï¼Œè®°å½•ä¸€ä¸‹ï¼š"><a href="#cesium-ä¸­æè¿°-entity-éšæ—¶é—´åŠ¨æ€å˜åŒ–æ—¶ï¼Œå¿…ç„¶è¦ç”¨åˆ°-property-æ’å€¼ï¼Œæ¥å¯¹åº”æ—¶é—´å’Œå®ä½“çš„çŠ¶æ€ï¼Œæœ€è¿‘æœ‰ç”¨åˆ°è¿™ä¸ªå±æ€§ï¼Œè®°å½•ä¸€ä¸‹ï¼š" class="headerlink" title="cesium ä¸­æè¿° entity éšæ—¶é—´åŠ¨æ€å˜åŒ–æ—¶ï¼Œå¿…ç„¶è¦ç”¨åˆ° property æ’å€¼ï¼Œæ¥å¯¹åº”æ—¶é—´å’Œå®ä½“çš„çŠ¶æ€ï¼Œæœ€è¿‘æœ‰ç”¨åˆ°è¿™ä¸ªå±æ€§ï¼Œè®°å½•ä¸€ä¸‹ï¼š"></a><code>cesium</code> ä¸­æè¿° <code>entity</code> éšæ—¶é—´åŠ¨æ€å˜åŒ–æ—¶ï¼Œå¿…ç„¶è¦ç”¨åˆ° property æ’å€¼ï¼Œæ¥å¯¹åº”æ—¶é—´å’Œå®ä½“çš„çŠ¶æ€ï¼Œæœ€è¿‘æœ‰ç”¨åˆ°è¿™ä¸ªå±æ€§ï¼Œè®°å½•ä¸€ä¸‹ï¼š</h4><p><strong>ä¸€èˆ¬å¸¸ç”¨çš„æ’å€¼æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯è¿ç»­å€¼æ’å€¼<code>SampleProperty</code>ï¼Œå³ç»™ä¸ªæ—¶é—´æ®µå’Œä¸€ä¸ªçŠ¶æ€åŒºé—´ï¼Œ<code>cesium</code>ä¼šåœ¨åŒºé—´å†…è‡ªå·±åšå¹³æ»‘å¤„ç†ï¼›<br>ä¸€ç§æ˜¯æšä¸¾å€¼æ’å€¼<code>TimeIntervalCollectionProperty</code>ï¼Œå³ä¸€ä¸ªæ—¶é—´æ®µå¯¹åº”ä¸€ä¸ªçŠ¶æ€ï¼Œä¸ä¼šåšå¹³æ»‘æ’å€¼ã€‚</strong></p>
<p><em>å‡è®¾ç°åœ¨æœ‰ä¸€ä¸ªentityï¼š</em></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> myEntity = vie.<span class="property">entities</span>.<span class="title function_">add</span>(&#123;</span><br><span class="line">  <span class="attr">id</span>: options.<span class="property">id</span>,</span><br><span class="line">  <span class="attr">model</span>: &#123;</span><br><span class="line">    <span class="attr">uri</span>: <span class="string">`gltf/car.gltf`</span>,</span><br><span class="line">    <span class="attr">scale</span>: <span class="number">0.8</span>,</span><br><span class="line">    <span class="attr">minimumPixelSize</span>: <span class="number">32</span>,</span><br><span class="line">    <span class="attr">color</span>: <span class="title class_">Cesium</span>.<span class="property">Color</span>.<span class="title function_">fromCssColorString</span>(<span class="string">&#x27;#ff0&#x27;</span>),</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸‹çš„<code>source</code>éƒ½æ˜¯è‹¥å¹²ä¸ª <code>&#123;æ—¶é—´ï¼Œå¯¹åº”å€¼ç»„æˆçš„å¯¹è±¡&#125;</code> ç»„æˆçš„æ•°ç»„list</p>
<span id="more"></span>

<ol>
<li><code>SampleProperty</code>ç”¨æ³•ï¼š</li>
</ol>
<p><em>é¦–å…ˆæ˜¯ç‰¹æ®Šçš„<code>SampledProperty</code>ï¼Œä½¿ç”¨<code>SampledPositionProperty</code>ï¼Œæ–¹ä¾¿è®¾ç½®entityçš„ä½ç½®</em></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> propertyPosition = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">SampledPositionProperty</span>();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> source) &#123;</span><br><span class="line">  <span class="keyword">let</span> time = <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">fromDate</span>(<span class="keyword">new</span> <span class="title class_">Date</span>(item.<span class="property">timeStamp</span>));</span><br><span class="line">  <span class="keyword">let</span> position = <span class="title class_">Cesium</span>.<span class="property">Cartesian3</span>.<span class="title function_">fromDegrees</span>(item.<span class="property">longitude</span>, item.<span class="property">latitude</span>, -<span class="number">1</span>);</span><br><span class="line">  <span class="comment">// ä¸ºæ¯ä¸ª timeStamp æ·»åŠ  ç»çº¬åº¦ä½ç½®ä¿¡æ¯ï¼Œä»¥å®ç°entityå¹³æ»‘ç§»åŠ¨</span></span><br><span class="line">  propertyPosition.<span class="title function_">addSample</span>(time, position);</span><br><span class="line">&#125;</span><br><span class="line">myEntity.<span class="property">position</span> = propertyPosition</span><br></pre></td></tr></table></figure>

<p><em>å…¶æ¬¡æ˜¯æ™®é€šçš„<code>SampledProperty</code>ï¼Œå¯ä»¥éšæ„è®¾ç½®è‡ªå®šä¹‰çš„numberå€¼ï¼Œå¹³æ»‘çº¿æ€§å¤„ç†</em></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> customProperty = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">SampledProperty</span>(<span class="title class_">Number</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; source.<span class="property">length</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">let</span> time = <span class="title class_">Cesium</span>.<span class="property">JulianDate</span>.<span class="title function_">fromDate</span>(<span class="keyword">new</span> <span class="title class_">Date</span>(source[i].<span class="property">timeStamp</span>));</span><br><span class="line">  customProperty.<span class="title function_">addSample</span>(time, source[i].<span class="property">speed</span>)</span><br><span class="line">&#125;</span><br><span class="line">myEntity.<span class="property">customProperty</span> = customProperty</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><code>TimeIntervalCollectionProperty</code>ç”¨æ³•ï¼š</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> property = <span class="keyword">new</span> <span class="title class_">Cesium</span>.<span class="title class_">TimeIntervalCollectionProperty</span>(<span class="title class_">Number</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; source.<span class="property">length</span> - <span class="number">1</span>; i++) &#123;</span><br><span class="line">  <span class="comment">// ä¸ºæ¯ä¸ªæ—¶é—´æ®µæ·»åŠ ä¸€ä¸ªå€¼å±æ€§ ï¼ˆtimeIntervalè¯•äº†ä¸‹ç”¨fromDateä¸ç”Ÿæ•ˆï¼Œåªèƒ½ç”¨Iso8601è½¬ï¼Œåç»­å†ç ”ç©¶ä¸‹ä¸ºå•¥åˆ°åº•å¯ä¸å¯ä»¥ï¼‰</span></span><br><span class="line">  property.<span class="property">intervals</span>.<span class="title function_">addInterval</span>(</span><br><span class="line">    <span class="title class_">Cesium</span>.<span class="property">TimeInterval</span>.<span class="title function_">fromIso8601</span>(&#123;</span><br><span class="line">      <span class="attr">iso8601</span>: <span class="string">`<span class="subst">$&#123;<span class="keyword">new</span> <span class="built_in">Date</span>(source[i].timeStamp).toISOString()&#125;</span>/<span class="subst">$&#123;<span class="keyword">new</span> <span class="built_in">Date</span>(source[i + <span class="number">1</span>].timeStamp).toISOString()&#125;</span>`</span>,</span><br><span class="line">      <span class="attr">isStartIncluded</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">isStopIncluded</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">data</span>: source[i].<span class="property">courseAngle</span></span><br><span class="line">    &#125;)</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line">myEntity.<span class="property">timeIntervalProperty</span> = property</span><br></pre></td></tr></table></figure>

<hr>
<p><strong>ä¸Šè¿°å„ç§<code>property</code>èµ‹å€¼ç»™<code>entity</code>åï¼Œç›‘å¬<code>clock</code>æ—¶é—´å˜åŒ–å–åˆ°å¯¹åº”çš„å€¼ï¼Œå³å¯è¿›è¡Œå¯¹åº”ä¸šåŠ¡é€»è¾‘çš„å®ç°</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">viewer.<span class="property">clock</span>.<span class="property">onTick</span>.<span class="title function_">addEventListener</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// let getProperty = myEntity.customProperty.getValue(viewer.clock.currentTime)</span></span><br><span class="line">  <span class="comment">// let getProperty = myEntity.timeIntervalProperty.getValue(viewer.clock.currentTime)</span></span><br><span class="line">  <span class="keyword">let</span> getProperty = myEntity.<span class="property">position</span>.<span class="title function_">getValue</span>(viewer.<span class="property">clock</span>.<span class="property">currentTime</span>)</span><br><span class="line">  <span class="comment">// todo</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<hr>
<p><em>è‡³äºæ··åˆçš„propertyï¼š<code>CompositeProperty</code><br>ï¼Œå³æŠŠä¸Šè¿°ä¸¤ç§propertyæ··åˆåˆ°ä¸€ä¸ªpropertyçš„ç”¨æ³•ï¼Œå®ç°éƒ¨åˆ†æ—¶é—´æ®µçº¿æ€§å˜åŒ–ï¼Œéƒ¨åˆ†æ—¶é—´æ®µè·³è·ƒæšä¸¾å˜åŒ–ï¼Œç†è®ºä¸Šæä¾›äº†å¯¹åº”çš„apiï¼Œæ˜¯å¯ä»¥å®ç°çš„ï¼Œç”±äºæš‚æ—¶æ²¡ç”¨åˆ°ï¼Œä¸åšè®°å½•ï¼Œåç»­é‡åˆ°å†ç ”ç©¶ã€‚ã€‚ã€‚</em></p>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>Cesium</tag>
      </tags>
  </entry>
  <entry>
    <title>è®°å½•ä¸€ä¸‹å¥½ç”¨çš„JsæŠ€å·§ï¼ˆæ–°æ‰‹å‘å¤§ä½¬å‹¿å–·ï¼‰</title>
    <url>/2022/04/20/%E8%AE%B0%E5%BD%95%E4%B8%80%E4%B8%8B%E5%A5%BD%E7%94%A8%E7%9A%84Js%E6%8A%80%E5%B7%A7%EF%BC%88%E6%96%B0%E6%89%8B%E5%90%91%E5%A4%A7%E4%BD%AC%E5%8B%BF%E5%96%B7%EF%BC%89/</url>
    <content><![CDATA[<h6 id="ä»æ•°ç»„ä¸­åˆ é™¤é‡å¤é¡¹"><a href="#ä»æ•°ç»„ä¸­åˆ é™¤é‡å¤é¡¹" class="headerlink" title="ä»æ•°ç»„ä¸­åˆ é™¤é‡å¤é¡¹"></a>ä»æ•°ç»„ä¸­åˆ é™¤é‡å¤é¡¹</h6><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> deletedArr = [...<span class="keyword">new</span> <span class="title class_">Set</span>(arr)]</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<h6 id="æ•°ç»„æ’åº"><a href="#æ•°ç»„æ’åº" class="headerlink" title="æ•°ç»„æ’åº"></a>æ•°ç»„æ’åº</h6><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title function_">sortFunction</span> = (<span class="params">a, b</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> a - b</span><br><span class="line">&#125;</span><br><span class="line">[<span class="number">3</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">4</span>].<span class="title function_">sort</span>(sortFunction) <span class="comment">//[1, 2, 2, 3, 4]</span></span><br></pre></td></tr></table></figure>

<h6 id="ä»å¯¹è±¡æ•°ç»„ä¸­å–å¾—æŸå±æ€§ä¸ºæŒ‡å®šå€¼çš„å…ƒç´ "><a href="#ä»å¯¹è±¡æ•°ç»„ä¸­å–å¾—æŸå±æ€§ä¸ºæŒ‡å®šå€¼çš„å…ƒç´ " class="headerlink" title="ä»å¯¹è±¡æ•°ç»„ä¸­å–å¾—æŸå±æ€§ä¸ºæŒ‡å®šå€¼çš„å…ƒç´ "></a>ä»å¯¹è±¡æ•°ç»„ä¸­å–å¾—æŸå±æ€§ä¸ºæŒ‡å®šå€¼çš„å…ƒç´ </h6><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> data = [&#123;<span class="attr">type</span>:<span class="string">&#x27;test0&#x27;</span>, <span class="attr">name</span>:<span class="string">&#x27;name1&#x27;</span>&#125;,&#123;<span class="attr">type</span>:<span class="string">&#x27;test1&#x27;</span>, <span class="attr">name</span>:<span class="string">&#x27;name2&#x27;</span>&#125;,&#123;<span class="attr">type</span>:<span class="string">&#x27;test1&#x27;</span>, <span class="attr">name</span>:<span class="string">&#x27;name3&#x27;</span>&#125;]</span><br></pre></td></tr></table></figure>

<p>1. </p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> findSingle = data.<span class="title function_">find</span>(<span class="function">(<span class="params">dataItem</span>) =&gt;</span> &#123; <span class="comment">//æ³¨æ„ï¼š.find()æ–¹æ³•ä¼šè¿”å›æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå³ä½¿æœ‰å¤šä¸ªç¬¦åˆæ¡ä»¶çš„</span></span><br><span class="line">  <span class="keyword">return</span> (dataItem.<span class="property">type</span> === <span class="string">&quot;test1&quot;</span>)</span><br><span class="line">&#125; <span class="comment">// [&#123;type:&#x27;test1&#x27;, name:&#x27;name2&#x27;&#125;]</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>2. </p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> filterArr = data.<span class="title function_">filter</span>(<span class="function">(<span class="params">item</span>)=&gt;</span>&#123; <span class="comment">// .filter()æ–¹æ³•ä¼šç­›é€‰å‡ºæ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„å…ƒç´ ï¼Œå¹¶ç»„åˆæˆæ–°çš„æ•°ç»„</span></span><br><span class="line">  <span class="keyword">return</span> item.<span class="property">type</span> == <span class="string">&#x27;test1&#x27;</span></span><br><span class="line">&#125;) <span class="comment">// [&#123;type:&#x27;test1&#x27;, name:&#x27;name2&#x27;&#125;, &#123;type:&#x27;test1&#x27;, name:&#x27;name3&#x27;&#125;]</span></span><br></pre></td></tr></table></figure>

<p><strong>åŒºåˆ«</strong><br>find() è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ <br>filter() è¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰é€šè¿‡æµ‹è¯•å‡½æ•°çš„å…ƒç´ çš„æ–°æ•°ç»„</p>
<h6 id="äºŒç»´æ•°ç»„ä¸€ç»´å±•å¼€-reduceæ–¹æ³•"><a href="#äºŒç»´æ•°ç»„ä¸€ç»´å±•å¼€-reduceæ–¹æ³•" class="headerlink" title="äºŒç»´æ•°ç»„ä¸€ç»´å±•å¼€(reduceæ–¹æ³•)"></a>äºŒç»´æ•°ç»„ä¸€ç»´å±•å¼€(reduceæ–¹æ³•)</h6><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [[<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>],[<span class="number">3</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]]</span><br><span class="line"><span class="keyword">var</span> newArr = arr.<span class="title function_">reduce</span>(<span class="keyword">function</span>(<span class="params">a, b</span>)&#123;</span><br><span class="line">  <span class="keyword">return</span> a.<span class="title function_">concat</span>(b)</span><br><span class="line">&#125;, [])</span><br><span class="line"><span class="comment">// newArr: [1,2,4,3,3,4,5]</span></span><br></pre></td></tr></table></figure>

<p>&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;</p>
<p>å¾…ç»­â€¦â€¦</p>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>ES6</tag>
      </tags>
  </entry>
  <entry>
    <title>è®°å½•Promise.allç”¨æ³•</title>
    <url>/2022/05/07/%E8%AE%B0%E5%BD%95Promise-all%E7%94%A8%E6%B3%95/</url>
    <content><![CDATA[<h6 id="åœºæ™¯ï¼šé¡µé¢ä¸­å¤šä¸ªè€—æ—¶è¯·æ±‚è¿”å›çš„æ•°æ®çš„é›†åˆéœ€è¦ä½œä¸ºå¦ä¸€ä¸ªä¸šåŠ¡çš„å‰ç½®æ•°æ®"><a href="#åœºæ™¯ï¼šé¡µé¢ä¸­å¤šä¸ªè€—æ—¶è¯·æ±‚è¿”å›çš„æ•°æ®çš„é›†åˆéœ€è¦ä½œä¸ºå¦ä¸€ä¸ªä¸šåŠ¡çš„å‰ç½®æ•°æ®" class="headerlink" title="åœºæ™¯ï¼šé¡µé¢ä¸­å¤šä¸ªè€—æ—¶è¯·æ±‚è¿”å›çš„æ•°æ®çš„é›†åˆéœ€è¦ä½œä¸ºå¦ä¸€ä¸ªä¸šåŠ¡çš„å‰ç½®æ•°æ®"></a>åœºæ™¯ï¼šé¡µé¢ä¸­å¤šä¸ªè€—æ—¶è¯·æ±‚è¿”å›çš„æ•°æ®çš„é›†åˆéœ€è¦ä½œä¸ºå¦ä¸€ä¸ªä¸šåŠ¡çš„å‰ç½®æ•°æ®</h6><h6 id="ä½¿ç”¨æ–¹æ³•ç¤ºä¾‹ï¼š"><a href="#ä½¿ç”¨æ–¹æ³•ç¤ºä¾‹ï¼š" class="headerlink" title="ä½¿ç”¨æ–¹æ³•ç¤ºä¾‹ï¼š"></a>ä½¿ç”¨æ–¹æ³•ç¤ºä¾‹ï¼š</h6><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> newNum = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬ä¸€ä¸ªè€—æ—¶è¯·æ±‚ è¿”å›ç¬¬ä¸€ä¸ªæ•°æ®</span></span><br><span class="line"><span class="keyword">var</span> firstSlow = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// æ¨¡æ‹Ÿä¸€ä¸ªè€—æ—¶è¯·æ±‚</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">axios</span>.<span class="title function_">get</span>(<span class="string">&#x27;/xxx&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="number">2</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// ç¬¬äºŒä¸ªè€—æ—¶è¯·æ±‚ è¿”å›ç¬¬äºŒä¸ªæ•°æ®</span></span><br><span class="line"><span class="keyword">var</span> secondSlow = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// æ¨¡æ‹Ÿä¸€ä¸ªè€—æ—¶è¯·æ±‚</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">axios</span>.<span class="title function_">get</span>(<span class="string">&#x27;/yyy&#x27;</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="number">3</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// ä½¿ç”¨promise.all()ç­‰å¾…ä»¥ä¸Šä¸¤ä¸ªè¯·æ±‚è¿”å›æ•°æ®åæ‰§è¡ŒæŸäº›æ“ä½œ</span></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">all</span>([firstSlow,secondSlow]).<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">res</span>)&#123; <span class="comment">// æ­¤å¤„çš„ res å€¼åº”ä¸º [2, 3]</span></span><br><span class="line">  <span class="comment">// æ‹¿åˆ°ä»¥ä¸Šä¸¤ä¸ªè¯·æ±‚è¿”å›çš„æ•°æ®è¿›è¡Œå¤„ç†</span></span><br><span class="line">  newNum = res[<span class="number">0</span>] + res[<span class="number">1</span>]</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(newNum) <span class="comment">// newNum = 5</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>å¼‚æ­¥åŒæ­¥</tag>
      </tags>
  </entry>
  <entry>
    <title>è°·æ­Œæµè§ˆå™¨æ»šåŠ¨æ¡æ ·å¼ä¼˜åŒ–</title>
    <url>/2022/04/21/%E8%B0%B7%E6%AD%8C%E6%B5%8F%E8%A7%88%E5%99%A8%E6%BB%9A%E5%8A%A8%E6%9D%A1%E6%A0%B7%E5%BC%8F%E4%BC%98%E5%8C%96/</url>
    <content><![CDATA[<h6 id="ä¼—æ‰€å‘¨çŸ¥-è°·æ­Œæµè§ˆå™¨é»˜è®¤çš„æ»šåŠ¨æ¡å¾ˆä¸‘-ï¼Œåœ¨é¡¹ç›®ä¸­éå¸¸å½±å“ç¾è§‚ï¼Œè¿˜å¥½å¯ä»¥ä½¿ç”¨-css-æ ·å¼æ§åˆ¶ï¼Œä»£ç å¦‚ä¸‹ï¼š"><a href="#ä¼—æ‰€å‘¨çŸ¥-è°·æ­Œæµè§ˆå™¨é»˜è®¤çš„æ»šåŠ¨æ¡å¾ˆä¸‘-ï¼Œåœ¨é¡¹ç›®ä¸­éå¸¸å½±å“ç¾è§‚ï¼Œè¿˜å¥½å¯ä»¥ä½¿ç”¨-css-æ ·å¼æ§åˆ¶ï¼Œä»£ç å¦‚ä¸‹ï¼š" class="headerlink" title="ä¼—æ‰€å‘¨çŸ¥ è°·æ­Œæµè§ˆå™¨é»˜è®¤çš„æ»šåŠ¨æ¡å¾ˆä¸‘ -.-| ï¼Œåœ¨é¡¹ç›®ä¸­éå¸¸å½±å“ç¾è§‚ï¼Œè¿˜å¥½å¯ä»¥ä½¿ç”¨ css æ ·å¼æ§åˆ¶ï¼Œä»£ç å¦‚ä¸‹ï¼š"></a>ä¼—æ‰€å‘¨çŸ¥ è°·æ­Œæµè§ˆå™¨é»˜è®¤çš„æ»šåŠ¨æ¡å¾ˆä¸‘ -.-| ï¼Œåœ¨é¡¹ç›®ä¸­éå¸¸å½±å“ç¾è§‚ï¼Œè¿˜å¥½å¯ä»¥ä½¿ç”¨ css æ ·å¼æ§åˆ¶ï¼Œä»£ç å¦‚ä¸‹ï¼š</h6><span id="more"></span>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*æ»šåŠ¨æ¡æ ·å¼ï¼šè°·æ­Œæµè§ˆå™¨ä¸‹*/</span></span><br><span class="line">::-webkit-scrollbar&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#f5f7fa</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*æ»šåŠ¨æ¡çš„è½¨é“*/</span></span><br><span class="line">::-webkit-scrollbar-track&#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#f5f7fa</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*æ»šåŠ¨æ¡çš„æ»‘å—æŒ‰é’®*/</span></span><br><span class="line">::-webkit-scrollbar-thumb&#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#e4e7ed</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*æ»šåŠ¨æ¡çš„ä¸Šä¸‹ä¸¤ç«¯çš„æŒ‰é’®*/</span></span><br><span class="line">::-webkit-scrollbar-button&#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#B0AEDA</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>Css</tag>
      </tags>
  </entry>
  <entry>
    <title>ä»æœåŠ¡å™¨æŒ‡å®šè·¯å¾„ä¸‹è½½æ–‡ä»¶</title>
    <url>/2022/04/11/%E4%BB%8E%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8C%87%E5%AE%9A%E8%B7%AF%E5%BE%84%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6/</url>
    <content><![CDATA[<h2 id="ä»æœåŠ¡å™¨è·¯å¾„-x2F-æœ¬åœ°æŒ‡å®šè·¯å¾„ä¸‹è½½æ–‡ä»¶"><a href="#ä»æœåŠ¡å™¨è·¯å¾„-x2F-æœ¬åœ°æŒ‡å®šè·¯å¾„ä¸‹è½½æ–‡ä»¶" class="headerlink" title="ä»æœåŠ¡å™¨è·¯å¾„ &#x2F; æœ¬åœ°æŒ‡å®šè·¯å¾„ä¸‹è½½æ–‡ä»¶"></a>ä»æœåŠ¡å™¨è·¯å¾„ &#x2F; æœ¬åœ°æŒ‡å®šè·¯å¾„ä¸‹è½½æ–‡ä»¶</h2><h3 id="å‰ç«¯ï¼ˆæ™®é€šblodä¸‹è½½æ–¹å¼ï¼‰"><a href="#å‰ç«¯ï¼ˆæ™®é€šblodä¸‹è½½æ–¹å¼ï¼‰" class="headerlink" title="å‰ç«¯ï¼ˆæ™®é€šblodä¸‹è½½æ–¹å¼ï¼‰"></a>å‰ç«¯ï¼ˆæ™®é€šblodä¸‹è½½æ–¹å¼ï¼‰</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ç‚¹å‡»ä¸‹è½½</span></span><br><span class="line">   <span class="title function_">downloadInfo</span>(<span class="params"></span>) &#123;</span><br><span class="line">     <span class="variable language_">this</span>.<span class="title function_">axiosFun</span>() <span class="comment">//axiosè¯·æ±‚</span></span><br><span class="line">       .<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">response</span>) &#123;</span><br><span class="line">         <span class="keyword">var</span> blob = <span class="keyword">new</span> <span class="title class_">Blob</span>([response], &#123; <span class="attr">type</span>: <span class="string">&quot;application/x-xls&quot;</span> &#125;); <span class="comment">//åˆ›å»ºä¸€ä¸ªblobå¯¹è±¡</span></span><br><span class="line">         <span class="keyword">var</span> a = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;a&quot;</span>); <span class="comment">//åˆ›å»ºä¸€ä¸ª&lt;a&gt;&lt;/a&gt;æ ‡ç­¾</span></span><br><span class="line">         a.<span class="property">href</span> = <span class="variable constant_">URL</span>.<span class="title function_">createObjectURL</span>(blob); <span class="comment">// response is a blob</span></span><br><span class="line">         <span class="keyword">var</span> patt = <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;filename=([^;]+\\.[^\\.;]+);*&#x27;</span>)</span><br><span class="line">         <span class="keyword">var</span> contentDisposition = <span class="title function_">decodeURL</span>(res.<span class="property">headers</span>[<span class="string">&#x27;content-disposition&#x27;</span>])</span><br><span class="line">         <span class="keyword">var</span> result = patt.<span class="title function_">exec</span>(contentDisposition)</span><br><span class="line">         <span class="keyword">var</span> fileName = result[<span class="number">1</span>]</span><br><span class="line">         fileName = fileName.<span class="title function_">replace</span>(<span class="regexp">/\&quot;/g</span>,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">         a.<span class="property">download</span> = fileName; <span class="comment">//æ–‡ä»¶åç§°</span></span><br><span class="line">         a.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;none&quot;</span>;</span><br><span class="line">         <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(a);</span><br><span class="line">         a.<span class="title function_">click</span>();</span><br><span class="line">         a.<span class="title function_">remove</span>();</span><br><span class="line">         <span class="comment">// this.$refs.upload.clearFiles()</span></span><br><span class="line">       &#125;)</span><br><span class="line">       .<span class="title function_">catch</span>(<span class="keyword">function</span> (<span class="params">err</span>) &#123;</span><br><span class="line">         <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">       &#125;);</span><br><span class="line">   &#125;,</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<h3 id="åç«¯"><a href="#åç«¯" class="headerlink" title="åç«¯"></a>åç«¯</h3><p><em><strong>controller å’Œ  serviceæ¥å£å¤ªè¿‡ç®€å•ï¼Œ ç›´æ¥ Impl</strong></em></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">exportErr</span><span class="params">(HttpServletResponse response, String tmpId)</span> &#123;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">outputStream</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;æ–‡ä»¶åœ¨æœåŠ¡å™¨çš„è·¯å¾„&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(file.getName().getBytes(<span class="string">&quot;gb2312&quot;</span>),<span class="string">&quot;ISO8859-1&quot;</span>);</span><br><span class="line">            response.setContentType(<span class="string">&quot;application/vnd.ms-excel;chartset=utf-8&quot;</span>);</span><br><span class="line">            response.setHeader(<span class="string">&quot;Content-Disposition&quot;</span>,<span class="string">&quot;attachment;filename=&quot;</span> + fileName);</span><br><span class="line">            inputStream = <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file));</span><br><span class="line">            outputStream = response.getOutputStream();</span><br><span class="line">            <span class="type">byte</span>[] buf = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="type">int</span> len;</span><br><span class="line">            <span class="keyword">while</span> ((len = inputStream.read(buf))&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                outputStream.write(buf,<span class="number">0</span>,len);</span><br><span class="line">            &#125;</span><br><span class="line">            response.flushBuffer();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="comment">//åˆ«å¿˜äº†å…³é—­æµ</span></span><br><span class="line">            <span class="keyword">if</span> (inputStream!=<span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    inputStream.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (outputStream!=<span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    outputStream.close();</span><br><span class="line">                &#125;<span class="keyword">catch</span> (IOException e)&#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="ç»“æŸ"><a href="#ç»“æŸ" class="headerlink" title="ç»“æŸ"></a>ç»“æŸ</h3>]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>åç«¯</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>Javascript</tag>
        <tag>ä¸Šä¼ ä¸‹è½½</tag>
        <tag>SpringBoot</tag>
      </tags>
  </entry>
  <entry>
    <title>ä½¿ç”¨protobufè¿›è¡Œå‰åç«¯æ•°æ®äº¤äº’</title>
    <url>/2023/05/22/%E4%BD%BF%E7%94%A8protobuf%E8%BF%9B%E8%A1%8C%E5%89%8D%E5%90%8E%E7%AB%AF%E6%95%B0%E6%8D%AE%E4%BA%A4%E4%BA%92/</url>
    <content><![CDATA[<h5 id="åœ¨å‰åç«¯äº¤äº’è¿‡ç¨‹ä¸­ï¼Œä¸€èˆ¬é‡‡ç”¨jsonä½œä¸ºé€šä¿¡åè®®ï¼Œä¸è¿‡åœ¨ç‰¹æ®Šæƒ…å†µä¸‹-æ¯”å¦‚æœ€è¿‘é¡¹ç›®ä¸­è¦æ±‚websocketçŸ­æ—¶é—´å†…é¢‘ç¹ç”±åå°æ¨é€å¤§é‡æ•°æ®ç»™å‰ç«¯ï¼Œç”±äºç½‘ç»œåŸå› å¾ˆå®¹æ˜“é˜»å¡-â€“-è¿™æ—¶å°±éœ€è¦å°†æ•°æ®åŒ…è¿›è¡Œå‹ç¼©-x2F-åºåˆ—åŒ–-amp-ååºåˆ—åŒ–ç­‰å¤„ç†ä»¥å‡å°è´Ÿè½½ã€‚ç»è¿‡è€ƒè™‘æœ€ç»ˆé€‰æ‹©protobufä½œä¸ºé€šä¿¡åè®®ï¼Œå…ˆæŠŠæ•°æ®è¿›è¡Œåºåˆ—åŒ–å†å‘é€â€¦æ¥æ”¶â€¦å¤„ç†"><a href="#åœ¨å‰åç«¯äº¤äº’è¿‡ç¨‹ä¸­ï¼Œä¸€èˆ¬é‡‡ç”¨jsonä½œä¸ºé€šä¿¡åè®®ï¼Œä¸è¿‡åœ¨ç‰¹æ®Šæƒ…å†µä¸‹-æ¯”å¦‚æœ€è¿‘é¡¹ç›®ä¸­è¦æ±‚websocketçŸ­æ—¶é—´å†…é¢‘ç¹ç”±åå°æ¨é€å¤§é‡æ•°æ®ç»™å‰ç«¯ï¼Œç”±äºç½‘ç»œåŸå› å¾ˆå®¹æ˜“é˜»å¡-â€“-è¿™æ—¶å°±éœ€è¦å°†æ•°æ®åŒ…è¿›è¡Œå‹ç¼©-x2F-åºåˆ—åŒ–-amp-ååºåˆ—åŒ–ç­‰å¤„ç†ä»¥å‡å°è´Ÿè½½ã€‚ç»è¿‡è€ƒè™‘æœ€ç»ˆé€‰æ‹©protobufä½œä¸ºé€šä¿¡åè®®ï¼Œå…ˆæŠŠæ•°æ®è¿›è¡Œåºåˆ—åŒ–å†å‘é€â€¦æ¥æ”¶â€¦å¤„ç†" class="headerlink" title="åœ¨å‰åç«¯äº¤äº’è¿‡ç¨‹ä¸­ï¼Œä¸€èˆ¬é‡‡ç”¨jsonä½œä¸ºé€šä¿¡åè®®ï¼Œä¸è¿‡åœ¨ç‰¹æ®Šæƒ…å†µä¸‹:æ¯”å¦‚æœ€è¿‘é¡¹ç›®ä¸­è¦æ±‚websocketçŸ­æ—¶é—´å†…é¢‘ç¹ç”±åå°æ¨é€å¤§é‡æ•°æ®ç»™å‰ç«¯ï¼Œç”±äºç½‘ç»œåŸå› å¾ˆå®¹æ˜“é˜»å¡ â€“ è¿™æ—¶å°±éœ€è¦å°†æ•°æ®åŒ…è¿›è¡Œå‹ç¼©&#x2F;åºåˆ—åŒ–&amp;ååºåˆ—åŒ–ç­‰å¤„ç†ä»¥å‡å°è´Ÿè½½ã€‚ç»è¿‡è€ƒè™‘æœ€ç»ˆé€‰æ‹©protobufä½œä¸ºé€šä¿¡åè®®ï¼Œå…ˆæŠŠæ•°æ®è¿›è¡Œåºåˆ—åŒ–å†å‘é€â€¦æ¥æ”¶â€¦å¤„ç†"></a>åœ¨å‰åç«¯äº¤äº’è¿‡ç¨‹ä¸­ï¼Œä¸€èˆ¬é‡‡ç”¨<code>json</code>ä½œä¸ºé€šä¿¡åè®®ï¼Œä¸è¿‡åœ¨ç‰¹æ®Šæƒ…å†µä¸‹:<br/>æ¯”å¦‚æœ€è¿‘é¡¹ç›®ä¸­è¦æ±‚<span style='color:green'><code>websocket</code>çŸ­æ—¶é—´å†…é¢‘ç¹ç”±åå°æ¨é€å¤§é‡æ•°æ®</span>ç»™å‰ç«¯ï¼Œç”±äºç½‘ç»œåŸå› å¾ˆå®¹æ˜“é˜»å¡<br/> â€“ è¿™æ—¶å°±éœ€è¦å°†æ•°æ®åŒ…è¿›è¡Œå‹ç¼©&#x2F;åºåˆ—åŒ–&amp;ååºåˆ—åŒ–ç­‰å¤„ç†ä»¥å‡å°è´Ÿè½½ã€‚ç»è¿‡è€ƒè™‘æœ€ç»ˆé€‰æ‹©<code>protobuf</code>ä½œä¸ºé€šä¿¡åè®®ï¼Œå…ˆæŠŠæ•°æ®è¿›è¡Œåºåˆ—åŒ–å†å‘é€â€¦æ¥æ”¶â€¦å¤„ç†</h5><ol>
<li>é¦–å…ˆæ˜¯å‰åç«¯åå•†å®šä¹‰æ•°æ®æ ¼å¼  &#x3D;&gt; æœ€ç»ˆåç«¯è¯­è¨€å®šä¹‰å¹¶äº§å‡º<code>.proto</code>æ–‡ä»¶ä¾›å‰åç«¯ä½¿ç”¨<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// é¦–å…ˆåŠ è½½protoå®ä½“ï¼Œç¡®å®šè§£æçš„æ ‡å‡†</span></span><br><span class="line"><span class="keyword">let</span> model, requestModel;</span><br><span class="line"><span class="keyword">var</span> protobuf = <span class="built_in">require</span>(<span class="string">&quot;protobufjs&quot;</span>);</span><br><span class="line">protobuf.<span class="title function_">load</span>(<span class="string">&quot;../example.proto&quot;</span>, <span class="keyword">function</span> (<span class="params">event, root</span>) &#123;</span><br><span class="line">  model = root.<span class="title function_">lookupType</span>(<span class="string">&quot;com.modelName&quot;</span>);</span><br><span class="line">  requestModel = root.<span class="title function_">lookupType</span>(<span class="string">&#x27;com.requestModelName&#x27;</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
<li>å‰ç«¯åºåˆ—åŒ–<code>json</code> &amp;&amp; å‘é€<code>proto</code>æ•°æ®<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> payload = &#123;<span class="attr">param1</span>:<span class="string">&#x27;paramData&#x27;</span>&#125;;</span><br><span class="line"><span class="keyword">var</span> errMsg = requestModel.<span class="title function_">verify</span>(payload);</span><br><span class="line"><span class="keyword">if</span> (errMsg)</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> fail === <span class="string">&quot;function&quot;</span>)</span><br><span class="line">    <span class="keyword">throw</span> err;</span><br><span class="line"><span class="comment">// Create a new message</span></span><br><span class="line"><span class="keyword">let</span> message = <span class="title class_">RequestDataType</span>.<span class="title function_">create</span>(payload); <span class="comment">// or use .fromObject if conversion is necessary</span></span><br><span class="line"><span class="comment">// Encode a message to an Uint8Array (browser) or Buffer (node)</span></span><br><span class="line"><span class="keyword">let</span> buffer = <span class="title class_">RequestDataType</span>.<span class="title function_">encode</span>(message).<span class="title function_">finish</span>();</span><br><span class="line"><span class="comment">// buffer å³ä¸ºéœ€è¦å‘é€çš„æ•°æ®åŒ…</span></span><br></pre></td></tr></table></figure></li>
<li>å‰ç«¯è§£ææ¥æ”¶åˆ°çš„<code>proto</code>æ•°æ®<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è¿™é‡Œæ„æ€æ˜¯æ¨¡æ‹Ÿæ¥æ”¶æ•°æ®çš„å›è°ƒ</span></span><br><span class="line">xxx.<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> reader = <span class="keyword">new</span> <span class="title class_">FileReader</span>();</span><br><span class="line">  <span class="comment">// å‡è®¾res.dataä¸ºæ¥æ”¶åˆ°çš„æ•°æ®åŒ…</span></span><br><span class="line">  reader.<span class="title function_">readAsArrayBuffer</span>(res.<span class="property">data</span>);</span><br><span class="line">  reader.<span class="property">onload</span> =<span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> buf = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(e.<span class="property">target</span>.<span class="property">result</span>);</span><br><span class="line">    <span class="comment">// realDataå³ä¸ºè§£æåçš„æ•°æ®</span></span><br><span class="line">    <span class="keyword">let</span> realData = model.<span class="title function_">decode</span>(buf);</span><br><span class="line">    <span class="comment">// todo...æ ¹æ®è¿”å›çš„realDataè¿›è¡Œä¸šåŠ¡é€»è¾‘å¤„ç†</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
</ol>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
      </tags>
  </entry>
  <entry>
    <title>GisäºŒæ¬¡å¼€å‘ç›¸å…³æ–‡ä»¶å¤„ç†</title>
    <url>/2022/04/18/Gis%E4%BA%8C%E6%AC%A1%E5%BC%80%E5%8F%91%E7%9B%B8%E5%85%B3%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86/</url>
    <content><![CDATA[<p><font color=red>æ³¨æ„ï¼šé¦–å…ˆéœ€è¦è¿›è¡Œgeoserverç¯å¢ƒæ­å»ºï¼ˆéœ€è¦åœ¨ tomcat ä¸­ geoserver åŒ…é‡Œçš„ web.xml æ–‡ä»¶ä¸­è¿›è¡Œè·¨åŸŸå¤„ç†ï¼‰åŠç›¸å…³ä¾èµ–å¼•å…¥</font></p>
<h5 id="shp-æ–‡ä»¶å¤„ç†ï¼ˆè§£ææ–‡ä»¶å¹¶å±•ç¤ºï¼‰"><a href="#shp-æ–‡ä»¶å¤„ç†ï¼ˆè§£ææ–‡ä»¶å¹¶å±•ç¤ºï¼‰" class="headerlink" title=".shp æ–‡ä»¶å¤„ç†ï¼ˆè§£ææ–‡ä»¶å¹¶å±•ç¤ºï¼‰"></a>.shp æ–‡ä»¶å¤„ç†ï¼ˆè§£ææ–‡ä»¶å¹¶å±•ç¤ºï¼‰</h5><h6 id="åç«¯æ¥æ”¶å‰ç«¯å‘é€çš„-file-æ–‡ä»¶æµï¼Œé€šè¿‡-GeoServer-å‘å¸ƒï¼Œå¹¶è¿”å›ä¸€ä¸ª-geojson-æ ¼å¼æ•°æ®çš„-url"><a href="#åç«¯æ¥æ”¶å‰ç«¯å‘é€çš„-file-æ–‡ä»¶æµï¼Œé€šè¿‡-GeoServer-å‘å¸ƒï¼Œå¹¶è¿”å›ä¸€ä¸ª-geojson-æ ¼å¼æ•°æ®çš„-url" class="headerlink" title="åç«¯æ¥æ”¶å‰ç«¯å‘é€çš„ file æ–‡ä»¶æµï¼Œé€šè¿‡ GeoServer å‘å¸ƒï¼Œå¹¶è¿”å›ä¸€ä¸ª geojson æ ¼å¼æ•°æ®çš„ url"></a>åç«¯æ¥æ”¶å‰ç«¯å‘é€çš„ file æ–‡ä»¶æµï¼Œé€šè¿‡ GeoServer å‘å¸ƒï¼Œå¹¶è¿”å›ä¸€ä¸ª geojson æ ¼å¼æ•°æ®çš„ url</h6><p><strong>ä¸»è¦ä»£ç ï¼š</strong></p>
<span id="more"></span>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/publishShpFile&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">publishShpFile</span><span class="params">(<span class="meta">@RequestParam(&quot;file&quot;)</span> MultipartFile shpFile)</span> &#123;</span><br><span class="line">    <span class="type">Result</span> <span class="variable">result</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Result</span>();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//è·å–geoServerè¿æ¥å¯¹è±¡</span></span><br><span class="line">        <span class="type">GeoServerRESTManager</span> <span class="variable">geoServerConnection</span> <span class="operator">=</span> GeoServerPublishUtil.getGeoServerConnection(geoServerUser, geoServerPassword, geoServerUrl);</span><br><span class="line">        <span class="keyword">if</span> (ObjectUtil.isNotEmpty(geoServerConnection)) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">originalFilename</span> <span class="operator">=</span> shpFile.getOriginalFilename();</span><br><span class="line">            <span class="type">File</span> <span class="variable">dest</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(shpPath + <span class="string">&quot;/&quot;</span> + originalFilename);</span><br><span class="line">            <span class="comment">// æ£€æµ‹æ˜¯å¦å­˜åœ¨ç›®å½•</span></span><br><span class="line">            <span class="keyword">if</span> (!dest.getParentFile().exists()) &#123;</span><br><span class="line">                dest.getParentFile().mkdirs();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (dest.exists()) &#123;</span><br><span class="line">                dest.delete();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// ä¿å­˜shpæ–‡ä»¶åˆ°æœ¬åœ°</span></span><br><span class="line">            shpFile.transferTo(dest);</span><br><span class="line">            <span class="comment">// å‘å¸ƒshpæ–‡ä»¶</span></span><br><span class="line">            <span class="type">boolean</span> <span class="variable">publishResult</span> <span class="operator">=</span> GeoServerPublishUtil.publishShp(geoServerConnection, dest.getAbsolutePath(), geoServerWorkspace);</span><br><span class="line">            result.setCode(publishResult ? <span class="number">200</span> : <span class="number">500</span>);</span><br><span class="line">            result.setMessage(publishResult ? <span class="string">&quot;ä¸Šä¼ æˆåŠŸ&quot;</span> : <span class="string">&quot;ä¸Šä¼ å¤±è´¥&quot;</span>);</span><br><span class="line">            <span class="comment">// å‡†å¤‡url</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">shpUrl</span> <span class="operator">=</span> geoServerUrl + <span class="string">&quot;/&quot;</span> + geoServerWorkspace + <span class="string">&quot;/ows?service=WFS&amp;version=1.0.0&amp;request=GetFeature&amp;typeName=&quot;</span> + geoServerWorkspace + <span class="string">&quot;:&quot;</span> + originalFilename.split(<span class="string">&quot;\\.&quot;</span>)[<span class="number">0</span>] + <span class="string">&quot;&amp;maxFeatures=50&amp;outputFormat=application%2Fjson&quot;</span>;</span><br><span class="line">            result.setData(publishResult ? shpUrl : <span class="string">&quot;&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            result.setCode(<span class="number">500</span>);</span><br><span class="line">            result.setMessage(<span class="string">&quot;ä¸Šä¼ å¤±è´¥,è¯·æ£€æŸ¥geoServerè´¦å·å¯†ç &quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        log.error(<span class="string">&quot;Exceptions:&quot;</span>, e);</span><br><span class="line">        result.setCode(<span class="number">500</span>);</span><br><span class="line">        result.setMessage(<span class="string">&quot;ä¸Šä¼ å¤±è´¥,æœåŠ¡å™¨å†…éƒ¨å¼‚å¸¸&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è¿”å›å°è£…ç±»ï¼š</strong></p>
<p><font color=Blue>Result.java</font></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Result</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿”å›å¤„ç†æ¶ˆæ¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿”å›ä»£ç </span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">Integer</span> <span class="variable">code</span> <span class="operator">=</span> HttpStatus.SUCCESS;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿”å›æ•°æ®å¯¹è±¡ data</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Object data;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Result</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆå§‹åŒ–ä¸€ä¸ªæ–°åˆ›å»ºçš„ Result å¯¹è±¡</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> code çŠ¶æ€ç </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg è¿”å›å†…å®¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Result</span><span class="params">(<span class="type">int</span> code, String msg)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">this</span>(code,msg,<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆå§‹åŒ–ä¸€ä¸ªæ–°åˆ›å»ºçš„ Result å¯¹è±¡</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> code çŠ¶æ€ç </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg è¿”å›å†…å®¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data æ•°æ®å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Result</span><span class="params">(<span class="type">int</span> code, String msg, Object data)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.message = msg;</span><br><span class="line">        <span class="built_in">this</span>.data = data;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿”å›æˆåŠŸæ¶ˆæ¯</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æˆåŠŸæ¶ˆæ¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">success</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> Result.success(<span class="string">&quot;æˆåŠŸ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿”å›æˆåŠŸæ•°æ®</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æˆåŠŸæ¶ˆæ¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">success</span><span class="params">(Object data)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> Result.success(<span class="string">&quot;æˆåŠŸ&quot;</span>, data);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿”å›æˆåŠŸæ¶ˆæ¯</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg è¿”å›å†…å®¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æˆåŠŸæ¶ˆæ¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">success</span><span class="params">(String msg)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> Result.success(msg, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿”å›æˆåŠŸæ¶ˆæ¯</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg è¿”å›å†…å®¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data æ•°æ®å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æˆåŠŸæ¶ˆæ¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">success</span><span class="params">(String msg, Object data)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>(HttpStatus.SUCCESS, msg, data);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿”å›é”™è¯¯æ¶ˆæ¯</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">error</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> Result.error(<span class="string">&quot;å¤±è´¥&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿”å›é”™è¯¯æ¶ˆæ¯</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> è­¦å‘Šæ¶ˆæ¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">error</span><span class="params">(Object data)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> Result.error(<span class="string">&quot;å¤±è´¥&quot;</span>, data);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">error</span><span class="params">(String msg)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> Result.error(msg, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿”å›é”™è¯¯æ¶ˆæ¯</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg è¿”å›å†…å®¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data æ•°æ®å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> è­¦å‘Šæ¶ˆæ¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">error</span><span class="params">(String msg, Object data)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>(HttpStatus.ERROR, msg, data);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿”å›é”™è¯¯æ¶ˆæ¯</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> code çŠ¶æ€ç </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg è¿”å›å†…å®¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> è­¦å‘Šæ¶ˆæ¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Result <span class="title function_">error</span><span class="params">(<span class="type">int</span> code, String msg)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>(code, msg, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>shpè§£æå·¥å…·ç±»ï¼š</strong></p>
<p><font color=Blue>GeoServerPublishUtil.java</font></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> cn.hutool.core.util.ObjectUtil;</span><br><span class="line"><span class="keyword">import</span> it.geosolutions.geoserver.rest.GeoServerRESTManager;</span><br><span class="line"><span class="keyword">import</span> it.geosolutions.geoserver.rest.GeoServerRESTPublisher;</span><br><span class="line"><span class="keyword">import</span> it.geosolutions.geoserver.rest.GeoServerRESTReader;</span><br><span class="line"><span class="keyword">import</span> it.geosolutions.geoserver.rest.decoder.RESTDataStore;</span><br><span class="line"><span class="keyword">import</span> it.geosolutions.geoserver.rest.encoder.GSLayerEncoder;</span><br><span class="line"><span class="keyword">import</span> it.geosolutions.geoserver.rest.encoder.datastore.GSGeoTIFFDatastoreEncoder;</span><br><span class="line"><span class="keyword">import</span> it.geosolutions.geoserver.rest.encoder.datastore.GSShapefileDatastoreEncoder;</span><br><span class="line"><span class="keyword">import</span> it.geosolutions.geoserver.rest.encoder.feature.GSFeatureTypeEncoder;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.net.MalformedURLException;</span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"><span class="keyword">import</span> java.nio.charset.Charset;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Classname</span> GeoServerPublishUtil</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GeoServerPublishUtil</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–geoserverè¿æ¥å¯¹è±¡</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> username</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> password</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> geoserverUrl</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> GeoServerRESTManager <span class="title function_">getGeoServerConnection</span><span class="params">(String username, String password, String geoserverUrl)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">GeoServerRESTManager</span> <span class="variable">geoServerRESTManager</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GeoServerRESTManager</span>(<span class="keyword">new</span> <span class="title class_">URL</span>(geoserverUrl), username, password);</span><br><span class="line">            <span class="keyword">return</span> geoServerRESTManager;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (MalformedURLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘å¸ƒtiff</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> tiffPath</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">publishTiff</span><span class="params">(GeoServerRESTManager geoServerRESTManager, String tiffPath, String workSpace)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">File</span> <span class="variable">tifFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(tiffPath);</span><br><span class="line">            <span class="keyword">assert</span> geoServerRESTManager != <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//åˆ¤æ–­å·¥ä½œç©ºé—´æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»º</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">storeName</span> <span class="operator">=</span> tifFile.getName().split(<span class="string">&quot;\\.&quot;</span>)[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">            <span class="comment">//è·å–å‘å¸ƒå¯¹è±¡</span></span><br><span class="line">            <span class="type">GeoServerRESTPublisher</span> <span class="variable">publisher</span> <span class="operator">=</span> geoServerRESTManager.getPublisher();</span><br><span class="line">            <span class="comment">//åˆ›å»ºå·¥ä½œç©ºé—´</span></span><br><span class="line">            List&lt;String&gt; workspaces = geoServerRESTManager.getReader().getWorkspaceNames();</span><br><span class="line">            <span class="keyword">if</span> (!workspaces.contains(workSpace)) &#123;</span><br><span class="line">                publisher.createWorkspace(workSpace);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//è·å–å½“å‰è¦å‘å¸ƒçš„æ•°æ®</span></span><br><span class="line">            <span class="type">RESTDataStore</span> <span class="variable">dataStore</span> <span class="operator">=</span> geoServerRESTManager.getReader().getDatastore(workSpace, storeName);</span><br><span class="line">            <span class="keyword">if</span> (ObjectUtil.isEmpty(dataStore)) &#123;</span><br><span class="line">                <span class="type">GSGeoTIFFDatastoreEncoder</span> <span class="variable">gsGeoTIFFDataStoreEncoders</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GSGeoTIFFDatastoreEncoder</span>(storeName);</span><br><span class="line">                gsGeoTIFFDataStoreEncoders.setWorkspaceName(workSpace);</span><br><span class="line">                gsGeoTIFFDataStoreEncoders.setUrl(<span class="keyword">new</span> <span class="title class_">URL</span>(<span class="string">&quot;file:&quot;</span> + tifFile.getName()));</span><br><span class="line">                <span class="comment">//åˆ›å»ºå›¾å±‚</span></span><br><span class="line">                geoServerRESTManager.getStoreManager().create(workSpace, gsGeoTIFFDataStoreEncoders);</span><br><span class="line">                <span class="comment">//å‘å¸ƒå›¾å±‚</span></span><br><span class="line">                <span class="keyword">return</span> geoServerRESTManager.getPublisher().publishGeoTIFF(workSpace, storeName, tifFile);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘å¸ƒshpæ–‡ä»¶</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> geoServerRESTManager</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> shpPath</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> workSpace</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">publishShp</span><span class="params">(GeoServerRESTManager geoServerRESTManager, String shpPath, String workSpace)</span> &#123;</span><br><span class="line">        <span class="keyword">assert</span> geoServerRESTManager != <span class="literal">null</span>;</span><br><span class="line">        <span class="type">File</span> <span class="variable">shpFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(shpPath);</span><br><span class="line">        <span class="type">GeoServerRESTReader</span> <span class="variable">restReader</span> <span class="operator">=</span> geoServerRESTManager.getReader();</span><br><span class="line">        <span class="type">GeoServerRESTPublisher</span> <span class="variable">restPublisher</span> <span class="operator">=</span> geoServerRESTManager.getPublisher();</span><br><span class="line">        <span class="comment">// å­˜åœ¨ç›¸åº”çš„å·¥ä½œåŒº</span></span><br><span class="line">        <span class="keyword">if</span> (!restReader.existsWorkspace(workSpace)) &#123;</span><br><span class="line">            restPublisher.createWorkspace(workSpace);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//shpæ•°æ®å­˜å‚¨,å¦‚æœå­˜åœ¨ å…ˆåˆ é™¤</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">dataSetName</span> <span class="operator">=</span> shpFile.getName().split(<span class="string">&quot;\\.&quot;</span>)[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">if</span> (restReader.existsDatastore(workSpace, dataSetName)) &#123;</span><br><span class="line">            restPublisher.removeDatastore(workSpace, dataSetName, <span class="literal">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//åˆ›å»ºshapeæ–‡ä»¶å­˜å‚¨</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//shpæ–‡ä»¶æ‰€åœ¨çš„ä½ç½®</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">urlDataStorePath</span> <span class="operator">=</span> shpFile.getPath();</span><br><span class="line">            <span class="comment">// æ•°æ®å­˜å‚¨éœ€è¦çš„æ–‡ä»¶</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">shpFilePath</span> <span class="operator">=</span> String.format(<span class="string">&quot;file://%s&quot;</span>, urlDataStorePath);</span><br><span class="line">            <span class="type">URL</span> <span class="variable">urlShapeFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">URL</span>(shpFilePath);</span><br><span class="line">            <span class="comment">// åˆ›å»ºæ•°æ®é›†</span></span><br><span class="line">            <span class="type">GSShapefileDatastoreEncoder</span> <span class="variable">dataStoreEncoder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GSShapefileDatastoreEncoder</span>(dataSetName, urlShapeFile);</span><br><span class="line">            dataStoreEncoder.setCharset(Charset.forName(<span class="string">&quot;GBK&quot;</span>));</span><br><span class="line">            geoServerRESTManager.getStoreManager().create(workSpace, dataStoreEncoder);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (MalformedURLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//shpå›¾å±‚layer</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">layerName</span> <span class="operator">=</span> shpFile.getName().split(<span class="string">&quot;\\.&quot;</span>)[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">if</span> (restReader.existsLayer(workSpace, layerName)) &#123;</span><br><span class="line">            restPublisher.removeLayer(workSpace, layerName);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å‘å¸ƒå›¾å±‚</span></span><br><span class="line">        <span class="type">GSFeatureTypeEncoder</span> <span class="variable">gsFeatureTypeEncoder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GSFeatureTypeEncoder</span>();</span><br><span class="line">        gsFeatureTypeEncoder.setName(layerName);</span><br><span class="line">        gsFeatureTypeEncoder.setTitle(layerName);</span><br><span class="line">        gsFeatureTypeEncoder.setSRS(GeoServerRESTPublisher.DEFAULT_CRS);</span><br><span class="line">        <span class="type">GSLayerEncoder</span> <span class="variable">gsLayerEncoder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GSLayerEncoder</span>();</span><br><span class="line">        <span class="keyword">return</span> restPublisher.publishDBLayer(workSpace, dataSetName, gsFeatureTypeEncoder, gsLayerEncoder);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h6 id="æ­¤æ—¶åç«¯è¿”å›-res-data-å³ä¸º-geojson-æ ¼å¼çš„-url"><a href="#æ­¤æ—¶åç«¯è¿”å›-res-data-å³ä¸º-geojson-æ ¼å¼çš„-url" class="headerlink" title="æ­¤æ—¶åç«¯è¿”å› res.data å³ä¸º geojson æ ¼å¼çš„ url"></a>æ­¤æ—¶åç«¯è¿”å› res.data å³ä¸º geojson æ ¼å¼çš„ url</h6><p><code>geoServerUrl + &quot;/&quot; + geoServerWorkspace + &quot;/ows?service=WFS&amp;version=1.0.0&amp;request=GetFeature&amp;typeName=&quot; + geoServerWorkspace + &quot;:&quot; + originalFilename.split(&quot;\\.&quot;)[0] + &quot;&amp;maxFeatures=50&amp;outputFormat=application%2Fjson&quot;</code><br>ğŸ‘‡<br><code>http://localhost:18888/geoserver/geoserver_space/ows?service=WFS&amp;version=1.0.0&amp;request=GetFeature&amp;typeName=geoserver_space:1639645666000&amp;maxFeatures=50&amp;outputFormat=application%2Fjson</code></p>
<h6 id="å‰ç«¯ä½¿ç”¨æ­¤-url"><a href="#å‰ç«¯ä½¿ç”¨æ­¤-url" class="headerlink" title="å‰ç«¯ä½¿ç”¨æ­¤ url"></a>å‰ç«¯ä½¿ç”¨æ­¤ url</h6><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">addLayer</span>(&#123; <span class="comment">// this.map ä¸ºåœ°å›¾å®ä¾‹</span></span><br><span class="line">  <span class="attr">id</span>: <span class="string">&quot;shp&quot;</span>,</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&quot;fill&quot;</span>,</span><br><span class="line">  <span class="attr">source</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&quot;geojson&quot;</span>,</span><br><span class="line">    <span class="attr">data</span>: response.<span class="property">data</span>, <span class="comment">// response.data ä¸ºè¿”å›url</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">paint</span>: &#123;</span><br><span class="line">    <span class="string">&quot;fill-color&quot;</span>: <span class="string">&quot;rgba(247, 79, 69, 0.5)&quot;</span>, <span class="comment">// å¡«å……é¢œè‰²</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h5 id="tif-æ–‡ä»¶å¤„ç†ï¼ˆè§£ææ–‡ä»¶å¹¶å±•ç¤ºï¼‰"><a href="#tif-æ–‡ä»¶å¤„ç†ï¼ˆè§£ææ–‡ä»¶å¹¶å±•ç¤ºï¼‰" class="headerlink" title=".tif æ–‡ä»¶å¤„ç†ï¼ˆè§£ææ–‡ä»¶å¹¶å±•ç¤ºï¼‰"></a>.tif æ–‡ä»¶å¤„ç†ï¼ˆè§£ææ–‡ä»¶å¹¶å±•ç¤ºï¼‰</h5><h6 id="åŒç†-åç«¯æ¥æ”¶å‰ç«¯å‘é€çš„-file-æ–‡ä»¶æµï¼Œé€šè¿‡-GeoServer-å‘å¸ƒï¼Œå¹¶è¿”å›ä¸€ä¸ª-WMS-ç“¦ç‰‡æ ¼å¼æ•°æ®çš„-url"><a href="#åŒç†-åç«¯æ¥æ”¶å‰ç«¯å‘é€çš„-file-æ–‡ä»¶æµï¼Œé€šè¿‡-GeoServer-å‘å¸ƒï¼Œå¹¶è¿”å›ä¸€ä¸ª-WMS-ç“¦ç‰‡æ ¼å¼æ•°æ®çš„-url" class="headerlink" title="åŒç† åç«¯æ¥æ”¶å‰ç«¯å‘é€çš„ file æ–‡ä»¶æµï¼Œé€šè¿‡ GeoServer å‘å¸ƒï¼Œå¹¶è¿”å›ä¸€ä¸ª WMS ç“¦ç‰‡æ ¼å¼æ•°æ®çš„ url"></a>åŒç† åç«¯æ¥æ”¶å‰ç«¯å‘é€çš„ file æ–‡ä»¶æµï¼Œé€šè¿‡ GeoServer å‘å¸ƒï¼Œå¹¶è¿”å›ä¸€ä¸ª WMS ç“¦ç‰‡æ ¼å¼æ•°æ®çš„ url</h6><p><strong>ä¸»è¦ä»£ç ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">tiffPath</span> <span class="operator">=</span> decryptFilePath + partFile.getName(); <span class="comment">// partFile ä¸º tif æ–‡ä»¶</span></span><br><span class="line"><span class="comment">//è§£ætifå›¾ç‰‡è·å–ç»çº¬åº¦</span></span><br><span class="line">log.info(<span class="string">&quot;è§£ætiffè·å–ç»çº¬åº¦å¼€å§‹&quot;</span>);</span><br><span class="line"><span class="type">JSONArray</span> <span class="variable">coordinateArray</span> <span class="operator">=</span> TiffUtil.getCoordinateByTiff(tiffPath);</span><br><span class="line"><span class="type">String</span> <span class="variable">bubbleLocation</span> <span class="operator">=</span> coordinateArray.toString();</span><br><span class="line">log.info(<span class="string">&quot;è§£ætiffè·å–ç»çº¬åº¦ç»“æŸ&quot;</span>);</span><br><span class="line"><span class="comment">//å‘å¸ƒtiffæ–‡ä»¶</span></span><br><span class="line">log.info(<span class="string">&quot;tiffå¼€å§‹å‘å¸ƒ&quot;</span>);</span><br><span class="line"><span class="type">GeoServerRESTManager</span> <span class="variable">geoServerConnection</span> <span class="operator">=</span> GeoServerPublishUtil.getGeoServerConnection(geoServerUser, geoServerPassword, geoServerUrl);</span><br><span class="line"><span class="type">boolean</span> <span class="variable">publishResult</span> <span class="operator">=</span> GeoServerPublishUtil.publishTiff(geoServerConnection, tiffPath, geoServerWorkspace);</span><br><span class="line"><span class="keyword">if</span> (!publishResult) &#123;</span><br><span class="line">    <span class="keyword">return</span> Result.error(<span class="string">&quot;è¯·ä¸Šä¼ æ­£ç¡®çš„tifæ–‡ä»¶ï¼&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//boolean publishResult = GeoServerLayerPublish.publishTiff(geoServerConnection,tiffPath,geoServerWorkspace);</span></span><br><span class="line">log.info(<span class="string">&quot;tiffå‘å¸ƒå®Œæˆ&quot;</span>);</span><br><span class="line"><span class="comment">// æ­¤æ—¶æ‹¿åˆ°url ä¸»è¦ä»£ç ç‰‡ç»“æŸ</span></span><br><span class="line"><span class="type">String</span> <span class="variable">tiffPublishUrl</span> <span class="operator">=</span> geoServerUrl + <span class="string">&quot;/&quot;</span> + geoServerWorkspace + <span class="string">&quot;/wms?service=WMS&amp;version=1.1.0&amp;request=GetMap&amp;layers=&quot;</span> + geoServerWorkspace + <span class="string">&quot;:&quot;</span> + partFile.getName().split(<span class="string">&quot;\\.&quot;</span>)[<span class="number">0</span>] + <span class="string">&quot;&amp;styles=&amp;bbox=&#123;bbox-epsg-3857&#125;&amp;width=768&amp;height=552&amp;srs=EPSG:3857&amp;format=image%2Fpng&amp;transparent=true&quot;</span>;</span><br><span class="line"><span class="comment">// //é€šè¿‡ç»çº¬åº¦æŸ¥è¯¢æ•°æ®åº“ä¸­æ˜¯å¦æœ‰ç›¸åŒä½ç½®ä¸Šä¼ </span></span><br><span class="line"><span class="comment">// QueryWrapper&lt;FileTiffUploadVO&gt; wrapper = new QueryWrapper&lt;&gt;();</span></span><br><span class="line"><span class="comment">// wrapper.lambda().eq(FileTiffUploadVO::getBubbleLocation, bubbleLocation);</span></span><br><span class="line"><span class="comment">// List&lt;FileTiffUploadVO&gt; fileTiffUploadVOS = fileTiffUploadMapper.selectList(wrapper);</span></span><br><span class="line"><span class="comment">// //å¦‚æœå­˜åœ¨ï¼Œå¤ç”¨IDä¿¡æ¯</span></span><br><span class="line"><span class="comment">// if (ObjectUtil.isNotEmpty(fileTiffUploadVOS) &amp;&amp; fileTiffUploadVOS.size() &gt; 0) &#123;</span></span><br><span class="line"><span class="comment">//     FileTiffUploadVO fileTiffUploadVO = fileTiffUploadVOS.get(0);</span></span><br><span class="line"><span class="comment">//     fileTiffUploadVO.setFileName(partFile.getName());</span></span><br><span class="line"><span class="comment">//     fileTiffUploadVO.setFileTiffPath(tiffPath);</span></span><br><span class="line"><span class="comment">//     fileTiffUploadVO.setFilePngPath(pngFilePath);</span></span><br><span class="line"><span class="comment">//     fileTiffUploadVO.setTiffPublishUrl(publishResult ? tiffPublishUrl : &quot;&quot;);</span></span><br><span class="line"><span class="comment">//     fileTiffUploadVO.setTiffPublishStatus(publishResult ? 1 : 2);</span></span><br><span class="line"><span class="comment">//     fileTiffUploadVO.setUploadTime(DateUtil.format(new Date(), &quot;yyyy-MM-dd HH:mm:ss&quot;));</span></span><br><span class="line"><span class="comment">//     fileTiffUploadService.insert(fileTiffUploadVO);</span></span><br><span class="line"><span class="comment">// &#125; else &#123;</span></span><br><span class="line"><span class="comment">//     //å¦‚æœä¸å­˜åœ¨åˆ™æ–°å»ºå­˜å‚¨ä¸Šä¼ ä¿¡æ¯</span></span><br><span class="line"><span class="comment">//     FileTiffUploadVO fileTiffUploadVO = new FileTiffUploadVO();</span></span><br><span class="line"><span class="comment">//     fileTiffUploadVO.setFileId(UUID.randomUUID().toString().replaceAll(&quot;-&quot;, &quot;&quot;));</span></span><br><span class="line"><span class="comment">//     fileTiffUploadVO.setFileName(partFile.getName());</span></span><br><span class="line"><span class="comment">//     fileTiffUploadVO.setFileTiffPath(tiffPath);</span></span><br><span class="line"><span class="comment">//     fileTiffUploadVO.setFilePngPath(pngFilePath);</span></span><br><span class="line"><span class="comment">//     fileTiffUploadVO.setBubbleLocation(bubbleLocation);</span></span><br><span class="line"><span class="comment">//     fileTiffUploadVO.setTiffPublishUrl(publishResult ? tiffPublishUrl : &quot;&quot;);</span></span><br><span class="line"><span class="comment">//     fileTiffUploadVO.setTiffPublishStatus(publishResult ? 1 : 2);</span></span><br><span class="line"><span class="comment">//     fileTiffUploadVO.setUploadTime(DateUtil.format(new Date(), &quot;yyyy-MM-dd HH:mm:ss&quot;));</span></span><br><span class="line"><span class="comment">//     fileTiffUploadService.insert(fileTiffUploadVO);</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>ä¾èµ–å®ä½“ç±»ï¼š</strong></p>
<p><font color=Blue>FileTiffUploadVO.java</font></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableField;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableId;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableName;</span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Description;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@TableName(&quot;gis_file_tiff_upload&quot;)</span></span><br><span class="line"><span class="meta">@Description(&quot;tiffæ–‡ä»¶ä¸Šä¼ ä¿¡æ¯&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileTiffUploadVO</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String fileId;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å›¾åƒå¯¹æ¯”æ°”æ³¡æ‰€åœ¨ç»çº¬åº¦</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableField(&quot;bubble_location&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String bubbleLocation;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸Šä¼ tiffæ–‡ä»¶åç§°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableField(&quot;file_name&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String fileName;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * tiffå›¾ç‰‡ä½ç½®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableField(&quot;file_tiff_path&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String fileTiffPath;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * tiffå›¾ç‰‡å‘å¸ƒåçš„URL</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableField(&quot;tiff_publish_url&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String tiffPublishUrl;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * tiffå‘å¸ƒçŠ¶æ€</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableField(&quot;tiff_publish_status&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> tiffPublishStatus;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸Šä¼ æ—¶é—´</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@TableField(&quot;upload_time&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String uploadTime;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>tifè§£æå·¥å…·ç±»ï¼š</strong></p>
<p><font color=Blue>TiffUtil.java</font></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSONArray;</span><br><span class="line"><span class="keyword">import</span> org.gdal.gdal.Dataset;</span><br><span class="line"><span class="keyword">import</span> org.gdal.gdal.gdal;</span><br><span class="line"><span class="keyword">import</span> org.gdal.gdalconst.gdalconstConstants;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.Math.PI;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.Math.atan;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.Math.exp;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Classname</span> TiffUtil</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TiffUtil</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è§£ætiffè·å–åæ ‡</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> tiffPath</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> JSONArray <span class="title function_">getCoordinateByTiff</span><span class="params">(String tiffPath)</span> &#123;</span><br><span class="line">        <span class="comment">//è§£ætifå›¾ç‰‡è·å–ç»çº¬åº¦ï¼ˆå‡è®¾é€šè¿‡è§£ætifå›¾ç‰‡è·å–åˆ°äº†ç»çº¬åº¦ï¼‰</span></span><br><span class="line">        gdal.AllRegister();</span><br><span class="line">        <span class="comment">//è¯»å–tifæ–‡ä»¶</span></span><br><span class="line">        <span class="type">Dataset</span> <span class="variable">dataset</span> <span class="operator">=</span> gdal.Open(tiffPath, gdalconstConstants.GA_ReadOnly);</span><br><span class="line">        <span class="comment">//æ …æ ¼çŸ©é˜µçš„åˆ—æ•°</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">rasterXSize</span> <span class="operator">=</span> dataset.getRasterXSize();</span><br><span class="line">        <span class="comment">//æ …æ ¼çŸ©é˜µçš„è¡Œæ•°</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">rasterYSize</span> <span class="operator">=</span> dataset.getRasterYSize();</span><br><span class="line">        <span class="comment">//è·å–ä»¿å°„çŸ©é˜µä¿¡æ¯</span></span><br><span class="line">        <span class="type">double</span>[] doubles = dataset.GetGeoTransform();</span><br><span class="line">        <span class="comment">//è·å–æŠ•å½±ä¿¡æ¯</span></span><br><span class="line">        <span class="type">double</span> <span class="variable">aDouble</span> <span class="operator">=</span> doubles[<span class="number">0</span>];</span><br><span class="line">        <span class="type">double</span> <span class="variable">aDouble1</span> <span class="operator">=</span> doubles[<span class="number">3</span>];</span><br><span class="line">        <span class="type">double</span> <span class="variable">aDouble2</span> <span class="operator">=</span> doubles[<span class="number">1</span>] * rasterXSize + aDouble;</span><br><span class="line">        <span class="type">double</span> <span class="variable">aDouble3</span> <span class="operator">=</span> doubles[<span class="number">5</span>] * rasterYSize + aDouble1;</span><br><span class="line">        <span class="comment">//å¢¨å¡æ‰˜è½¬WGS84:ç»åº¦</span></span><br><span class="line">        <span class="type">double</span> <span class="variable">topX</span> <span class="operator">=</span> mercator2Lon(aDouble);</span><br><span class="line">        <span class="comment">//å¢¨å¡æ‰˜è½¬WGS84:çº¬åº¦</span></span><br><span class="line">        <span class="type">double</span> <span class="variable">topY</span> <span class="operator">=</span> mercator2Lat(aDouble1);</span><br><span class="line">        <span class="comment">//å¢¨å¡æ‰˜è½¬WGS84:ç»åº¦</span></span><br><span class="line">        <span class="type">double</span> <span class="variable">belowX</span> <span class="operator">=</span> mercator2Lon(aDouble2);</span><br><span class="line">        <span class="comment">//å¢¨å¡æ‰˜è½¬WGS84:çº¬åº¦</span></span><br><span class="line">        <span class="type">double</span> <span class="variable">belowY</span> <span class="operator">=</span> mercator2Lat(aDouble3);</span><br><span class="line">        <span class="comment">//å–ä¸¤ä¸ªåæ ‡ç‚¹ï¼Œæ•°æ®å°è£…ä¸ºäºŒç»´æ•°ç»„</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">coordinatesJSON</span> <span class="operator">=</span> <span class="string">&quot;[[&quot;</span> + topX + <span class="string">&quot;,&quot;</span> + topY + <span class="string">&quot;],&quot;</span> + <span class="string">&quot;[&quot;</span> + belowX + <span class="string">&quot;,&quot;</span> + belowY + <span class="string">&quot;]]&quot;</span>;</span><br><span class="line">        <span class="type">JSONArray</span> <span class="variable">jsonArray</span> <span class="operator">=</span> JSONArray.parseArray(coordinatesJSON);</span><br><span class="line">        <span class="keyword">return</span> jsonArray;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¢¨å¡æ‰˜è½¬WGS84:ç»åº¦</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> longitude</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">double</span> <span class="title function_">mercator2Lon</span><span class="params">(<span class="type">double</span> longitude)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> longitude / <span class="number">20037508.34</span> * <span class="number">180</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¢¨å¡æ‰˜è½¬WGS84:çº¬åº¦</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> latitude</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">double</span> <span class="title function_">mercator2Lat</span><span class="params">(<span class="type">double</span> latitude)</span> &#123;</span><br><span class="line">        <span class="type">double</span> <span class="variable">latitudeTemp</span> <span class="operator">=</span> latitude / <span class="number">20037508.34</span> * <span class="number">180</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">180</span> / PI * (<span class="number">2</span> * atan(exp(latitudeTemp * PI / <span class="number">180</span>)) - PI / <span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h6 id="æ­¤æ—¶æ‹¿åˆ°-url-å³å¯åœ¨å‰ç«¯è¿›è¡Œå¤„ç†å±•ç¤º"><a href="#æ­¤æ—¶æ‹¿åˆ°-url-å³å¯åœ¨å‰ç«¯è¿›è¡Œå¤„ç†å±•ç¤º" class="headerlink" title="æ­¤æ—¶æ‹¿åˆ° url å³å¯åœ¨å‰ç«¯è¿›è¡Œå¤„ç†å±•ç¤º"></a>æ­¤æ—¶æ‹¿åˆ° url å³å¯åœ¨å‰ç«¯è¿›è¡Œå¤„ç†å±•ç¤º</h6><p><code>geoServerUrl + &quot;/&quot; + geoServerWorkspace + &quot;/wms?service=WMS&amp;version=1.1.0&amp;request=GetMap&amp;layers=&quot; + geoServerWorkspace + &quot;:&quot; + partFile.getName().split(&quot;\\.&quot;)[0] + &quot;&amp;styles=&amp;bbox=&#123;bbox-epsg-3857&#125;&amp;width=768&amp;height=552&amp;srs=EPSG:3857&amp;format=image%2Fpng&amp;transparent=true&quot;;</code><br>ğŸ‘‡<br><code>http://localhost:18888/geoserver/a_try/wms?service=WMS&amp;version=1.1.0&amp;request=GetMap&amp;layers=a_try:aaaaaaaaaaatcz&amp;bbox=&#123;bbox-epsg-3857&#125;&amp;width=768&amp;height=437&amp;srs=EPSG:3857&amp;format=image%2Fpng&amp;transparent=true</code></p>
<h6 id="å‰ç«¯ä½¿ç”¨æ­¤-tif-url"><a href="#å‰ç«¯ä½¿ç”¨æ­¤-tif-url" class="headerlink" title="å‰ç«¯ä½¿ç”¨æ­¤ tif url"></a>å‰ç«¯ä½¿ç”¨æ­¤ tif url</h6><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">addLayer</span>(&#123; <span class="comment">// this.map ä¸ºåœ°å›¾å®ä¾‹</span></span><br><span class="line">  <span class="attr">id</span>: <span class="string">&quot;testTif&quot;</span>,</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&quot;raster&quot;</span>, <span class="comment">// type raster å³æ …æ ¼æ•°æ®</span></span><br><span class="line">  <span class="attr">source</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&quot;raster&quot;</span>,</span><br><span class="line">    <span class="attr">tiles</span>: [e], <span class="comment">// e ä¸ºæ­¤å‰æ‹¿åˆ°çš„ url</span></span><br><span class="line">    <span class="attr">tileSize</span>: <span class="number">256</span>, <span class="comment">// size å¯éšæ„è®¾ç½® ç›®æµ‹å½±å“ä¸å¤§</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">paint</span>: &#123;</span><br><span class="line">    <span class="string">&quot;raster-opacity&quot;</span>: <span class="number">1</span>, <span class="comment">// é€æ˜åº¦</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h5 id="è‡³äº-dbf-æ–‡ä»¶ï¼Œå¤„ç†èµ·æ¥ç›¸å¯¹å®¹æ˜“"><a href="#è‡³äº-dbf-æ–‡ä»¶ï¼Œå¤„ç†èµ·æ¥ç›¸å¯¹å®¹æ˜“" class="headerlink" title="è‡³äº .dbf æ–‡ä»¶ï¼Œå¤„ç†èµ·æ¥ç›¸å¯¹å®¹æ˜“"></a>è‡³äº .dbf æ–‡ä»¶ï¼Œå¤„ç†èµ·æ¥ç›¸å¯¹å®¹æ˜“</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ–‡ä»¶è½¬æµ</span></span><br><span class="line"><span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> file.getInputStream();</span><br><span class="line"><span class="comment">// æ ¹æ®è¾“å…¥æµåˆå§‹åŒ–ä¸€ä¸ªDBFReaderå®ä¾‹ï¼Œç”¨æ¥è¯»å–DBFæ–‡ä»¶ä¿¡æ¯</span></span><br><span class="line"><span class="type">DBFReader</span> <span class="variable">reader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DBFReader</span>(inputStream);</span><br><span class="line"><span class="comment">// è§£å†³ä¹±ç </span></span><br><span class="line">reader.setCharactersetName(<span class="string">&quot;GBK&quot;</span>);</span><br><span class="line"><span class="comment">// è°ƒç”¨DBFReaderå¯¹å®ä¾‹æ–¹æ³•å¾—åˆ°pathæ–‡ä»¶ä¸­å­—æ®µçš„ä¸ªæ•°</span></span><br><span class="line"><span class="type">int</span> <span class="variable">fieldsCount</span> <span class="operator">=</span> reader.getFieldCount();</span><br><span class="line">Object[] rowValues;</span><br><span class="line"><span class="comment">// ä¸€æ¡æ¡å–å‡ºpathæ–‡ä»¶ä¸­è®°å½•</span></span><br><span class="line"><span class="keyword">while</span> ((rowValues = reader.nextRecord()) != <span class="literal">null</span>) &#123;</span><br><span class="line">    rowValues.toString()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
        <category>åç«¯</category>
      </categories>
      <tags>
        <tag>Giså¼€å‘</tag>
      </tags>
  </entry>
</search>
